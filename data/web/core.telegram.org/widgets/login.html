<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Telegram Login Widget</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="The Telegram login widget is a simple way to authorize users on your website.
Check out this post for a general overview…">
    <meta property="og:title" content="Telegram Login Widget">
    <meta property="og:image" content="https://core.telegram.org/file/811140220/1a02/WFoFUXRl_C8.20012/170c02fae7a0c638aa">
    <meta property="og:description" content="The Telegram login widget is a simple way to authorize users on your website.
Check out this post for a general overview…">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    <link href="/css/bootstrap-extra.css?2" rel="stylesheet">

    <link href="/css/telegram.css?248" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class=""><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/widgets" >Widgets</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/widgets/login" >Telegram Login Widget</a></li></ul></div>
  <h1 id="dev_page_title">Telegram Login Widget</h1>
  
  <div id="dev_page_content"><blockquote>
<p>The Telegram <strong>login widget</strong> is a simple way to authorize users on your website.<br>Check out <a href="https://telegram.org/blog/login">this post</a> for a general overview of the widget.</p>
</blockquote>
<h3><a class="anchor" name="setting-up-a-bot" href="#setting-up-a-bot"><i class="anchor-icon"></i></a>Setting up a bot</h3>
<p>To use the login widget, you&#39;ll need a <a href="/bots#3-how-do-i-create-a-bot"><strong>Telegram bot</strong></a>.</p>
<p>We strongly recommend that the <strong>profile picture</strong> of the bot you use for authorization corresponds with your website‘s logo, and that the bot’s <strong>name</strong> reflects that connection.</p>
<p>Users will see this message when they log into your website:</p>
<div class="blog_image_wrap">
  <a href="/file/811140314/17c1/xf4ULBL5tmE.58438/07ff5b2958ed0e7e36" target="_blank"><img src="/file/811140220/1a02/WFoFUXRl_C8.20012/170c02fae7a0c638aa" title="Login confirmation box" /></a>
</div>

<p>It is more likely that users will log in if your bot has a name and logo they expect to see.</p>
<h3><a class="anchor" name="linking-your-domain-to-the-bot" href="#linking-your-domain-to-the-bot"><i class="anchor-icon"></i></a>Linking your domain to the bot</h3>
<p>Once you have chosen a bot, send the <strong>/setdomain</strong> command to <a href="https://t.me/botfather">@Botfather</a> to link your website&#39;s domain to the bot. Then configure your widget below and embed the code on your website.</p>
<h3><a class="anchor" name="widget-configuration" href="#widget-configuration"><i class="anchor-icon"></i></a>Widget configuration</h3>
<p><form class="form-horizontal form-telegram clearfix" id="login_widget_config">
  <div class="form-group">
    <label class="col-md-3 control-label">Bot Username:</label>
    <div class="col-md-6">
      <div class="form-control-dropdown" id="bot_username_dropdown">
        <div class="textfield-item">
          <input id="bot_username" name="bot_username" type="text" class="form-control" placeholder="enter username, e.g. samplebot" value="" onchange="updateWidget()" onblur="updateWidget()">
          <div class="textfield-item-underline"></div>
          <span class="textfield-item-error" id="username_error"></span>
        </div>
        <button type="button" class="btn btn-default form-control-dropdown-button dropdown-toggle" data-toggle="dropdown"></button>
        <div class="dropdown-menu form-control-dropdown-list" id="bot_username_dropdown_list"></div>
      </div>
      <span id="bot_username_help" class="help-block">Log in below to load your bots with linked domains</span>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-3 control-label">Button Style:</label>
    <div class="col-md-6">
      <label class="radio-item radio-item-block">
        <input type="radio" class="radio" name="widget_size" value="large" onchange="sizeChange(this)" checked />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Large</span>
      </label>
      <label class="radio-item radio-item-block">
        <input type="radio" class="radio" name="widget_size" value="medium" onchange="sizeChange(this)" />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Medium</span>
      </label>
      <label class="radio-item radio-item-block">
        <input type="radio" class="radio" name="widget_size" value="small" onchange="sizeChange(this)" />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Small</span>
      </label>
    </div>
    <div class="col-md-6 col-md-offset-3">
      <label class="checkbox-item checkbox-item-block">
        <input type="checkbox" class="checkbox" name="userpic" value="1" onchange="updateWidget(true)" checked />
        <span class="checkbox-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="checkbox-input-icon"></span></span><span class="checkbox-label">Show User Photo</span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-3 control-label">Corner Radius:</label>
    <div class="col-md-6">
      <label class="radio-item radio-item-block">
        <input type="radio" class="radio" name="radius" value="default" onchange="radiusChange(this)" checked />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Default</span>
      </label>
      <label class="radio-item radio-item-block radio-item-justified">
        <input type="radio" class="radio" name="radius" value="custom" onchange="radiusChange(this)" />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Custom</span>
        <span class="justified-wrap">
          <span class="textfield-item" style="width: 36px;">
            <input id="radius_value" name="radius_value" type="text" class="form-control" value="20" onchange="radiusValueChange(this)" onfocus="radiusValueFocus(this)" maxlength="3" style="text-align: center;">
            <span class="textfield-item-underline"></span>
          </span>
        </span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-3 control-label">Authorization Type:</label>
    <div class="col-md-6">
      <label class="radio-item radio-item-block">
        <input type="radio" class="radio" name="auth_type" value="callback" onchange="authTypeChange(this)" checked />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Callback</span>
      </label>
      <label class="radio-item radio-item-block radio-item-justified">
        <input type="radio" class="radio" name="auth_type" value="redirect" onchange="authTypeChange(this)" />
        <span class="radio-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="radio-input-icon"></span></span><span class="radio-label">Redirect to URL</span>
        <span class="justified-wrap">
          <span class="textfield-item">
            <input id="redirect_url" name="redirect_url" type="text" class="form-control" value="" onchange="updateWidget()" onfocus="redirectUrlFocus(this)">
            <span class="textfield-item-underline"></span>
          </span>
        </span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-3 control-label">Request Access:</label>
    <div class="col-md-6">
      <label class="checkbox-item checkbox-item-block">
        <input type="checkbox" class="checkbox" name="request_write" value="1" onchange="updateWidget(true)" checked />
        <span class="checkbox-input ripple-handler"><span class="ripple-mask"><span class="ripple"></span></span><span class="checkbox-input-icon"></span></span><span class="checkbox-label">to send messages from your bot</span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label for="embed_code" class="col-md-3 control-label">Embed Code:</label>
    <div class="col-md-6">
      <textarea id="embed_code" class="form-control embed_code" rows="5" readonly onclick="embedSelect(this)"></textarea>
    </div>
  </div>

  <div class="form-group">
    <div class="col-md-6 col-md-offset-3">
      <div class="widget_container" id="widget_container"></div>
    </div>
  </div>
</form></p>
<h3><a class="anchor" name="receiving-authorization-data" href="#receiving-authorization-data"><i class="anchor-icon"></i></a>Receiving authorization data</h3>
<p>After a successful authorization, the widget can return data in two ways:</p>
<ul>
<li>by redirecting the user to the URL specified in the <code>data-auth-url</code> attribute with the following parameters: <em>id</em>, <em>first_name</em>, <em>last_name</em>, <em>username</em>, <em>photo_url</em>, <em>auth_date</em> and <em>hash</em>;</li>
<li>by calling the callback function <code>data-onauth</code> with the JSON-object containing <em>id</em>, <em>first_name</em>, <em>last_name</em>, <em>username</em>, <em>photo_url</em>, <em>auth_date</em> and <em>hash</em> fields.</li>
</ul>
<h3><a class="anchor" name="checking-authorization" href="#checking-authorization"><i class="anchor-icon"></i></a>Checking authorization</h3>
<p>You can verify the authentication and the integrity of the data received by comparing the received <em>hash</em> parameter with the hexadecimal representation of the <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">HMAC-SHA-256</a> signature of the <strong>data-check-string</strong> with the <a href="https://en.wikipedia.org/wiki/SHA-2">SHA256</a> hash of the <a href="/bots#creating-a-new-bot">bot&#39;s token</a> used as a secret key.</p>
<p><strong>Data-check-string</strong> is a concatenation of all received fields, sorted in alphabetical order, in the format <code>key=&lt;value&gt;</code> with a <a href="https://en.wikipedia.org/wiki/Newline">line feed</a> character (&#39;\n&#39;, 0x0A) used as separator – e.g., <code>&#39;auth_date=&lt;auth_date&gt;\nfirst_name=&lt;first_name&gt;\nid=&lt;id&gt;\nusername=&lt;username&gt;&#39;</code>.</p>
<p>The full check might look like:</p>
<pre><code>data_check_string = ...
secret_key = SHA256(&lt;bot_token&gt;)
if (hex(HMAC_SHA256(data_check_string, secret_key)) == hash) {
  // data is from Telegram
}</code></pre>
<p>To prevent the use of outdated data, you can additionally check the <em>auth_date</em> field, which contains a Unix timestamp when the authentication was received.</p>
<h3><a class="anchor" name="sample-implementation" href="#sample-implementation"><i class="anchor-icon"></i></a>Sample implementation</h3>
<p>You can find <strong>sample PHP code</strong> for checking authorization and receiving data about a logged in user <a href="https://gist.github.com/anonymous/6516521b1fb3b464534fbc30ea3573c2">on this page</a>.</p>
</div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="/">Platform</a></h5>
      <ul>
        <li><a href="/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/jquery-ui.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>function onTelegramAuth(user) {
  var user_fullname = user.first_name + (user.last_name ? ' ' + user.last_name : '');
  if (window.botsLoaded) {
    return alert('You are already logged in as ' + user_fullname + '.');
  }
  $.ajax({
    url: '/loadbots',
    type: 'POST',
    data: user,
    dataType: 'json',
    success: function (data) {
      window.botsLoaded = true;
      if (data.dd) {
        $('#bot_username_dropdown').addClass('has-items');
        $('#bot_username_dropdown_list').html(data.dd);
        $('#bot_username_dropdown_list .form-control-dropdown-list-item').click(function() {
          $('#bot_username').val($(this).data('text')).select();
          updateWidget();
        });
        $('#bot_username_help').html("Select one of your bots".replace('{full_name}', escapeHTML(user_fullname)));
      } else {
        $('#bot_username_help').html("Create a <a target=\"_blank\" rel=\"noopener\" href=\"https:\/\/t.me\/botfather\">new bot<\/a> or link your domain to an existing one");
      }
      var scrollTop = $('#login_widget_config').offset().top - 70;
      $('html').animate({scrollTop: scrollTop}, 200, data.dd ? function() {
        $('#bot_username_dropdown .form-control-dropdown-button').dropdown('toggle');
      } : null);
    },
    error: function (xhr) {
      alert(xhr.responseText || 'Unknown error');
    }
  });
}
function updateWidget(widget_update, init) {
  var form = $('#login_widget_config').get(0);
  var tfi = $('#bot_username').parents('.textfield-item');
  var size = form.widget_size.value;
  var userpic = form.userpic.checked;
  var bot_username = init ? 'samplebot' : ($('#bot_username').val() || ''),
      match, has_username;
  if (match = bot_username.match(/^(?:(?:(?:https?):\/\/)?(?:t\.me|telegram\.me|telegram\.dog)\/|@)?([a-zA-Z0-9_]+)$/i)) {
    var username = match[1];
    if (bot_username != match[1]) {
      bot_username = match[1];
      $('#bot_username').val(bot_username);
    }
    tfi.removeClass('is-invalid');
    has_username = true;
  } else {
    if (!bot_username) {
      $('#username_error').html("Bot username required");
    } else {
      $('#username_error').html("Bot username invalid");
    }
    $('#bot_username').one('input', function() {
      tfi.removeClass('is-invalid');
    });
    tfi.addClass('is-invalid');
    has_username = false;
  }
  var attrs = '', html = '';
  var radius = form.radius.value;
  if (radius == 'custom') {
    var radius_value = $('#radius_value').val();
    attrs += ' data-radius="' + escapeHTML(radius_value) + '"';
  }
  if (widget_update) {
    var code = '<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="samplebot" data-size="' + escapeHTML(size) + '"' + (!userpic ? ' data-userpic="false"' : '') + ' data-onauth="onTelegramAuth(user)"' + attrs + (form.request_write.checked ? ' data-request-access="write"' : '') + '><\/script>';
    $('#widget_container').html(code);
  }
  var post_link = $('#post_link').val() || 'https://t.me/telegram/83',
      match;
  var auth_type = form.auth_type.value;
  if (auth_type == 'redirect') {
    var redirect_url = $('#redirect_url').val();
    attrs += ' data-auth-url="' + escapeHTML(redirect_url) + '"';
  } else if (auth_type == 'callback') {
    attrs += ' data-onauth="onTelegramAuth(user)"';
    html += "\n<script type=\"text/javascript\">\n  function onTelegramAuth(user) {\n    alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');\n  }\n<\/script>";
  }
  var code = '<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="' + escapeHTML(bot_username || 'samplebot') + '" data-size="' + escapeHTML(size) + '"' + (!userpic ? ' data-userpic="false"' : '') + attrs + (form.request_write.checked ? ' data-request-access="write"' : '') + '><\/script>' + html;
  $('#embed_code').val(code);
  $('#embed_code').height(0);
  $('#embed_code').height($('#embed_code').get(0).scrollHeight);
  return has_username;
}
function fixRadiusValue(update_real) {
  var form = $('#login_widget_config').get(0);
  if (update_real) {
    var radius_value = form.radius_value.value.replace(/[^0-9]+/g, '');
    form.radius_value.realValue = radius_value;
  } else {
    var radius_value = (form.radius_value.realValue || form.radius_value.defaultValue).replace(/[^0-9]+/g, '');
    form.radius_value.value = radius_value;
  }
  radius_value = parseInt(radius_value);
  if (radius_value <= 0) {
    form.radius_value.value = 0;
  } else if (form.widget_size.value == 'small' && radius_value > 10) {
    form.radius_value.value = 10;
  } else if (form.widget_size.value == 'medium' && radius_value > 14) {
    form.radius_value.value = 14;
  } else if (form.widget_size.value == 'large' && radius_value > 20) {
    form.radius_value.value = 20;
  } else if (form.radius_value.value != radius_value.toString()) {
    form.radius_value.value = radius_value;
  }
}
function sizeChange(el) {
  fixRadiusValue();
  updateWidget(true);
}
function radiusChange(el) {
  if (el.value == 'custom') {
    $('#radius_value').select();
  }
  updateWidget(true);
}
function radiusValueFocus(el) {
  fixRadiusValue();
  el.form.radius.value = 'custom';
  updateWidget(true);
}
function radiusValueChange(el) {
  fixRadiusValue(true);
  updateWidget(true);
}
function authTypeChange(el) {
  if (el.value == 'redirect') {
    $('#redirect_url').select();
  }
  updateWidget();
}
function redirectUrlFocus(el) {
  el.form.auth_type.value = 'redirect';
  updateWidget();
}
function embedSelect(el) {
  if (updateWidget()) {
    el.select();
  } else {
    $('#bot_username').select();
  }
}
updateWidget(true, true);
initRipple();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

