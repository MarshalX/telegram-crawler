<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Sponsored messages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Related TL schema:
Getting sponsored messages
sponsoredMessage#7dbf8673 flags:# recommended:flags.5?true can_report:flags.12?true…">
    <meta property="og:title" content="Sponsored messages">
    <meta property="og:image" content="">
    <meta property="og:description" content="Related TL schema:
Getting sponsored messages
sponsoredMessage#7dbf8673 flags:# recommended:flags.5?true can_report:flags.12?true…">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    
    <link href="/css/telegram.css?248" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class="active"><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/api" >API</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/api/sponsored-messages" >Sponsored messages</a></li></ul></div>
  <h1 id="dev_page_title">Sponsored messages</h1>
  
  <div id="dev_page_content"><!-- scroll_nav -->

<p>Related TL schema:</p>
<h4><a class="anchor" href="#getting-sponsored-messages" id="getting-sponsored-messages" name="getting-sponsored-messages"><i class="anchor-icon"></i></a>Getting sponsored messages</h4>
<pre><code><a href='/constructor/sponsoredMessage'>sponsoredMessage</a>#7dbf8673 flags:<a href='/type/%23'>#</a> recommended:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> can_report:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/constructor/true'>true</a> random_id:<a href='/type/bytes'>bytes</a> url:<a href='/type/string'>string</a> title:<a href='/type/string'>string</a> message:<a href='/type/string'>string</a> entities:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/MessageEntity'>MessageEntity</a>&gt; photo:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Photo'>Photo</a> media:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/MessageMedia'>MessageMedia</a> color:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/type/PeerColor'>PeerColor</a> button_text:<a href='/type/string'>string</a> sponsor_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/string'>string</a> additional_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/string'>string</a> min_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> max_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/SponsoredMessage'>SponsoredMessage</a>;

<a href='/constructor/messages.sponsoredMessages'>messages.sponsoredMessages</a>#ffda656d flags:<a href='/type/%23'>#</a> posts_between:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> start_delay:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> between_delay:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/int'>int</a> messages:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SponsoredMessage'>SponsoredMessage</a>&gt; chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/messages.SponsoredMessages'>messages.SponsoredMessages</a>;

---functions---

<a href='/method/messages.getSponsoredMessages'>messages.getSponsoredMessages</a>#3d6ce850 flags:<a href='/type/%23'>#</a> peer:<a href='/type/InputPeer'>InputPeer</a> msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> = <a href='/type/messages.SponsoredMessages'>messages.SponsoredMessages</a>;</code></pre>
<p>Each time the user opens a channel or a chat with a bot, <a href="/method/messages.getSponsoredMessages">messages.getSponsoredMessages</a> must be called to receive <a href="https://promote.telegram.org">sponsored messages</a> available for the channel or bot. The result must be cached for <strong>5 minutes</strong>.</p>
<blockquote>
<p><a href="https://t.me/durov/172">More about sponsored messages on Telegram</a></p>
</blockquote>
<h4><a class="anchor" href="#getting-sponsored-video-advertisements" id="getting-sponsored-video-advertisements" name="getting-sponsored-video-advertisements"><i class="anchor-icon"></i></a>Getting sponsored video advertisements</h4>
<pre><code><a href='/constructor/sponsoredMessage'>sponsoredMessage</a>#7dbf8673 flags:<a href='/type/%23'>#</a> recommended:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> can_report:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/constructor/true'>true</a> random_id:<a href='/type/bytes'>bytes</a> url:<a href='/type/string'>string</a> title:<a href='/type/string'>string</a> message:<a href='/type/string'>string</a> entities:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/MessageEntity'>MessageEntity</a>&gt; photo:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Photo'>Photo</a> media:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/MessageMedia'>MessageMedia</a> color:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/type/PeerColor'>PeerColor</a> button_text:<a href='/type/string'>string</a> sponsor_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/string'>string</a> additional_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/string'>string</a> min_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> max_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/SponsoredMessage'>SponsoredMessage</a>;

<a href='/constructor/messages.sponsoredMessages'>messages.sponsoredMessages</a>#ffda656d flags:<a href='/type/%23'>#</a> posts_between:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> start_delay:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> between_delay:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/int'>int</a> messages:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SponsoredMessage'>SponsoredMessage</a>&gt; chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/messages.SponsoredMessages'>messages.SponsoredMessages</a>;

---functions---

<a href='/method/messages.getSponsoredMessages'>messages.getSponsoredMessages</a>#3d6ce850 flags:<a href='/type/%23'>#</a> peer:<a href='/type/InputPeer'>InputPeer</a> msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> = <a href='/type/messages.SponsoredMessages'>messages.SponsoredMessages</a>;</code></pre>
<p>Each time the user starts watching a channel video in fullscreen, <a href="/method/messages.getSponsoredMessages">messages.getSponsoredMessages</a> must be called with <code>msg_id</code> set to the ID of the message with the video to receive sponsored messages to show in a small box on the video player, while the video is being played. </p>
<p>The returned <a href="/constructor/sponsoredMessage">sponsoredMessage</a>s will always be text-only ads with the <code>min_display_duration</code> and <code>max_display_duration</code> flags set, and the containing <a href="/constructor/messages.sponsoredMessages">messages.sponsoredMessages</a> constructor will always have the <code>start_delay</code> and <code>between_delay</code> flags set.  </p>
<p>The returned video ads must be displayed, in order, for <a href="/constructor/sponsoredMessage">sponsoredMessage</a>.<code>max_display_duration</code> seconds each, and then hidden automatically.  </p>
<p>Video ads may also be hidden manually by the user after <a href="/constructor/sponsoredMessage">sponsoredMessage</a>.<code>min_display_duration</code> seconds.  </p>
<p>The first ad must be displayed after <a href="/constructor/messages.sponsoredMessages">messages.sponsoredMessages</a>.<code>start_delay</code> seconds of video playtime.  </p>
<p>Subsequent ads must be displayed <a href="/constructor/messages.sponsoredMessages">messages.sponsoredMessages</a>.<code>between_delay</code> seconds after the previous ad is hidden, either automatically or manually be the user.  </p>
<p>Switching to the next or the previous video on the channel by swiping left or right while in the fullscreen player should <strong>not</strong> trigger a new <a href="/method/messages.getSponsoredMessages">messages.getSponsoredMessages</a> call nor interrupt any timers: in fact, treat the ads as linked to the fullscreen player, not to a specific video (this is true as long as we're playing videos on the same channel).  </p>
<p>Pause all timers when the user pauses the video, for example assume:</p>
<ul>
<li><code>start_delay=5</code></li>
<li><code>between_delay=10</code></li>
<li><code>min_display_duration=5</code> for all ads</li>
<li><code>max_display_duration=10</code> for all ads</li>
</ul>
<p>And the following timeline:</p>
<ul>
<li><code>T=0</code>: the user starts playing the video</li>
<li><code>T=3</code>: the user pauses the video</li>
<li><code>T=10</code>: The user resumes the video</li>
<li><code>T=12</code>: Show the first ad</li>
<li><code>T=15</code>: The user pauses the video</li>
<li><code>T=20</code>: The user resumes the video</li>
<li><code>T=22</code>: Allow the user to hide the ad</li>
<li><code>T=25</code>: The user pauses the video</li>
<li><code>T=30</code>: The user resumes the video</li>
<li><code>T=32</code>: Autohide the ad</li>
<li><code>T=35</code>: The user pauses the video</li>
<li><code>T=40</code>: The user resumes the video</li>
<li><code>T=47</code>: Show the next ad</li>
</ul>
<h4><a class="anchor" href="#getting-sponsored-search-results" id="getting-sponsored-search-results" name="getting-sponsored-search-results"><i class="anchor-icon"></i></a>Getting sponsored search results</h4>
<pre><code><a href='/constructor/contacts.found'>contacts.found</a>#b3134d9d my_results:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Peer'>Peer</a>&gt; results:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Peer'>Peer</a>&gt; chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/contacts.Found'>contacts.Found</a>;

<a href='/constructor/contacts.sponsoredPeersEmpty'>contacts.sponsoredPeersEmpty</a>#ea32b4b1 = <a href='/type/contacts.SponsoredPeers'>contacts.SponsoredPeers</a>;
<a href='/constructor/contacts.sponsoredPeers'>contacts.sponsoredPeers</a>#eb032884 peers:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SponsoredPeer'>SponsoredPeer</a>&gt; chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/contacts.SponsoredPeers'>contacts.SponsoredPeers</a>;

<a href='/constructor/sponsoredPeer'>sponsoredPeer</a>#c69708d3 flags:<a href='/type/%23'>#</a> random_id:<a href='/type/bytes'>bytes</a> peer:<a href='/type/Peer'>Peer</a> sponsor_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> additional_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/string'>string</a> = <a href='/type/SponsoredPeer'>SponsoredPeer</a>;

---functions---

<a href='/method/contacts.search'>contacts.search</a>#11f812d8 q:<a href='/type/string'>string</a> limit:<a href='/type/int'>int</a> = <a href='/type/contacts.Found'>contacts.Found</a>;

<a href='/method/contacts.getSponsoredPeers'>contacts.getSponsoredPeers</a>#b6c8c393 q:<a href='/type/string'>string</a> = <a href='/type/contacts.SponsoredPeers'>contacts.SponsoredPeers</a>;</code></pre>
<p>Clients must also support sponsored peers, to be shown when searching for peers using the <strong>global search function</strong>, together with <a href="/method/contacts.search">contacts.search</a>.  </p>
<p><a href="/method/contacts.getSponsoredPeers">contacts.getSponsoredPeers</a> should be invoked, returning a list of sponsored peers to be displayed after the results in <a href="/constructor/contacts.found">contacts.found</a>.<code>my_results</code> and before the results in <a href="/constructor/contacts.found">contacts.found</a>.<code>results</code>.  </p>
<p>Sponsored peers should be treated similarly to sponsored messages: </p>
<ul>
<li>If the <a href="/constructor/sponsoredPeer">sponsoredPeer</a>.<code>sponsor_info</code> or <a href="/constructor/sponsoredPeer">sponsoredPeer</a>.<code>additional_info</code> flags are set, an additional "Sponsor info" label must be present, that when clicked, displays the contents of the flags.  </li>
<li>When they scroll into view, <a href="/method/messages.viewSponsoredMessage">messages.viewSponsoredMessage</a> should be <a href="#counting-sponsored-message-views">invoked as specified here »</a>, passing the <a href="/constructor/sponsoredPeer">sponsoredPeer</a>'s <code>random_id</code> to the <code>random_id</code> parameter.</li>
<li>Clicks should be reported by invoking <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a>, without setting any flag, passing the <a href="/constructor/sponsoredPeer">sponsoredPeer</a>'s <code>random_id</code> to the <code>random_id</code> parameter.</li>
<li>Sponsored search results can be reported using <a href="/method/messages.reportSponsoredMessage">messages.reportSponsoredMessage</a>, following the <a href="#reporting-sponsored-messages">usual flow »</a>, passing the <a href="/constructor/sponsoredPeer">sponsoredPeer</a>'s <code>random_id</code> to the <code>random_id</code> parameter.  </li>
</ul>
<p>As specified above, a <a href="/constructor/sponsoredPeer">sponsoredPeer</a>'s <code>random_id</code> <strong>can</strong> be passed to methods related to sponsored messages.  </p>
<h4><a class="anchor" href="#displaying-sponsored-messages" id="displaying-sponsored-messages" name="displaying-sponsored-messages"><i class="anchor-icon"></i></a>Displaying sponsored messages</h4>
<p>Sponsored messages must be displayed as follows:</p>
<ul>
<li>
<p>In channels, they must be displayed below all other posts in the channel, after the user scrolls further down, past the last message.<br>
Sponsored channel messages have:</p>
<ul>
<li>A title (contained in <code>title</code>)</li>
<li>A text (contained in <code>message</code>+<code>entities</code>)</li>
<li>An optional media (contained in <code>media</code>, clicking on it should open the URL in <code>url</code> as below; a separate button should be available to expand the video in fullscreen, which should <em>not</em> open the linked <code>url</code> when clicked).</li>
<li>A button at the button (label in <code>button_text</code>) that when clicked, opens the URL in <code>url</code>.<br>
A confirmation prompt should be shown before opening the URL, unless the host part of the URL matches the following regex: <code>(^|\\.)(telegram\.(org|me|dog)|t\.me|te\.?legra\.ph|graph\.org|fragment\.com|telesco\.pe)$</code>, in which case the URL should be opened without confirmation (and if it's a <a href="/api/links">deep link »</a>, it should be opened directly in-app, without passing through the browser).  </li>
<li>The message should be marked as "Recommended" instead of "Sponsored" if the <code>recommended</code> flag is set.  </li>
<li>If the <code>photo</code> flag is set, it should be used to display a profile photo bubble for the sponsored message, like for messages sent in groups.  </li>
<li>If the <code>sponsor_info</code> or <code>additional_info</code> flags are set, an additional "Sponsor info" menu item must be present in the message context menu (the menu that pops up when clicking on a button), that when clicked, displays the contents of the flags.  </li>
</ul>
</li>
<li>
<p>In bots, they must be displayed <a href="https://telegram.org/blog/dynamic-video-quality-and-more#telegram-ads-in-bots">above the chat</a>, akin to an <a href="/api/action-bar">action bar</a>
Bot ads have:</p>
<ul>
<li>A title (contained in <code>title</code>): must be locally prepended with a blue-colored "Ad" prefix, or a "Recommended" prefix if the <code>recommended</code> flag is set. </li>
<li>A text (contained in <code>message</code>+<code>entities</code>)</li>
<li>When the ad action bar is clicked, clients should open the URL in <code>url</code>.<br>
A confirmation prompt should be shown before opening the URL, unless the host part of the URL matches the following regex: <code>(^|\\.)(telegram\.(org|me|dog)|t\.me|te\.?legra\.ph|graph\.org|fragment\.com|telesco\.pe)$</code>, in which case the URL should be opened without confirmation (and if it's a <a href="/api/links">deep link »</a>, it should be opened directly in-app, without passing through the browser).  </li>
</ul>
<p>If the <code>photo</code> flag is set, a thumbnail-sized version of it should be displayed in the right section of the action bar.</p>
</li>
</ul>
<p>If set, the sponsored message/action bar should use the <a href="/api/colors">message accent color »</a> specified in <code>color</code>.</p>
<h4><a class="anchor" href="#counting-sponsored-message-views" id="counting-sponsored-message-views" name="counting-sponsored-message-views"><i class="anchor-icon"></i></a>Counting sponsored message views</h4>
<pre><code>---functions---

<a href='/method/messages.viewSponsoredMessage'>messages.viewSponsoredMessage</a>#269e3643 random_id:<a href='/type/bytes'>bytes</a> = <a href='/type/Bool'>Bool</a>;</code></pre>
<p>Once the entire text of the ad is shown on the screen (excluding the button for channel ads), <a href="/method/messages.viewSponsoredMessage">messages.viewSponsoredMessage</a> must be called with the <code>random_id</code> of the sponsored message.</p>
<h4><a class="anchor" href="#clicking-on-sponsored-messages" id="clicking-on-sponsored-messages" name="clicking-on-sponsored-messages"><i class="anchor-icon"></i></a>Clicking on sponsored messages</h4>
<pre><code>---functions---

<a href='/method/messages.clickSponsoredMessage'>messages.clickSponsoredMessage</a>#8235057e flags:<a href='/type/%23'>#</a> media:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> fullscreen:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> random_id:<a href='/type/bytes'>bytes</a> = <a href='/type/Bool'>Bool</a>;</code></pre>
<p>Depending on the action made by the user, the following logic must be followed.  </p>
<ul>
<li>Click on a link in the sponsored message: invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a>, open link.  </li>
<li>Click on the bot ad bar: invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a>, open link.  </li>
<li>Open a sponsored chat or a sponsored website via the associated button: invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a>, open chat.  </li>
<li>Open the sponsored chat via the sponsored message name, the sponsored message photo, or a mention in the sponsored message: invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a>, open chat.  </li>
<li>Clicks on media (only <strong>photos and videos without sound</strong>): invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a> with the <code>media</code> flag set, open link.  </li>
<li>Clicks on media (only <strong>videos with sound</strong>): invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a> with the <code>media</code> flag set, open video in fullscreen (do <strong>not</strong> open the link yet).</li>
<li>Clicks on media (only <strong>videos with sound in fullscreen</strong>): invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a> with the <code>media</code> and <code>fullscreen</code> flags set, open link.  </li>
<li>Clicks on the button while a sponsored video is in fullscreen: invoke <a href="/method/messages.clickSponsoredMessage">messages.clickSponsoredMessage</a> with the <code>fullscreen</code> flag set, open link.  </li>
</ul>
<h4><a class="anchor" href="#reporting-sponsored-messages" id="reporting-sponsored-messages" name="reporting-sponsored-messages"><i class="anchor-icon"></i></a>Reporting sponsored messages</h4>
<pre><code><a href='/constructor/sponsoredMessage'>sponsoredMessage</a>#7dbf8673 flags:<a href='/type/%23'>#</a> recommended:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> can_report:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/constructor/true'>true</a> random_id:<a href='/type/bytes'>bytes</a> url:<a href='/type/string'>string</a> title:<a href='/type/string'>string</a> message:<a href='/type/string'>string</a> entities:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/MessageEntity'>MessageEntity</a>&gt; photo:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Photo'>Photo</a> media:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/MessageMedia'>MessageMedia</a> color:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/type/PeerColor'>PeerColor</a> button_text:<a href='/type/string'>string</a> sponsor_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/string'>string</a> additional_info:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/string'>string</a> min_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> max_display_duration:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/SponsoredMessage'>SponsoredMessage</a>;

<a href='/constructor/sponsoredMessageReportOption'>sponsoredMessageReportOption</a>#430d3150 text:<a href='/type/string'>string</a> option:<a href='/type/bytes'>bytes</a> = <a href='/type/SponsoredMessageReportOption'>SponsoredMessageReportOption</a>;

<a href='/constructor/channels.sponsoredMessageReportResultChooseOption'>channels.sponsoredMessageReportResultChooseOption</a>#846f9e42 title:<a href='/type/string'>string</a> options:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SponsoredMessageReportOption'>SponsoredMessageReportOption</a>&gt; = <a href='/type/channels.SponsoredMessageReportResult'>channels.SponsoredMessageReportResult</a>;
<a href='/constructor/channels.sponsoredMessageReportResultAdsHidden'>channels.sponsoredMessageReportResultAdsHidden</a>#3e3bcf2f = <a href='/type/channels.SponsoredMessageReportResult'>channels.SponsoredMessageReportResult</a>;
<a href='/constructor/channels.sponsoredMessageReportResultReported'>channels.sponsoredMessageReportResultReported</a>#ad798849 = <a href='/type/channels.SponsoredMessageReportResult'>channels.SponsoredMessageReportResult</a>;

---functions---

<a href='/method/messages.reportSponsoredMessage'>messages.reportSponsoredMessage</a>#12cbf0c4 random_id:<a href='/type/bytes'>bytes</a> option:<a href='/type/bytes'>bytes</a> = <a href='/type/channels.SponsoredMessageReportResult'>channels.SponsoredMessageReportResult</a>;</code></pre>
<p>To report a sponsored message to Telegram's moderators, invoke <a href="/method/messages.reportSponsoredMessage">messages.reportSponsoredMessage</a>, passing the channel/bot ID, the <code>random_id</code> of the sponsored message and an empty <code>option</code> field.  </p>
<p>Note that only sponsored messages with the <a href="/constructor/sponsoredMessage">sponsoredMessage</a>.<code>can_report</code> flag set may be reported.  </p>
<p>Then, if the result is:</p>
<ul>
<li>A <a href="/constructor/channels.sponsoredMessageReportResultChooseOption">channels.sponsoredMessageReportResultChooseOption</a> constructor, the user must choose a report option from the localized options available in <code>options</code>, and after selection, the method must be invoked again, passing the option's <code>option</code> field to the <code>option</code> parameter of <a href="/method/channels.reportSponsoredMessage">channels.reportSponsoredMessage</a>.<br>
The <code>title</code> field of <a href="/constructor/channels.sponsoredMessageReportResultChooseOption">channels.sponsoredMessageReportResultChooseOption</a> must be used as title of the option selection popup.  </li>
<li>A <a href="/constructor/channels.sponsoredMessageReportResultAdsHidden">channels.sponsoredMessageReportResultAdsHidden</a> constructor, sponsored messages were hidden for the user in all chats.  </li>
<li>A <a href="/constructor/channels.sponsoredMessageReportResultReported">channels.sponsoredMessageReportResultReported</a> constructor, the sponsored message was reported successfully. </li>
</ul>
<p>The method may also return:</p>
<ul>
<li>An <code>AD_EXPIRED</code> RPC error, for expired (too old or not found) ads</li>
<li>A <code>PREMIUM_ACCOUNT_REQUIRED</code> RPC error, if the user asked to hide sponsored messages in the chosen option, but Telegram Premium is required for this action.  </li>
</ul>
<h4><a class="anchor" href="#testing-sponsored-messages" id="testing-sponsored-messages" name="testing-sponsored-messages"><i class="anchor-icon"></i></a>Testing sponsored messages</h4>
<p>For the channel <a href="https://t.me/SecretAdTestChannel">https://t.me/SecretAdTestChannel</a> the system will <strong>always</strong> return a sponsored message: promoting either a channel, a particular message in a channel, or a bot with a start parameter.</p>
<h4><a class="anchor" href="#withdrawing-ad-revenue-as-a-channel-bot-owner" id="withdrawing-ad-revenue-as-a-channel-bot-owner" name="withdrawing-ad-revenue-as-a-channel-bot-owner"><i class="anchor-icon"></i></a>Withdrawing ad revenue as a channel/bot owner</h4>
<p>Telegram has one of the <strong>most generous reward systems</strong> in the history of social media. Telegram channel/bot owners can now receive <strong>50%</strong> of the revenue from ads displayed in their channels.</p>
<p><a href="/api/revenue">See here »</a> for more info on how to withdraw channel/bot ad revenue, as well as view detailed revenue stats.  </p>
<hr>
<h4><a class="anchor" href="#sponsored-messages-in-third-party-apps" id="sponsored-messages-in-third-party-apps" name="sponsored-messages-in-third-party-apps"><i class="anchor-icon"></i></a>Sponsored messages in third-party apps</h4>
<p>Telegram continues to grow worldwide, in part thanks to third-party apps using the Telegram API. To cover the increasing costs that come with this growth, Telegram added <a href="https://promote.telegram.org">sponsored messages</a> – a paid <a href="https://t.me/durov/172">privacy-friendly way</a> to promote <strong>bots and channels</strong>. </p>
<p>If their app allows its users to <strong>access content from Telegram channels</strong>, third-party developers using the Telegram API are required to support and properly display official sponsored messages in their apps by <strong>January 1, 2022</strong>. Unfortunately, Telegram cannot financially sustain third-party apps that do not display sponsored messages and they will have to be disconnected. </p>
<p>Telegram's API usage will continue to be <strong>free of charge</strong> for all developers. The <a href="https://core.telegram.org/api/terms#3-advertising-amp-monetization">rules</a> regarding monetization in third-party apps remain the same: developers are allowed to monetize their coding efforts through advertising of their own or other legitimate means, provided that all the methods of monetization used in their apps are prominently mentioned in their app store descriptions.</p></div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="/">Platform</a></h5>
      <ul>
        <li><a href="/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>window.initDevPageNav&&initDevPageNav();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

