window.Graph={render:function(t,s){var i=document.createElement("div");return i.className="tchart--wrapper",t.appendChild(i),new this.units.TChart({container:i,data:s})},units:{}},(()=>{function t(t){this.composer=t.composer,this.state=t.state,this.queue={},this.queueSize=0,this.step=this.step.bind(this)}t.prototype={add:function(t){for(var s,i,e,a=0,h=+new Date,o=this.queue;a<t.length;){if(!(s=o[(i=t[a]).prop])){if(i.end==i.state[i.prop]){i.cbEnd&&i.cbEnd(i.state),a++;continue}o[i.prop]=s={lastStart:1},this.queueSize++}e=h-s.lastStart,i.duration*=this.state.speed,i.delay*=this.state.speed,s.cbEnd=i.cbEnd,s.state=i.state,s.lastStart=h,s.start=i.state[i.prop],s.end=i.end,s.startDt=h+(i.delay||0),s.endDt=s.startDt+(i.duration||0)-(i.fixed?0:Math.max(i.duration-e,0)),s.tween=i.tween||"easeInOutQuad",s.speed=i.speed,s.group=i.group,a++}this.animFrame||(this.animFrame=requestAnimationFrame(this.step))},get:function(t){return this.queue[t]},step:function(){var t,s,i,e,a,h,o,n=[],r=+new Date,d={top:!1,bottom:!1};for(t in this.queue)h=(s=this.queue[t]).endDt-s.startDt,i=s.state[t],(o=(e=r)<s.startDt)?e=s.startDt:e>s.endDt&&(e=s.endDt),(e=(e=h?(e-s.startDt)/h:o?0:1)<1?"exp"==s.tween?i+(s.end-i)*s.speed:(h=s.start,o=s.end,{linear:function(t,s,i,e){return i*t/e+s},easeInOutQuad:function(t,s,i,e){return(t/=.5*e)<1?.5*i*t*t+s:-i/2*(--t*(t-2)-1)+s}}[s.tween](e,h,o-h,1)):s.end)!=i?(s.state[t]=e,d.top=d.top||s.group.top,d.bottom=d.bottom||s.group.bottom):e==s.end&&n.push(t);for(a=0;a<n.length;)this.queue[n[a]].cbEnd&&this.queue[n[a]].cbEnd(this.queue[n[a]].state),delete this.queue[n[a]],a++;this.queueSize-=n.length,this.composer.render(d),this.queueSize?this.animFrame=requestAnimationFrame(this.step):delete this.animFrame}},window.Graph.units.TAnimator=t})(),(()=>{function t(t){(this.opts=t).additional.mini&&(this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!0}))}var Ht=window.Graph.units;t.prototype={onResize:function(){var t,s;this.opts.additional.mini&&(t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph,this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached="")},setDarkMode:function(t){this.isDarkMode=t},render:function(){var t,s,i,e=this.opts,a=e.data.ys,h=e.state,o=e.additional.mini,z=o?h.xg1:h.x1,F=o?h.xg2:h.x2,Y=e.settings,X=Y["PADD"+(o?"_MINI_AREA":"")][0],n=Y["PADD"+(o?"_MINI_AREA":"")][1],N=Y["PADD"+(o?"_MINI_AREA":"")][2],r=Y["PADD"+(o?"_MINI_AREA":"")][3],H=e.data.x,d=e.settings.dpi,l=(o?this:this.opts).ctx,p=[],c=[],m=o?h.dims.mini:h.dims.graph,g=null==h.zoomMorph?0:h.zoomMorph,u=g,U=a.length;if(o){for(var B=[m.w,m.h,h.xg1,h.xg2,this.isDarkMode,h.zoomMode,g],x=0;x<U;x++)B.push(h["om_"+x]),B.push(h["f_"+x]);if((B=B.join(","))==this.cached)return void this.opts.ctx.drawImage(this.$canvas,m.l*d,m.t*d);this.cached=B}s=(m.w-n-r)/(F-z),f=Math.floor(Ht.TUtils.getXIndex(H,z-r/s)),M=Math.ceil(Ht.TUtils.getXIndex(H,F+n/s)),i=(r+(o?0:m.l))*d-z*(s*=d),hBottom=(m.h-N+(o?0:m.t))*d;var v=[],G=[],O=0,W=0,j=0,V=!1;for(x=0;x<U;x++)t=o?h["om_"+x]:h["o_"+x],V=V||h["f_"+x]<1,t<1&&0<t&&(O=t),0<t&&(v.push(x),G.push(t),1==t)&&h["e_"+x]&&(W++,j=v.length-1);var y=v.length,O=1==W?O:1,n=(o?h.y1m:h.y1,o?h.y2m:h.y2,Ht.TUtils.simplifyData("line",H,a,s,i,v,f,M,m.w-n-r)),f=n.xInd1,M=n.xInd2,T=n.x,Z=n.ys,q=!1;for(_=f;_<=M;_++){for(x=c[_]=p[_]=0;x<y;x++)c[_]+=(Z[v[x]].y[_]||0)*G[x];0==c[_]&&(q=!0)}if((q||V)&&(l.fillStyle=this.isDarkMode?"#242f3e":"#fff",l.fillRect(0,0,m.w*d,m.h*d)),0<g&&!o){1==u&&(this.savedX1=z,this.savedX2=F),K=u<1?(r=this.opts.animator.get("x1"),n=this.opts.animator.get("x2"),x1End=r?r.end:this.opts.state.x1,x2End=n?n.end:this.opts.state.x2,J=Ht.TUtils.getXIndex(H,-1==this.opts.state.zoomDir?this.savedX1:x1End,!0),Ht.TUtils.getXIndex(H,-1==this.opts.state.zoomDir?this.savedX2:x2End,!0)):(J=Ht.TUtils.getXIndex(H,z,!0),Ht.TUtils.getXIndex(H,F,!0)),K--;var J,K,Q=Math.floor(J),tt=Math.ceil(J),st=Math.floor(K),it=Math.ceil(K),et=0,at=[];for(x=0;x<y;x++){at[x]=0;for(var ht=a[v[x]].y,_=tt;_<=st;_++){var b=(ht[_]||0)*G[x];at[x]+=b,et+=b}b=(tt-J)*(ht[Q]||0)*G[x],b=(at[x]+=b,et+=b,(K-st)*(ht[it]||0)*G[x]);at[x]+=b,et+=b}var r=1==this.opts.state.zoomDir?Math.pow(Math.min(Math.max(u<.85?(u-.65)/.2:1-(u-.9)/.15,0),1),.8):this.prevElastic,ot=2*Math.PI-Math.PI/(7-u)-Math.PI/8*r,nt=ot,w=(1==this.opts.state.zoomDir?(u=Math.min(Math.max((u-.25)/.4,0),1),this.prevElastic=r):u=Math.min(Math.max(2.4*u-1.4,0),1),[]),S=Y.PIE_RADIUS*(g<1?2.31:1)*d,D=d*(m.w/2+m.l),rt=d*(m.h/2+m.t+2),dt=2*Math.PI*S/d;for(x=0;x<y;x++){var lt=at[x]/et||0,pt=2*Math.PI*lt,ct=ot-pt,mt=Math.round(lt*dt*(1/13)),gt=(x==y-1&&(ct=nt-2*Math.PI),2*Math.PI*.1/dt),ut=a[v[x]];w.push({st:ot+gt,ed:ct-gt,mid:ot-pt/2-gt/2,additionalPoints:Math.max(mt,4),percentage:0==lt?0:Math.max(Math.round(100*lt),1),percentageText:0==lt?"":lt<.01?"<1%":Math.round(100*lt)+"%",ind:v[x],value:at[x],label:ut.label,color:(this.isDarkMode?ut.colors_n:ut.colors_d)[2]}),ot=ct}h.pieAngles=w}var xt=d*(m.h-X-N+(o?0:-4)),vt=(m.h-N+(o?0:m.t))*d,$=0;for(x=0;x<U;x++)if(0<(t=o?h["om_"+x]:h["o_"+x])){var yt,ft,Mt,Tt,_t,bt,I,wt,St,Dt,$t=Z[x].y,It=t*xt;if(l.fillStyle=(this.isDarkMode?a[x].colors_n:a[x].colors_d)[0],l.globalAlpha=.9*h["f_"+x]+.1,l.beginPath(),0!=g&&o){var Lt=this.opts.data.mainPeriodLen*s;if(l.moveTo(T[M]*s+Lt+i,hBottom-p[M]),0<x)for(l.lineTo(T[M]*s+i,hBottom-p[M]),_=M;f+1<=_;_--)l.lineTo(T[_]*s+i,hBottom-(p[_]+u*(p[_-1]-p[_]))+0),l.lineTo(T[_-1]*s+i,hBottom-p[_-1]+0);else l.lineTo(T[f]*s+i,hBottom);if($<y-1)for(_=f;_<=M-1;_++){var At=vt-($t[_]*It/c[_]||0),L=hBottom-At,At=(_==f&&l.lineTo(T[f]*s+i,hBottom-p[f]-L),vt-($t[_+1]*It/c[_+1]||0)),Et=hBottom-At,Pt=p[_+1]+Et;l.lineTo(T[_+1]*s+i,hBottom-(Pt+u*(p[_]+L-Pt))),l.lineTo(T[_+1]*s+i,hBottom-Pt),_==M-1&&l.lineTo(T[M]*s+Lt+i,hBottom-p[M]-Et),p[_]+=L}else l.lineTo(T[f]*s+i<<0,hBottom-xt<<0),l.lineTo(T[M]*s+i<<0,hBottom-xt<<0);p[M]+=Et}else if(0==g){if(0<x)for(l.moveTo(T[M]*s+i<<0,hBottom-p[M]+0<<0),_=M-1;f<=_;_--)l.lineTo(T[_]*s+i<<0,hBottom-p[_]+0<<0);else l.moveTo(T[M]*s+i<<0,hBottom<<0),l.lineTo(T[f]*s+i<<0,hBottom<<0);if($<y-1||q)for(_=f;_<=M;_++){var Rt,At=vt-($t[_]*It/c[_]||0),L=hBottom-At;xt<(Rt=p[_]+L)&&(Rt=xt),l.lineTo(T[_]*s+i<<0,hBottom-Rt<<0),p[_]+=L}else l.lineTo(T[f]*s+i<<0,hBottom-xt<<0),l.lineTo(T[M]*s+i<<0,hBottom-xt<<0)}else{var A,E,P=function(t,s,i,e){var a=0,h=0;R&&1<W&&(a=Math.cos(w[$].mid)*R*8*d,h=-Math.sin(w[$].mid)*R*8*d),S<e&&(e=S);var o=(o=Math.atan2(rt-s,t-D))<0?2*Math.PI+o:o,s=Math.pow((rt-s)*(rt-s)+(t-D)*(t-D),.5),t=(Math.abs(i-o)>Math.PI*(1==y?1.5:1)&&(i-=2*Math.PI),i<2*-Math.PI&&(i-=2*-Math.PI),o+u*(i-o)),i=s+u*(e-s);return[D+Math.cos(t)*i+a,rt-Math.sin(t)*i+h]},kt=g<1?4:w[$].additionalPoints,Ct=!1,zt=!1,R=h["pieInd_"+v[$]]||0;if(0==w[$].percentage&&(l.globalAlpha=0),A=P(T[M]*s+i,hBottom-p[M],w[0].st,S),l.moveTo(A[0],A[1]),0<$)for(_=M-1;f<=_;_--)(E=T[_]*s+i)==D&&(Ct=!0),A=D<=E?(C=(E-D)/(m.w*d/2),0==u&&(C=0),P(E,hBottom-p[_]+0,w[0].st,S*C)):(Ct||(Ct=!0,Nt=(D-E)/(T[_+1]*s+i-E),k=hBottom-p[_]+0,Ft=hBottom-p[_+1]+0,A=P(D,k+Nt*(Ft-k),w[$].st,0),l.lineTo(A[0],A[1])),C=(D-E)/(m.w*d/2),P(E,hBottom-p[_]+0,w[$].st,S*C)),l.lineTo(A[0],A[1]);else A=P(T[f]*s+i,hBottom,w[0].st,S),l.lineTo(A[0],A[1]);if($<y-1){for(_=0;_<=kt;_++){var At=vt-($t[f]*It/c[f]||0),L=hBottom-At,k=hBottom-p[f]+0,Ft=hBottom-p[f]-L;A=P(T[f]*s+i,k+_/kt*(Ft-k),w[$].st+_/kt*(w[$].ed-w[$].st),S),l.lineTo(A[0],A[1])}for(_=f;_<=M;_++){var C,Yt,Xt,Nt,At=vt-($t[_]*It/c[_]||0),L=hBottom-At;(E=T[_]*s+i)==D&&(zt=!0),A=E<=D?(C=(D-E)/(m.w*d/2),P(Yt=E,Xt=hBottom-p[_]-L,w[$].ed,S*C)):(zt||(zt=!0,Nt=(D-Yt)/(E-Yt),k=Xt,Ft=hBottom-p[_]-L,A=P(D,k+Nt*(Ft-k),w[$].ed,0),l.lineTo(A[0],A[1])),C=(E-D)/(m.w*d/2),0==u&&(C=0),P(E,hBottom-p[_]-L,w[0].st,S*C)),l.lineTo(A[0],A[1]),p[_]+=L}E<D&&(zt||(A=P(D,k,w[$].ed,0),l.lineTo(A[0],A[1])))}else for(_=0;_<=kt;_++)A=P((T[f]+_/kt*(T[M]-T[f]))*s+i,0,w[$].st+_/kt*(w[0].st-2*Math.PI-w[$].st),S),l.lineTo(A[0],A[1])}l.closePath(),l.fill(),!o&&0<g&&w[$].percentageText&&(wt=Math.pow(u,1==this.opts.state.zoomDir?4:20)*t*(.9*h["f_"+x]+.1),_t=Math.max(Math.min(2*w[$].percentage,26),10),bt=2*(I=Y.PIE_RADIUS)/3,yt=Math.cos(w[$].mid),ft=Math.sin(w[$].mid),Mt=w[$].percentage<e.data.pieLabelsPercentages.outboard,Rt=Tt=0,R&&1<W&&(Tt=yt*R*8*d,Rt=-ft*R*8*d),l.fillStyle="white",l.textAlign="center",l.globalAlpha=wt,w[$].percentage<e.data.pieLabelsPercentages.hoverOnly&&(l.globalAlpha=R*wt),Mt&&(bt=I+(_t=Math.max(_t,14))/3+13,l.fillStyle=(this.isDarkMode?a[x].colors_n:a[x].colors_d)[0],l.lineWidth=1,l.strokeStyle=(this.isDarkMode?a[x].colors_n:a[x].colors_d)[0],wt=D+Tt+yt*(I-1)*d,St=rt+Rt-ft*(I-1)*d,Dt=D+Tt+yt*(I+6*(1-R)-1)*d,I=rt+Rt-ft*(I+6*(1-R)-1)*d,l.beginPath(),l.moveTo(wt,St),l.lineTo(Dt,I),l.stroke()),St=D+Tt+(wt=yt*bt*(j==$?O:1))*d+(Mt?_t/4*w[$].percentageText.length*wt/bt*d:0),Dt=rt+Rt-ft*bt*(j==$?O:1)*d,l.font="bold "+_t*d+"px "+e.settings.FONTS,l.fillText(w[$].percentageText,St,Dt+_t*d/2.9),l.globalAlpha=1),$++}l.globalAlpha=1,o&&this.opts.ctx.drawImage(this.$canvas,m.l*d,m.t*d)}},Ht.TAreas=t})(),(()=>{function t(t){this.opts=t,this.ctx=t.ctx,this.items={},this.setAnimation(!1),this.deleteItem=this.deleteItem.bind(this)}var P=window.Graph.units;t.prototype={onResize:function(){this.setAnimation(!1)},setDarkMode:function(t){this.isDarkMode=t},setAnimation:function(t){this.noAnimation=!t},hideItem:function(t,s){this.items[t].tp=2,this.opts.animator.add([{prop:"ox_"+t,state:this.items[t].state,end:0,duration:this.noAnimation?0:200*s,tween:"linear",group:{top:!0},cbEnd:this.deleteItem}])},deleteItem:function(t){delete this.items[t.ind]},render:function(t){var s,i=this.opts,e=i.settings.dpi,a=i.data.x,h=i.state,o=i.settings.PADD[1],n=i.settings.PADD[3],r=i.animator,d=(a.length,this.opts.state.dims.axisX),l=this.opts.state.dims.dates,p=h.zoomMode,c=null==h.zoomMorph?0:h.zoomMorph,m=D=Math.floor(P.TUtils.getXIndex(a,h.x1)),g=$=Math.ceil(P.TUtils.getXIndex(a,h.x2)),u="bar"==i.graphStyle||"step"==i.graphStyle,x=9*(h.zoomMode&&i.data.details?i.data.details:i.data).maxXTickLength,v=u?this.opts.data.mainPeriodLen:0,y=u?this.opts.data.detailPeriodLen:0,f=v+(y-v)*c,M=v*(1-c),v=(d.w-o-n)/Math.round((h.x2-h.x1+v)/this.opts.data.mainPeriodLen),y=(d.w-o-n)/Math.round((h.x2-h.x1+y)/this.opts.data.detailPeriodLen),T=v+(y-v)*c,_=Math.pow(2,Math.ceil(Math.log2(x/v))),b=Math.pow(2,Math.ceil(Math.log2(x/y))),w=(d.w-n-o)/(h.x2-h.x1+M),y=(_<1&&(_=1),b<1&&(b=1),this.ctx.font=11*e+"px "+i.settings.FONTS,this.ctx.textAlign="center",this.ctx.fillStyle=(this.isDarkMode?this.opts.data.axis_n:this.opts.data.axis_d).x,this.prevXStep?this.prevXStep>v?this.prevXStep/v:v/this.prevXStep:1),S=1/Math.pow(y,5),D=(p&&1==c&&(S/=2),this.prevXStep=v,Math.max(D-Math.ceil((n+.5*x)/T),0)),$=Math.min($+Math.ceil((o+.5*x)/T),a.length-1);p&&(M=this.opts.animator.get("x1"),y=this.opts.animator.get("x2"),m=M?M.end:this.opts.state.x1,g=y?y.end:this.opts.state.x2,m=Math.floor(P.TUtils.getXIndex(a,m)),g=Math.floor(P.TUtils.getXIndex(a,g))),p&&(v=Math.max(a[this.opts.state.detailInd1],this.opts.state.xMainMin),T=Math.min(a[this.opts.state.detailInd2],this.opts.state.xMainMax),s=Math.round((T-v)/this.opts.data.mainPeriodLen)+(u?0:1));for(var I=D;I<=$;I++){var L=I%_==0,A="m",A=(p&&(I<this.opts.state.detailInd1?L=I%_==0&&c<1:I<=this.opts.state.detailInd2?(L=Math.max(I-this.opts.state.detailInd1,0)%b==0,A="d"):L=Math.max(I-(this.opts.state.detailInd2-this.opts.state.detailInd1+1-s),0)%_==0&&c<1),a[I]+A),E=this.items[A];L?E?2==E.tp&&(E.tp=1,r.add([{prop:"ox_"+A,state:E.state,end:1,duration:this.noAnimation?0:200*S,tween:"linear",group:{top:!0}}])):((E={tp:1,xi:a[I],i:I,state:{ind:A}}).state["ox_"+A]=0,this.items[A]=E,r.add([{prop:"ox_"+A,state:E.state,end:1,duration:this.noAnimation?0:200*S,tween:"linear",group:{top:!0}}])):E&&1==E.tp&&this.hideItem(A,S),E&&0<E.state["ox_"+A]&&(L=(E.xi-h.x1+f/2)*w+n,this.ctx.globalAlpha=E.state["ox_"+A]*t,L+x/2>=d.l)&&L-x/2<=d.l+d.w&&(A=(L+d.l)*e,this.ctx.fillText(i.data.datesShort[I],A,(d.t+9)*e))}for(I in this.items)1==(E=this.items[I]).tp&&(E.xi<h.x1-n/w||E.xi>h.x2+o/w)&&this.hideItem(I,S);this.ctx.globalAlpha=1,p&&1==c&&g--,g<m&&(g=m);M=i.data.datesRange[m]==i.data.datesRange[g]?i.data.datesRange[m]:i.data.datesRange[m]+" â€“ "+i.data.datesRange[g],y=13;d.w<375&&(y=11),this.ctx.font="bold "+y*e+"px "+i.settings.FONTS,this.ctx.textAlign="right",this.ctx.fillStyle=this.isDarkMode?"#fff":"#000",this.ctx.fillText(M,(l.l+l.w)*e,(l.t+l.h-7)*e)}},P.TAxisX=t})(),(()=>{function t(t){this.opts=t,this.ctx=t.ctx,this.uuid=1,this.items={},this.setAnimation(!1),this.setForceUpdate(!1),this.deleteItem=this.deleteItem.bind(this)}var w=window.Graph.units;t.prototype={onResize:function(){this.setAnimation(!1),this.setForceUpdate(!1)},setDarkMode:function(t){this.isDarkMode=t},setAnimation:function(t){this.noAnimation=!t},setForceUpdate:function(t){this.forceUpdate=t},deleteItem:function(t){delete this.items[t.id]},render:function(t){var s,i;this.opts.pairY?(s=this.calcAxisData("y1_0","y2_0"),(i=this.calcAxisData("y1_1","y2_1")).needAnimation&&!s.needAnimation||this.opts.state.o_0<1?this.updateAxisState("y1_1","y2_1","numRight",i,s,i):this.updateAxisState("y1_0","y2_0","numLeft",s,s,i)):(s=this.calcAxisData("y1","y2"),this.updateAxisState("y1","y2","numLeft",s,s,s)),this.renderState(t)},calcAxisData:function(t,s){var i=this.opts.state,e=this.opts.settings.PADD[0],a=this.opts.settings.PADD[2],h=(Math.floor(this.opts.settings.Y_AXIS_RANGE),!1),o=this.opts.animator.get(t),n=this.opts.animator.get(s),o=o?o.end:i[t],n=n?n.end:i[s],r=Math.round((n-o)/this.opts.settings.Y_AXIS_RANGE),d=i[s]-i[t],t=i[t]>o?i[t]/o:o/i[t],i=i[s]>n?i[s]/n:n/i[s],s=(this.opts.state.dims.axisYLines.h-e-a)/d,d=(this.opts.state.dims.axisYLines.h-e-a)/(n-o);return(1.05<t||1.05<i||this.forceUpdate)&&(h=!0),{needAnimation:h=this.items[0]&&h&&!this.noAnimation&&!this.animationInProgress,y1:o,y2:n,yRealStep:r,yRealStart:o,yScaleCur:s,yScaleEnd:d}},updateAxisState:function(t,s,i,e,a,h){var o,n=this.opts,r=(n.settings,n.settings.dpi,n.state),d=(n.settings.PADD[0],n.settings.PADD[2]),l=(n.settings.PADD[3],n.settings.PADD[1],n.animator),p=Math.floor(n.settings.Y_AXIS_RANGE),c=!1,m=this.opts.state.dims.axisYLines;e.needAnimation&&(this.animationInProgress=!0);for(var g=0;g<=p;g++){var u,x,v,y,f=e.yRealStart+Math.round(e.yRealStep*g),M=a.yRealStart+Math.round(a.yRealStep*g),T=h.yRealStart+Math.round(h.yRealStep*g),_=w.TUtils.getFormatter("yTickFormatter",n.data,r.zoomMorph),b=_(M,a.yRealStep),_=_(Math.max(T,0),h.yRealStep,!0);e.needAnimation?(u=m.t+m.h-d-(f-e.y1)*e.yScaleEnd,x=m.t+m.h-d-(this.items[g][i]-e.y1)*e.yScaleEnd,v=m.t+m.h-d-(f-r[t])*e.yScaleCur,y=m.t+m.h-d-(f-e.y1)*e.yScaleEnd,Math.abs(x-y)<1?this.items[g]={numLeft:M,strLeft:b,numRight:T,strRight:_,y:y}:(c=!0,this.uuid++,(o={animated:!0,strLeft:this.items[g].strLeft,strRight:this.items[g].strRight,oProp:"oyt_"+this.uuid,yProp:"yyt_"+this.uuid,state:{id:"t_"+this.uuid}}).state[o.oProp]=1,o.state[o.yProp]=u,this.items[o.state.id]=o,l.add([{prop:o.oProp,state:o.state,end:0,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:o.yProp,state:o.state,end:x,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:this.deleteItem}]),delete this.items[g],this.uuid++,(o={animated:!0,strLeft:b,strRight:_,oProp:"oy_"+g,yProp:"yy_"+g,state:{id:g,numLeft:M,strLeft:b,numRight:T,strRight:_}}).state[o.oProp]=0,o.state[o.yProp]=v,this.items[o.state.id]=o,l.add([{prop:o.oProp,state:o.state,end:1,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:o.yProp,state:o.state,end:y,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:function(t){this.items[t.id]={numLeft:t.numLeft,strLeft:t.strLeft,numRight:t.numRight,strRight:t.strRight,y:t["yy_"+t.id]},clearTimeout(this.animationEndTimeout),this.animationEndTimeout=setTimeout(function(){this.animationInProgress=!1}.bind(this),30)}.bind(this)}]))):this.items[g]&&this.items[g].animated?(this.items[g].numLeft=M,this.items[g].strLeft=b,this.items[g].numRight=T,this.items[g].strRight=_,this.items[g].state.numLeft=M,this.items[g].state.strLeft=b,this.items[g].state.numRight=T,this.items[g].state.strRight=_):this.items[g]={numLeft:M,strLeft:b,numRight:T,strRight:_,y:m.t+m.h-d-(f-e.y1)*e.yScaleEnd}}e.needAnimation&&!c&&(this.animationInProgress=!1),this.forceUpdate=!1},renderState:function(t){var s,i,e,a,h=this.opts.settings.dpi,o=this.opts.state.dims.axisYLeft,n=this.opts.state.dims.axisYRight,r=this.opts.state.dims.axisYLines,d=this.opts.data.ys;for(s in this.ctx.font=11*h+"px "+this.opts.settings.FONTS,this.ctx.strokeStyle=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)",this.ctx.lineWidth=+h,this.ctx.lineCap="square",this.ctx.lineJoin="square",this.items)i=(a=this.items[s]).animated?(e=a.state[a.yProp],a.state[a.oProp]):(e=a.y,1),0<=e-6&&e-16<=o.h&&(this.ctx.globalAlpha=i*(this.opts.pairY?this.opts.state.o_0:1)*t,this.ctx.textAlign="left",this.opts.pairY?this.ctx.fillStyle=(this.isDarkMode?d[0].colors_n:d[0].colors_d)[1]:this.ctx.fillStyle=(this.isDarkMode?this.opts.data.axis_n:this.opts.data.axis_d).y,this.ctx.fillText(a.strLeft,o.l*h,(e-7)*h),this.opts.pairY)&&(this.ctx.globalAlpha=i*this.opts.state.o_1*t,this.ctx.textAlign="right",this.ctx.fillStyle=(this.isDarkMode?d[1].colors_n:d[1].colors_d)[1],this.ctx.fillText(a.strRight,(n.l+n.w)*h,(e-7)*h)),0<=(e=(e<<0)-.5)&&e<=o.h&&(this.ctx.beginPath(),this.ctx.globalAlpha=i*t,this.ctx.moveTo(r.l*h,e*h),this.ctx.lineTo((r.l+r.w)*h,e*h),this.ctx.stroke());this.ctx.globalAlpha=1}},w.TAxisY=t})(),(()=>{function t(t){this.opts=t,this.filteredX1=[],this.filteredX2=[],this.filteredJ=[],this.prevY=[],this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!1})}var q=window.Graph.units;t.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached=""},setDarkMode:function(t){this.isDarkMode=t},render:function(){var t,s,i,e=this.opts,a=e.data.ys,h=e.state,o=e.additional.mini,n=o?h.xg1:h.x1,z=o?h.xg2:h.x2,r=e.settings,F=(this.w,this.h,r["PADD"+(o?"_MINI_BAR":"")][0]),Y=r["PADD"+(o?"_MINI_BAR":"")][1],d=r["PADD"+(o?"_MINI_BAR":"")][2],r=r["PADD"+(o?"_MINI_BAR":"")][3],l=e.data.x,p=e.settings.dpi,c=this.ctx,m=o?h.dims.mini:h.dims.graph,g=h.zoomMode,u=h.detailInd1,x=h.detailInd2,v=null==h.zoomMorph?0:h.zoomMorph,y=this.filteredX1,X=this.filteredX2,N=this.filteredJ,f=this.prevY,H=a.length,M=[m.w,m.h,o?h.xg1:h.x1,o?h.xg2:h.x2,this.isDarkMode,g];for(o||(M.push(h.y1),M.push(h.y2)),C=0;C<H;C++)M.push(o?h["om_"+C]:h["o_"+C]),M.push(h["f_"+C]);if((M=M.join(","))!=this.cached||(this.opts.ctx.drawImage(this.$canvas,m.l*p,m.t*p),!o)){t=(m.w-Y-r)/(z-n+this.opts.data.mainPeriodLen*(1-v)),s=Math.floor(q.TUtils.getXIndex(l,n-r/t)),i=Math.ceil(q.TUtils.getXIndex(l,z+Y/t)),g&&1==v&&(s<this.opts.state.xg1Ind&&(s=this.opts.state.xg1Ind),i>this.opts.state.xg2Ind)&&(i=this.opts.state.xg2Ind-1);var T=r*p-n*(t*=p),_=(m.h-d)*p,b=this.opts.data.mainPeriodLen*t,U=this.opts.data.detailPeriodLen*t;if(M!=this.cached){c.fillStyle=this.isDarkMode?"#242f3e":"#fff",c.fillRect(0,0,m.w*p,m.h*p);for(var w,S=0,D=s;D<=i;D++){w=g&&u<=D&&D<=x?U:b;var B=Math.round(l[D]*t+T),G=Math.round(l[D]*t+T+w);0<G-B&&(y[S]=B,X[S]=G,N[S]=D,f[S]=0,S++)}for(C=0;C<H;C++)if(0<(R=o?h["om_"+C]:h["o_"+C])){var $=a[C].y,I=a[C].yFrom,L=o?h.y1m:h.y1,O=o?h.y2m:h.y2,A=p*(m.h-F-d)/(O-L),W=(m.h-d)*p+L*A,j=R*A;if(c.fillStyle=(this.isDarkMode?a[C].colors_n:a[C].colors_d)[0],c.globalAlpha=.9*h["f_"+C]+.1,c.beginPath(),c.moveTo(Math.round(l[i]*t+T+(1==v?U:b)),Math.round(_)),0<C)for(D=S-1;0<=D;D--){var V=_-f[D];c.lineTo(X[D],Math.round(V)),c.lineTo(y[D],Math.round(V))}else c.lineTo(Math.round(l[s]*t+T),Math.round(_));for(D=0;D<S;D++){var E,P=N[D],V=W-(E=(E=g?u<=P&&P<=x?I[P]+v*($[P]-I[P]):$[P]+v*($[u]-$[P]):$[P])||0)*j;f[D]+=_-V,c.lineTo(y[D],Math.round(_-f[D])),c.lineTo(X[D],Math.round(_-f[D]))}c.closePath(),c.fill()}c.globalAlpha=1,this.opts.ctx.drawImage(this.$canvas,m.l*p,m.t*p)}if(-1<h.barInd&&!o){this.opts.ctx.fillStyle=this.isDarkMode?"rgba(36, 47, 62, 0.5)":"rgba(255, 255, 255, 0.5)",this.opts.ctx.globalAlpha=h.barO,this.opts.ctx.fillRect(0,0,m.w*p,m.h*p);for(var Z,R,k=0,C=0;C<H;C++)0<(R=h["o_"+C])&&($=a[C].y,I=a[C].yFrom,L=h.y1,O=h.y2,A=p*(m.h-F-d)/(O-L),W=(m.h-d)*p+L*A,j=R*A,this.opts.ctx.fillStyle=(this.isDarkMode?a[C].colors_n:a[C].colors_d)[0],this.opts.ctx.globalAlpha=.9*h["f_"+C]+.1,g?h.barInd>=u&&h.barInd<=x?(E=I[h.barInd]+v*($[h.barInd]-I[h.barInd]),w=U):(w=b,E=$[h.barInd]+v*($[u]-$[h.barInd])):(E=$[h.barInd],w=b),Z=_-(W-(E=E||0)*j)+k,this.opts.ctx.fillRect(Math.round(l[h.barInd]*t+T),Math.round(_-k+m.t*p),Math.max(Math.round(w),1),Math.round(k)-Math.round(Z)),k=Z);c.globalAlpha=1}this.cached=M}}},q.TBars=t})(),(()=>{function t(l){this.state={},this.state.masterVisibility=1,this.state.slaveVisibility=0,this.specialZoomTransition=void 0,this.darkMode=!!document.documentElement.classList.contains("dark");var t=(!!window.ActiveXObject&&+/msie\s(\d+)/i.exec(navigator.userAgent)[1]||NaN)<11,s=-1!=navigator.userAgent.indexOf("Trident/")&&(-1!=navigator.userAgent.indexOf("rv:")||-1!=navigator.appName.indexOf("Netscape")),i=l.data.xRangeFormatter==statsFormatEmpty,t=(this.settings={isIE:t||s,isEdge:/Edge\/\d./i.test(navigator.userAgent),dpi:Math.min(window.devicePixelRatio||1,2),Y_AXIS_RANGE:5.3,PADD:[20,16,20,16],PADD_MINI:[2,0,2,0],PADD_MINI_BAR:[0,0,0,0],PADD_MINI_AREA:[0,0,0,0],Y_LABELS_WIDTH:50,X_LABELS_HEIGHT:12,DATES_HEIGHT:i?0:18,DATES_WIDTH:300,MINI_GRAPH_HEIGHT:40,MINI_GRAPH_TOP:14,MINI_GRAPH_BOTTOM:2,FADE_HEIGHT:16,PIE_RADIUS:130,FONTS:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif'},this.data={caption:l.data.title,detailsFunc:l.data.x_on_zoom,hasDetail:!!l.data.x_on_zoom,slave:l.slave,yTickFormatter:l.data.yTickFormatter,yTooltipFormatter:l.data.yTooltipFormatter,yCustomTooltipFormatters:l.data.yCustomTooltipFormatters,yMinStep:l.data.yMinStep,xTickFormatter:l.data.xTickFormatter,xTooltipFormatter:l.data.xTooltipFormatter,xRangeFormatter:l.data.xRangeFormatter,strokeWidth:l.data.strokeWidth||"auto",hidden:l.data.hidden||[],tooltipOnHover:!!l.data.tooltipOnHover,forceLegend:l.data.forceLegend,sideLegend:l.data.sideLegend||!1,pieZoomRange:l.data.pieZoomRange||6048e5,pieLabelsPercentages:{outboard:l.data.pieLabelsPercentages&&null!=l.data.pieLabelsPercentages.outboard?l.data.pieLabelsPercentages.outboard:5,hoverOnly:l.data.pieLabelsPercentages&&null!=l.data.pieLabelsPercentages.hoverOnly?l.data.pieLabelsPercentages.hoverOnly:2},tooltipSort:l.data.tooltipSort,subchart:{show:!l.data.subchart||null==l.data.subchart.show||l.data.subchart.show,defaultZoom:l.data.subchart&&l.data.subchart.defaultZoom}},l.data.y_scaled&&(this.pairY=!0),this.graphStyle="line",this.settings);l.data.columns.forEach(function(t,s){var i,e,a,h,o,n,r=t.shift(),d=l.data.types[r];"x"===d&&(this.data.x=t,this.state.xCount=t.length,this.state.x1=t[.75*t.length<<0],this.state.x2=t[t.length-1],this.state.xg1=t[0],this.state.xg2=t[t.length-1],this.state.xg1Ind=0,this.state.xg2Ind=t.length-1,this.state.xMainMin=t[0],this.state.xMainMax=t[this.state.xg2Ind],this.state.xgMin=t[0],this.state.xgMax=t[this.state.xg2Ind],n=this.getDefaultZoom({x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,default:this.data.subchart.defaultZoom}),this.state.x1=n.x1,this.state.x2=n.x2,this.data.mainPeriodLen=this.data.x[1]-this.data.x[0],this.data.detailPeriodLen=this.data.mainPeriodLen,this.data.dates=[],this.data.datesShort=[],this.data.datesRange=[],i=A.TUtils.getFormatter("xTooltipFormatter",this.data,0),e=A.TUtils.getFormatter("xTickFormatter",this.data,0),a=A.TUtils.getFormatter("xRangeFormatter",this.data,0),h=0,t.forEach(function(t,s){this.data.dates[s]=i(t,!1),this.data.datesShort[s]=e(t,!1),this.data.datesRange[s]=a(t,!1),this.data.datesShort[s].length>h&&(h=this.data.datesShort[s].length)}.bind(this)),this.data.maxXTickLength=h),"x"!==d&&(this.data.ys=this.data.ys||[],this.data.yIds=this.data.yIds||{},n=l.data.colors[r],o=l.data.yCustomTooltipFormatters?l.data.yCustomTooltipFormatters[r]:null,this.data.ys.push({colors_d:[n,n,n],colors_n:[n,n,n],label:l.data.names[r],y:t,ctf:o,tp:d,id:r}),"line"==d||"step"==d?(this.data.axis_d={x:"#8E8E93",y:"#8E8E93"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(163,177,194,0.6)"}):(this.data.axis_d={x:"rgba(37,37,41,0.5)",y:"rgba(37,37,41,0.5)"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(236,242,248,0.5)"}),n=this.data.ys.length-1,t=-1==this.data.hidden.indexOf(r),this.data.yIds[r]=n,this.state["e_"+n]=t,this.state["o_"+n]=t?1:0,this.state["om_"+n]=t?1:0,this.state["pieInd_"+n]=0,this.state["f_"+n]=1,this.graphStyle=d)}.bind(this)),A.TUtils.triggerEvent("chart-update-zoom",{x1:this.state.x1,x2:this.state.x2,target:l.container.parentElement}),this.state.activeColumnsCount=this.data.ys.length,this.updateSpeed(),"area"==this.graphStyle&&(t.Y_AXIS_RANGE=4.06,this.data.hasDetail=!0),(s=this.reduceGlobalRange({})).isReduced&&(this.state.x1=s.x1,this.state.x2=s.x2,this.state.xg1=s.xg1,this.state.xg2=s.xg2,this.state.xg1Ind=s.xg1Ind,this.state.xg2Ind=s.xg2Ind),this.onResize=this.onResize.bind(this),this.onSwitcherChange=this.onSwitcherChange.bind(this),this.onSwitcherEnter=this.onSwitcherEnter.bind(this),this.onSwitcherLeave=this.onSwitcherLeave.bind(this),this.onHandleMove=this.onHandleMove.bind(this),this.toggleZoom=this.toggleZoom.bind(this),this.createDOM(l.container),window.addEventListener("resize",this.onResize),document.addEventListener("darkmode",function(t){this.setDarkMode(!this.darkMode)}.bind(this),!1),document.addEventListener("chart-hide-tips",function(t){t.detail.except!=this&&this.tip.toggle(!1)}.bind(this),!1),this.opts=l,this.onResize(),this.darkMode&&this.setDarkMode(this.darkMode),window.matchMedia("(-webkit-min-device-pixel-ratio: 1), (min-resolution: 96dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi)").addListener(this.onResize)}var A=window.Graph.units;t.prototype={reduceGlobalRange:function(a){var t,s=(null==a.x1?this.state:a).x1,e=(null==a.x2?this.state:a).x2,h=(null==a.xg1?this.state:a).xg1,o=(null==a.xg2?this.state:a).xg2,n=(a.useSaved?this.data.saved:this.data).x,r=Math.floor(A.TUtils.getXIndex(n,this.state.xgMin)),d=Math.ceil(A.TUtils.getXIndex(n,this.state.xgMax)),l=d,p=r,c=this.state.zoomMode?"bar"==this.graphStyle||"step"==this.graphStyle?1:2:0;return"area"==this.graphStyle&&(c=0),this.data.ys.forEach(function(t,s){var e=a.useSaved?this.data.saved.y[s]:t.y;if(this.state["e_"+s])for(i=r;i<=d-c;i++)null!=(v=e[i])&&(l=Math.min(l,i),p=Math.max(p,i))}.bind(this)),(p=p+c==d?d-Math.max(c-1,0):p)<=l||(t=n[l],n=n[p],h==t&&o==n)?{isReduced:!1}:(n<e?(s=n-(e-s),e=n,s<t&&(s=t)):s<t&&(e=t+(e-s),s=t,n<e)&&(e=n),{isReduced:!0,x1:s,x2:e,xg1:t,xg2:n,xg1Ind:l,xg2Ind:p})},getDefaultZoom:function(t){var s;return t.default?((s={}).x1=t.default[0],s.x2=t.default[1],s.x1=Math.max(s.x1,t.xg1),s.x2=Math.min(s.x2,t.xg2),s.x2<=s.x1&&(s.x1=t.xg1,s.x2=t.xg2),s):{x1:t.x1,x2:t.x2}},updateSpeed:function(t){var s=this.state.activeColumnsCount*this.state.xCount*Math.pow((this.state.x2-this.state.x1)/(this.state.xMainMax-this.state.xMainMin),.5),s=this.state.deviceSpeed*s/16.66<<0,s=Math.max(1-.25*s,0),s=Math.pow(s,.85);return null==this.state.deviceSpeed&&(t=1),this.state.speed=null==(t=1)?s:t,this.state.speed},getYMinMax:function(t,s,h,o,a){if("area"==this.graphStyle)return{min:0,max:102};var n,r,i=this.state.dims?this.state.dims.graph.w:this.getGraphWidth(this.data.sideLegend).width,d=Number.MAX_VALUE,l=-Number.MAX_VALUE,i=(s-t)/i,p=A.TUtils.getXIndex((a?this.data.saved:this.data).x,t-i*this.settings.PADD[3]),c=A.TUtils.getXIndex((a?this.data.saved:this.data).x,s+i*this.settings.PADD[1]),m=this.data.yMinStep||1,g=[],u=[],x=this.settings,v=this.state,c=!a&&this.state.zoomMode?(p=Math.max(p,this.state.detailInd1),Math.min(c,this.state.detailInd2)):(p=Math.max(p,0),Math.min(c,this.data.x.length-1)),y=Math.floor(p),f=Math.ceil(p),M=Math.floor(c),T=Math.ceil(c);if("line"!=this.graphStyle&&"step"!=this.graphStyle||this.data.ys.forEach(function(t,s){var i=a?this.data.saved.y[s]:t.y,t="step"==this.graphStyle?y:f,e="step"==this.graphStyle?T:M;if(v["e_"+s]||0==s&&this.pairY){for(w=t;w<=e;w++)void 0!==(n=i[w])&&(n<d&&(d=n),l<n)&&(l=n);"line"==this.graphStyle&&(void 0!==i[y]&&void 0!==i[f]&&((r=i[y]+(p-y)*(i[f]-i[y]))<d&&(d=r),l<r)&&(l=r),void 0!==i[M])&&void 0!==i[T]&&((r=i[M]+(c-M)*(i[T]-i[M]))<d&&(d=r),l<r)&&(l=r)}this.pairY&&(t=S(d,l,s,void 0),g[s]=t.min,u[s]=t.max,d=Number.MAX_VALUE,l=-Number.MAX_VALUE)}.bind(this)),"bar"==this.graphStyle){for(var e=[],_=0;_<this.data.ys.length;_++)v["e_"+_]&&e.push(_);for(var b=e.length,w=y;w<=T;w++){for(_=yCur=0;_<b;_++)yCur+=(a?this.data.saved.y[e[_]]:this.data.ys[e[_]].y)[w]||0;yCur>l&&(l=yCur)}d=0}return this.pairY?(isNaN(g[0])&&(g[0]=g[1]),isNaN(g[1])&&(g[1]=g[0]),isNaN(u[0])&&(u[0]=u[1]),isNaN(u[1])&&(u[1]=u[0]),{min:g,max:u}):{min:(t=S(d,l)).min,max:t.max};function S(t,s,i,e){var a;return t==Number.MAX_VALUE?s=h?null==i?(t=v.y1m,v.y2m):(t=v["y1m_"+i],v["y2m_"+i]):null==i?(t=v.y1,v.y2):(t=v["y1_"+i],v["y2_"+i]):("bar"==this.graphStyle&&(t=0),t=Math.floor(t),s=Math.ceil(s),o&&(t=(a=A.TUtils.roundRange(t,s,x.Y_AXIS_RANGE,e)).yMin,s=a.yMax,Math.abs(t-s)<x.Y_AXIS_RANGE*m)&&(s=t+Math.floor(x.Y_AXIS_RANGE*m))),Math.abs(t-s)<.1&&s++,{min:t,max:s,range:a}}},setDarkMode:function(t){this.darkMode=t,this.graph.setDarkMode(t),this.axisY.setDarkMode(t),this.fade.setDarkMode(t),this.axisX.setDarkMode(t),this.mini.setDarkMode(t),this.handle.setDarkMode(t),this.tip.setDarkMode(t),this.switchers.setDarkMode(t),this.composer.setDarkMode(t)},getGraphWidth:function(t){var s=this.$el.getBoundingClientRect();return t?(t=this.$switchers.getBoundingClientRect(),500<=s.width-t.width?{hasSpaceForLegend:!0,width:Math.max(s.width-t.width,1)}:{hasSpaceForLegend:!1,width:s.width}):{width:s.width}},onResize:function(){var t,s,i=Math.min(window.devicePixelRatio||1,2);this.ww==window.innerWidth&&i==this.settings.dpi||(this.settings.dpi=i,this.ww=window.innerWidth,this.data.sideLegend&&(this.$switchers.classList.remove("tchart--switchers__no-space"),(i=this.getGraphWidth(!0)).hasSpaceForLegend||this.$switchers.classList.add("tchart--switchers__no-space"),this.$graph.style.width=i.width+"px"),i=this.$graph.getBoundingClientRect(),t=this.settings,s=i.height-t.DATES_HEIGHT-t.MINI_GRAPH_HEIGHT-t.MINI_GRAPH_TOP-t.MINI_GRAPH_BOTTOM,this.state.dims={composer:{w:i.width,h:i.height,l:0,t:0},graph:{w:i.width,h:s,l:0,t:t.DATES_HEIGHT},axisYLeft:{w:t.Y_LABELS_WIDTH,h:s,l:t.PADD[3],t:t.DATES_HEIGHT},axisYRight:{w:t.Y_LABELS_WIDTH,h:s,l:i.width-t.PADD[1]-t.Y_LABELS_WIDTH,t:t.DATES_HEIGHT},axisYLines:{w:i.width-t.PADD[1]-t.PADD[3],h:s,l:t.PADD[3],t:t.DATES_HEIGHT},fadeTop:{w:i.width,h:t.FADE_HEIGHT,l:0,t:t.DATES_HEIGHT},fadeBottom:{w:i.width,h:t.FADE_HEIGHT,l:0,t:t.DATES_HEIGHT+s-t.FADE_HEIGHT},axisX:{w:i.width,h:t.X_LABELS_HEIGHT,l:0,t:t.DATES_HEIGHT+s-t.X_LABELS_HEIGHT},dates:{w:t.DATES_WIDTH,h:t.DATES_HEIGHT,l:i.width-t.DATES_WIDTH-t.PADD[1],t:0},mini:{w:i.width-t.PADD[1]-t.PADD[3],h:t.MINI_GRAPH_HEIGHT,l:t.PADD[3],t:t.DATES_HEIGHT+s+t.MINI_GRAPH_TOP},handle:{w:i.width-t.PADD[1]-t.PADD[3],h:t.MINI_GRAPH_HEIGHT+2,l:t.PADD[3],t:t.DATES_HEIGHT+s+t.MINI_GRAPH_TOP-1},tip:{w:i.width,h:s,l:0,t:t.DATES_HEIGHT}},this.graph.onResize(),this.axisY.onResize(),this.fade.onResize(),this.axisX.onResize(),this.mini.onResize(),this.handle.onResize(),this.tip.onResize(),this.composer.onResize())},createDOM:function(t){var s,i,e,a=this.settings,h=(this.$el=document.createElement("div"),this.$el.className="tchart",this.data.subchart.show||this.$el.classList.add("tchart__no-subchart"),this.data.slave&&this.$el.classList.add("tchart__slave"),this.$h1=document.createElement("h1"),this.$h1.className="tchart--header",this.$h1.textContent=this.data.caption,this.$el.appendChild(this.$h1),this.$zoom=document.createElement("div"),this.$zoom.className="tchart--zoom",this.$el.appendChild(this.$zoom),document.createElement("div")),h=(this.$zoom.appendChild(h),document.createElement("span"));if(h.textContent="Zoom Out",this.$zoom.appendChild(h),this.$zoom.addEventListener("click",function(){this.toggleZoom(!1)}.bind(this)),this.$graph=document.createElement("div"),this.$graph.className="tchart--graph",this.$el.appendChild(this.$graph),this.$switchers=document.createElement("div"),this.$switchers.className="tchart--switchers",this.data.sideLegend&&this.$switchers.classList.add("tchart--switchers__side-legend"),this.$el.appendChild(this.$switchers),t.appendChild(this.$el),s=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),i=this.getYMinMax(this.state.xg1,this.state.xg2,!0),this.pairY)for(e=0;e<this.data.ys.length;e++)this.state["y1_"+e]=s.min[e],this.state["y2_"+e]=s.max[e],this.state["y1m_"+e]=i.min[e],this.state["y2m_"+e]=i.max[e];else this.state.y1=s.min,this.state.y2=s.max,this.state.y1m=i.min,this.state.y2m=i.max;this.composer=new A.TComposer({$parent:this.$graph,settings:a,chart:this,state:this.state,data:this.data,graphStyle:this.graphStyle}),this.animator=new A.TAnimator({state:this.state,composer:this.composer});h={line:"TLines",step:"TLines",bar:"TBars",area:"TAreas"};[["graph",h[this.graphStyle],this.$graph],["axisX","TAxisX",this.$graph],["fade","TFade",this.$graph],["axisY","TAxisY",this.$graph],["tip","TTip",this.$graph,{onClick:this.toggleZoom}],["mini",h[this.graphStyle],this.$graph,{mini:!0}],["handle","THandle",this.$graph,{cb:this.onHandleMove}],["switchers","TSwitchers",this.$switchers,{onClick:this.onSwitcherChange,onLongTap:this.onSwitcherChange,onEnter:this.onSwitcherEnter,onLeave:this.onSwitcherLeave}]].forEach(function(t){this[t[0]]=new A[t[1]]({animator:this.animator,$canvas:this.composer.$canvas,ctx:this.composer.ctx,graphStyle:this.graphStyle,chart:this,pairY:this.pairY,state:this.state,data:this.data,$parent:t[2],settings:a,additional:t[3]||{}}),this[t[0]].id=t[0]}.bind(this))},onHandleMove:function(t,s,e,a){this.state.zoomMode;this.updateSpeed(),A.TUtils.triggerEvent("chart-update-zoom",{x1:t,x2:s,target:this.opts.container.parentElement});var h=[],o=this.getYMinMax(t,s,!1,!0);for(this.axisX.setAnimation("both"!=e),this.axisY.setAnimation(!0),this.axisY.setForceUpdate(!1),a&&A.TUtils.triggerEvent("chart-hide-tips",{except:null}),h.push({prop:"x1",state:this.state,end:t,fixed:!0,duration:0,group:{top:!0,bottom:!0}}),h.push({prop:"x2",state:this.state,end:s,fixed:!0,duration:0,group:{top:!0,bottom:!0}}),i=0;i<this.data.ys.length;i++)"line"!=this.graphStyle&&"step"!=this.graphStyle||h.push({prop:this.pairY?"y1_"+i:"y1",state:this.state,end:this.pairY?o.min[i]:o.min,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}}),"area"!=this.graphStyle&&h.push({prop:this.pairY?"y2_"+i:"y2",state:this.state,end:this.pairY?o.max[i]:o.max,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}});this.animator.add(h)},onSwitcherEnter:function(t){clearTimeout(this.switcherLeaveTimeout);var s=[];for(i=0;i<this.data.ys.length;i++)s.push({prop:"f_"+i,state:this.state,end:t==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),s.push({prop:"pieInd_"+i,state:this.state,end:t==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(s)},onSwitcherLeave:function(t){clearTimeout(this.switcherLeaveTimeout),this.switcherLeaveTimeout=setTimeout(function(){var t=[];for(i=0;i<this.data.ys.length;i++)t.push({prop:"f_"+i,state:this.state,end:1,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),t.push({prop:"pieInd_"+i,state:this.state,end:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(t)}.bind(this),300)},onSwitcherChange:function(t,s){var i,e,a,h,o=[],n=[],r=[];if(this.updateSpeed(),"boolean"!=typeof t)for(s=t,h=a=!0,l=0;l<this.data.ys.length;l++)h=h&&(l==s?this.state["e_"+l]:!this.state["e_"+l]);for(var d=0,l=0;l<this.data.ys.length;l++)e=l==s,r[l]=this.state["e_"+l],a?this.state["e_"+l]=e:e&&(this.state["e_"+l]=!!t),h&&a&&(this.state["e_"+l]=!0),n[l]=this.state["e_"+l],n[l]&&(d=Math.max(d,this.data.ys[l].y.length));var p=this.reduceGlobalRange({}),c=p.isReduced?(o.push({prop:"x1",state:this.state,end:p.x1,duration:333,group:{top:!0,bottom:!0}}),o.push({prop:"x2",state:this.state,end:p.x2,duration:333,group:{top:!0,bottom:!0}}),o.push({prop:"xg1",state:this.state,end:p.xg1,duration:333,group:{top:!0,bottom:!0}}),o.push({prop:"xg2",state:this.state,end:p.xg2,duration:333,group:{top:!0,bottom:!0}}),this.state.xg1Ind=p.xg1Ind,this.state.xg2Ind=p.xg2Ind,i=this.getYMinMax(p.x1,p.x2,!1,!0),this.getYMinMax(p.xg1,p.xg2,!0)):(i=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),this.getYMinMax(this.state.xg1,this.state.xg2,!0));for(A.TUtils.triggerEvent("chart-hide-tips",{except:null}),this.axisY.setForceUpdate(!0),this.axisY.setAnimation(!0),l=this.state.activeColumnsCount=0;l<n.length;l++)n[l]&&this.state.activeColumnsCount++,r[l]!=n[l]&&(o.push({prop:"o_"+l,state:this.state,end:n[l]?1:0,duration:300,group:{top:!0}}),o.push({prop:"om_"+l,state:this.state,end:n[l]?1:0,duration:"line"==this.graphStyle||"step"==this.graphStyle?166:300,delay:n[l]&&"line"==this.graphStyle||"step"==this.graphStyle?200:0,tween:"linear",group:{bottom:!0}}));for(l=0;l<(this.pairY?n.length:1);l++)"line"!=this.graphStyle&&"step"!=this.graphStyle||o.push({prop:this.pairY?"y1_"+l:"y1",state:this.state,end:this.pairY?i.min[l]:i.min,duration:this.pairY?0:333,group:{top:!0}}),"area"!=this.graphStyle&&o.push({prop:this.pairY?"y2_"+l:"y2",state:this.state,end:this.pairY?i.max[l]:i.max,duration:this.pairY?0:333,group:{top:!0}}),"line"!=this.graphStyle&&"step"!=this.graphStyle||o.push({prop:this.pairY?"y1m_"+l:"y1m",state:this.state,end:this.pairY?c.min[l]:c.min,duration:this.pairY?0:316,group:{bottom:!0}}),"area"!=this.graphStyle&&o.push({prop:this.pairY?"y2m_"+l:"y2m",state:this.state,end:this.pairY?c.max[l]:c.max,duration:this.pairY?0:316,group:{bottom:!0}});this.state.y1m_hidd=this.state.y1m,this.state.y2m_hidd=this.state.y2m,this.state.y1m_show=c.min,this.state.y2m_show=c.max,this.switchers.render(n),this.animator.add(o)},toggleSlave:function(t,s,i,e){var a=[];if(this.updateSpeed(e),this.state.zoomModeSlave!=t){if(this.state.zoomSpecialOrigin=s,t){this.state.zoomModeSlave=!0,this.switchers.switchers.forEach(function(t,s){t.classList.add("tchart--switcher__visible"),t.getElementsByTagName("span")[0].textContent=i.names[s]}),this.tip.labels.forEach(function(t,s){t.$label.textContent=i.names[s]}),this.data.x=i.x;for(var h=[],o=0;o<i.y.length;o++){this.data.ys[o].y=i.y[o];var n=-1==i.hidden.indexOf(this.data.ys[o].id);this.state["e_"+o]=n,this.state["o_"+o]=n?1:0,this.state["om_"+o]=n?1:0,h[o]=n}this.switchers.render(h);for(var e=this.data.x[0],s=this.data.x[this.data.x.length-1],r=(this.data.dates=[],this.data.datesShort=[],this.data.datesRange=[],A.TUtils.getFormatter("xTooltipFormatter",this.data,1)),d=A.TUtils.getFormatter("xTickFormatter",this.data,1),l=A.TUtils.getFormatter("xRangeFormatter",this.data,1),p=0,o=0;o<this.data.x.length;o++)this.data.dates[o]=r(this.data.x[o],!0),this.data.datesShort[o]=d(this.data.x[o],!0),this.data.datesRange[o]=l(this.data.x[o],!0),this.data.datesShort[o].length>p&&(p=this.data.datesShort[o].length);this.data.maxXTickLength=p,this.data.subchart=i.subchart,this.data.hidden=i.hidden;var c=this.getDefaultZoom({x1:e,x2:s,xg1:e,xg2:s,default:this.data.subchart.defaultZoom}),c=(this.state.x1=c.x1,this.state.x2=c.x2,this.state.xCount=this.data.x.length,this.state.xg1=e,this.state.xg2=s,this.state.xg1Ind=0,this.state.xg2Ind=this.data.x.length-1,this.state.xMainMin=e,this.state.xMainMax=s,this.state.xgMin=e,this.state.xgMax=s,this.reduceGlobalRange({})),c=(c.isReduced&&(this.state.x1=c.x1,this.state.x2=c.x2,this.state.xg1=c.xg1,this.state.xg2=c.xg2,this.state.xg1Ind=c.xg1Ind,this.state.xg2Ind=c.xg2Ind),this.getYMinMax(this.state.x1,this.state.x2,!1,!0)),e=this.getYMinMax(e,s,!0);this.state.y1=c.min,this.state.y2=c.max,this.state.y1m=e.min,this.state.y2m=e.max}else this.switchers.switchers.forEach(function(t,s){t.classList.remove("tchart--switcher__visible")});setTimeout(function(){t||(this.state.zoomModeSlave=!1)}.bind(this),470),this.state.slaveVisibility=t?0:1,a.push({prop:"slaveVisibility",state:this.state,end:t?1:0,duration:450,group:{top:!0,bottom:!0}}),this.animator.add(a)}},toggleZoomSpecial:function(t,s,i){var e,a,h,o=[];this.state.zoomModeSpecial!=t&&(e=this.updateSpeed(),t?(h=(this.state.x2-this.state.x1)/(this.state.dims.graph.w-this.settings.PADD[3]-this.settings.PADD[1]),a=this.settings.PADD[3]*h,h=this.settings.PADD[1]*h,this.state.zoomSpecialOrigin=(s-this.state.x1+a)/(this.state.x2-this.state.x1+a+h),this.state.zoomModeSpecial=!0,this.$h1.classList.add("tchart--header__hidden"),this.$zoom.classList.add("tchart--zoom__visible"),this.switchers.switchers.forEach(function(t,s){t.classList.remove("tchart--switcher__visible")}),this.slaveChart.toggleSlave(!0,this.state.zoomSpecialOrigin,i,e)):(this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.switchers.switchers.forEach(function(t,s){t.classList.add("tchart--switcher__visible")}),this.slaveChart.toggleSlave(!1,this.state.zoomSpecialOrigin,null,e)),document.body.style.pointerEvents="none",setTimeout(function(){t||(this.state.zoomModeSpecial=!1),document.body.style.pointerEvents=""}.bind(this),470),this.state.masterVisibility=t?1:0,o.push({prop:"masterVisibility",state:this.state,end:t?0:1,duration:450,group:{top:!0,bottom:!0}}),this.animator.add(o))},toggleZoom:function(t,s,h){if(h&&null==this.specialZoomTransition&&(h.columns.length!=this.data.ys.length+1&&(this.specialZoomTransition=!0),this.specialZoomTransition||h.columns.forEach(function(t,s){var i,t=t[0],e=h.types[t],a=h.names[t];null!=(s=this.data.yIds[t])?(i=this.data.ys[s].tp,s=this.data.ys[s].label,i==e&&s==a||(this.specialZoomTransition=!0)):"x"!==t&&(this.specialZoomTransition=!0)}.bind(this)),null==this.specialZoomTransition)&&(this.specialZoomTransition=!1),this.specialZoomTransition&&(this.data.master=!0,this.$el.classList.add("tchart__master"),this.slaveChart||((o=JSON.parse(JSON.stringify(h))).yTickFormatter=h.yTickFormatter,o.yTooltipFormatter=h.yTooltipFormatter,o.yCustomTooltipFormatters=h.yCustomTooltipFormatters,o.xTickFormatter=h.xTickFormatter,o.xTooltipFormatter=h.xTooltipFormatter,o.xRangeFormatter=h.xRangeFormatter,o.sideLegend=this.data.sideLegend,o.tooltipSort=(null!=h.tooltipSort?h:this.data).tooltipSort,this.slaveChart=new A.TChart({container:this.opts.container,slave:!0,data:o}),this.slaveChart.setDarkMode(this.darkMode))),h&&!h.details&&(h.details={y:[],names:[]},h.columns.forEach(function(t,s){var i=t.shift(),e=h.types[i],a=h.names[i];"x"===e?h.details.x=t:this.specialZoomTransition?(h.details.y.push(t),h.details.names.push(a)):h.details.y[this.data.yIds[i]]=t}.bind(this))),h&&(h.subchart={show:!h.subchart||null==h.subchart.show||h.subchart.show,defaultZoom:h.subchart&&h.subchart.defaultZoom},h.details.subchart=h.subchart,h.details.hidden=h.hidden||[]),this.specialZoomTransition)this.toggleZoomSpecial(t,s,h&&h.details);else{var i,e,a,o=h&&h.details,n=[];if(this.state.zoomMode!=t){if(t){if(this.state.zoomMode=!0,this.state.zoomDir=1,this.$h1.classList.add("tchart--header__hidden"),this.$zoom.classList.add("tchart--zoom__visible"),this.zoomEnterSpeed=this.updateSpeed(),h&&(this.data.details={yTickFormatter:h.yTickFormatter,yTooltipFormatter:h.yTooltipFormatter,yCustomTooltipFormatters:h.yCustomTooltipFormatters,xTickFormatter:h.xTickFormatter,xTooltipFormatter:h.xTooltipFormatter,xRangeFormatter:h.xRangeFormatter,subchart:h.subchart,hidden:h.hidden||[]}),!this.hasSavedData){for(this.data.saved={},this.data.saved.x=this.data.x.slice(),this.data.saved.dates=this.data.dates.slice(),this.data.saved.datesShort=this.data.datesShort.slice(),this.data.saved.datesRange=this.data.datesRange.slice(),this.data.saved.y=[],j=0;j<this.data.ys.length;j++)this.data.saved.y[j]=this.data.ys[j].y.slice();this.hasSavedData=!0}this.data.details&&this.data.details.subchart&&(this.data.details.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart")),this.state.zoomSaved={x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,xgMin:this.state.xgMin,xgMax:this.state.xgMax};var r,d,l=this.data.mainPeriodLen,p=s,c=s+l;this.data.details&&(p=(s=this.getDefaultZoom({x1:p,x2:c,xg1:o.x[0],xg2:o.x[o.x.length-1],default:this.data.details.subchart.defaultZoom})).x1,c=s.x2),"area"!=this.graphStyle?(this.data.detailPeriodLen=o.x[1]-o.x[0],r=o.x[0],d=o.x[o.x.length-1]):(this.data.detailPeriodLen=l,d=(r=p-((s=this.data.pieZoomRange)-l)/2)+s,c=p+Math.round(s/7/l)*l,r<this.data.x[0]?(d=(r=this.data.x[0])+s)>this.data.x[this.data.x.length-1]&&(d=this.data.x[this.data.x.length-1]+l):d>this.data.x[this.data.x.length-1]&&(r=(d=this.data.x[this.data.x.length-1]+l)-s)<this.data.x[0]&&(r=this.data.x[0])),r=Math.round(r/l)*l,d=Math.round(d/l)*l,"area"!=this.graphStyle&&this.insertDetails(r,d,o),this.state.xgMin=r,this.state.xgMax=d}else this.updateSpeed(this.zoomEnterSpeed/("area"==this.graphStyle?2:1)),this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.data.details&&(this.data.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart")),this.state.zoomDir=-1,p=this.state.zoomSaved.x1,c=this.state.zoomSaved.x2,r=this.state.zoomSaved.xg1,d=this.state.zoomSaved.xg2,this.state.xgMin=this.state.zoomSaved.xgMin,this.state.xgMax=this.state.zoomSaved.xgMax;this.axisY.setForceUpdate(!0),this.axisY.setAnimation(!0),this.axisX.setAnimation(!0);var m=450,g=0,s=0,l=("area"==this.graphStyle&&(m=350,t?s=.95*m:g=.95*m),this.reduceGlobalRange({x1:p,x2:c,xg1:r,xg2:d,useSaved:!t}));for(l.isReduced&&(p=l.x1,c=l.x2,r=l.xg1,d=l.xg2),this.state.xg1Ind=Math.floor(A.TUtils.getXIndex((t?this.data:this.data.saved).x,r)),this.state.xg2Ind=Math.ceil(A.TUtils.getXIndex((t?this.data:this.data.saved).x,d)),i=this.getYMinMax(p,c,!1,!0,!t),e=this.getYMinMax(r,d,!0,!1,!t),document.body.style.pointerEvents="none",setTimeout(function(){t||(this.state.zoomMode=!1,"area"!=this.graphStyle&&this.revertDetails()),document.body.style.pointerEvents="",this.composer.render({top:!0,bottom:!0})}.bind(this),m+20+("area"==this.graphStyle?.9*m:0)),this.state.zoomMorph=t?0:1,n.push({prop:"zoomMorph",state:this.state,end:t?1:0,duration:m,delay:s,group:{top:!0,bottom:!0}}),n.push({prop:"x1",state:this.state,end:p,delay:g,duration:m,group:{top:!0,bottom:!0}}),n.push({prop:"x2",state:this.state,end:c,delay:g,duration:m,group:{top:!0,bottom:!0}}),n.push({prop:"xg1",state:this.state,end:r,delay:g,duration:m,group:{top:!0,bottom:!0}}),n.push({prop:"xg2",state:this.state,end:d,delay:g,duration:m,group:{top:!0,bottom:!0}}),a=0;a<(this.pairY?this.data.ys.length:1);a++)"line"!=this.graphStyle&&"step"!=this.graphStyle||n.push({prop:this.pairY?"y1_"+a:"y1",state:this.state,end:this.pairY?i.min[a]:i.min,delay:g,duration:m,group:{top:!0}}),"area"!=this.graphStyle&&n.push({prop:this.pairY?"y2_"+a:"y2",state:this.state,end:this.pairY?i.max[a]:i.max,delay:g,duration:m,group:{top:!0}}),"line"!=this.graphStyle&&"step"!=this.graphStyle||n.push({prop:this.pairY?"y1m_"+a:"y1m",state:this.state,end:this.pairY?e.min[a]:e.min,delay:g,duration:m,group:{bottom:!0}}),"area"!=this.graphStyle&&n.push({prop:this.pairY?"y2m_"+a:"y2m",state:this.state,end:this.pairY?e.max[a]:e.max,delay:g,duration:m,group:{bottom:!0}});this.animator.add(n)}}},insertDetails:function(t,s,i){for(var e,a,h,o,n,t=Math.ceil(A.TUtils.getXIndex(this.data.x,t)),r=Math.ceil(A.TUtils.getXIndex(this.data.x,s)),d=i.x.length-1,l=(s>this.data.x[r]&&r++,t),p=r-("bar"==this.graphStyle||"step"==this.graphStyle?1:0),c=this.data.x.length-1,m=[],g=[],u=[],x=[],v=[],y=[],f=0;f<l;f++)m[e=+f]=this.data.x[f],g[e]=this.data.dates[f],u[e]=this.data.datesShort[f],x[e]=this.data.datesRange[f];for(j=0;j<this.data.ys.length;j++)for(v[j]=v[j]||[],a=v[j],o=this.data.ys[j].y,f=0;f<l;f++)a[+f]=o[f];var M=[],T=[],_=[],b=A.TUtils.getFormatter("xTooltipFormatter",this.data,1),w=A.TUtils.getFormatter("xTickFormatter",this.data,1),S=A.TUtils.getFormatter("xRangeFormatter",this.data,1),D=0;for(f=0;f<=d;f++){m[e=+f+l]=i.x[f],g[e]=b(m[e],!0),u[e]=w(m[e],!0),x[e]=S(m[e],!0),u[e].length>D&&(D=u[e].length);var $=A.TUtils.getXIndex(this.data.x,m[e]);M[f]=$,T[f]=Math.floor($),_[f]=Math.ceil($)}for(this.data.details.maxXTickLength=D,j=0;j<this.data.ys.length;j++)for(v[j]=v[j]||[],a=v[j],o=this.data.ys[j].y,n=i.y[j],y[j]=y[j]||[],h=y[j],f=0;f<=d;f++){I="bar"==this.graphStyle?o[T[f]]||0:"step"==this.graphStyle?o[T[f]]:o[T[f]]+(M[f]-T[f])*(o[_[f]]-o[T[f]]);var I,L=n[f];"bar"!==this.graphStyle&&isNaN(I)&&!isNaN(L)&&(I=0),a[+f+l]=L,h[+f+l]=I}for(f=1+p;f<=c;f++)m[e=f-p+d+l]=this.data.x[f],g[e]=this.data.dates[f],u[e]=this.data.datesShort[f],x[e]=this.data.datesRange[f];for(j=0;j<this.data.ys.length;j++)for(v[j]=v[j]||[],a=v[j],o=this.data.ys[j].y,f=1+p;f<=c;f++)a[f-p+d+l]=o[f];for(this.state.detailInd1=l,this.state.detailInd2=+(l+d),this.data.x=m,this.data.dates=g,this.data.datesShort=u,this.data.datesRange=x,j=0;j<this.data.ys.length;j++)this.data.ys[j].y=v[j],this.data.ys[j].yFrom=y[j]},revertDetails:function(){for(this.data.x=this.data.saved.x,this.data.dates=this.data.saved.dates,this.data.datesShort=this.data.saved.datesShort,this.data.datesRange=this.data.saved.datesRange,i=0;i<this.data.ys.length;i++)this.data.ys[i].y=this.data.saved.y[i]}},A.TChart=t})(),(()=>{function t(t){this.opts=t,this.$canvas=document.createElement("canvas"),this.$canvas.className="tchart--graph-canvas",this.ctx=this.$canvas.getContext("2d"),t.$parent.appendChild(this.$canvas),this.deviceSpeed=void 0}var c=window.Graph.units;t.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.state.dims.composer;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.render({top:!0,bottom:!0})},setDarkMode:function(t){this.isDarkMode=t,this.onResize()},render:function(t){var s,i,e;null==this.deviceSpeed&&(s=performance.now(),e=this.opts.state.x1,this.opts.state.x1=this.opts.state.xMainMin,this.renderInner(t),i=performance.now(),this.opts.state.x1=e),this.renderInner(t),null==this.deviceSpeed&&(e="line"==this.opts.graphStyle||"step"==this.opts.graphStyle?1.5:2,this.deviceSpeed=(i-s)/e/(this.opts.data.x.length*this.opts.data.ys.length),this.opts.state.deviceSpeed=this.deviceSpeed)},renderInner:function(t){var s,i,e=this.opts.state.dims,a=this.opts.state,h=this.ctx,o=this.opts.settings.dpi,n=this.opts.settings,r=n.PADD,d=null==a.zoomMorph?0:a.zoomMorph,l="area"==this.opts.graphStyle&&a.zoomMode&&d<1,p="area"==this.opts.graphStyle&&a.zoomMode&&1==d;this.opts.data.master&&(this.$canvas.style.opacity=a.masterVisibility),this.opts.data.slave&&(this.$canvas.style.opacity=a.slaveVisibility,this.opts.chart.$el.style.visibility=0<a.slaveVisibility?"visible":"hidden"),t.top&&(h.clearRect(e.dates.l*o,e.dates.t*o,e.dates.w*o,e.dates.h*o),("line"==this.opts.graphStyle||"step"==this.opts.graphStyle||"area"==this.opts.graphStyle&&0<d||this.opts.data.slave&&a.slaveVisibility<1||this.opts.data.master&&a.masterVisibility<1)&&(p?h.clearRect(e.graph.l*o,(e.graph.t-18)*o,e.graph.w*o,(e.graph.h+30)*o):h.clearRect(e.graph.l*o,e.graph.t*o,e.graph.w*o,e.graph.h*o)),("area"==this.opts.graphStyle&&0==d||"bar"==this.opts.graphStyle)&&(h.clearRect(e.graph.l*o,e.graph.t*o,e.graph.w*o,(n.PADD[0]+4)*o),h.clearRect(e.graph.l*o,(e.graph.t+r[0])*o,r[3]*o,(e.graph.h-r[0]-r[2])*o),h.clearRect(e.graph.l*o,(e.graph.t+e.graph.h-r[2])*o,e.graph.w*o,r[2]*o),h.clearRect((e.graph.l+e.graph.w-r[1]-1)*o,(e.graph.t+r[0])*o,(r[1]+1)*o,(e.graph.h-r[0]-r[2])*o)),l||p||(h.save(),h.beginPath(),h.rect(e.graph.l*o,e.graph.t*o,e.graph.w*o,e.graph.h*o),h.clip()),this.opts.data.master&&a.masterVisibility<1&&(h.save(),s=5*(1-a.masterVisibility)+1,h.translate(e.graph.w*a.zoomSpecialOrigin*(1-s),0),h.scale(s,1)),this.opts.data.slave&&a.slaveVisibility<1&&(h.save(),s=a.slaveVisibility,h.translate(e.graph.w*a.zoomSpecialOrigin*(1-s),0),h.scale(s,1)),r=1,"area"==this.opts.graphStyle&&a.zoomMode&&(r=1-d),l&&(h.save(),s=n.PIE_RADIUS,n=e.graph.w+d*(2*s-e.graph.w),i=e.graph.h-42+d*(2*s-e.graph.h+42),c.TUtils.drawRoundedRect2(h,o,n,i,(e.graph.w-n)/2+e.graph.l,(e.graph.h-42-i)/2+e.graph.t+23,d*s),h.clip()),this.opts.chart.graph.render(),l&&h.restore(),this.opts.data.master&&a.masterVisibility<1&&h.restore(),this.opts.data.slave&&a.slaveVisibility<1&&h.restore(),this.opts.chart.axisY.render(r),this.opts.chart.fade.render(),l||p||h.restore(),this.opts.chart.axisX.render(r)),t.bottom&&(h.clearRect(e.graph.l*o,(e.handle.t-1)*o,e.graph.w*o,(e.handle.h+2)*o),n=this.opts.data.subchart.show,(n=(i=!this.opts.data.master&&!this.opts.data.slave&&this.opts.data.details&&this.opts.data.subchart.show!=this.opts.data.details.subchart.show)?n?d<1:0<d:n)&&(h.save(),c.TUtils.drawRoundedRect(h,o,e.mini.w,e.mini.h,e.mini.l,e.mini.t,7),h.clip(),this.opts.chart.mini.render(),h.restore(),this.opts.chart.handle.render()),i)&&0<d&&d<1&&(h.fillStyle=this.isDarkMode?"#242f3e":"#fff",h.globalAlpha=this.opts.data.subchart.show?d:1-d,h.fillRect(e.graph.l*o,(e.handle.t-1)*o,e.graph.w*o,(e.handle.h+2)*o),h.globalAlpha=1)}},c.TComposer=t})(),(()=>{function t(t){this.opts=t,this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.isTouch=i.TUtils.isTouchDevice(),this.skipMoveEnd=!0;var s=t.useElForMove?t.$el:window;t.$el.addEventListener(this.isTouch?"touchstart":"mousedown",this.onDragStart,{passive:!1}),s.addEventListener(this.isTouch?"touchmove":"mousemove",this.onDragMove,{passive:!1}),s.addEventListener(this.isTouch?"touchend":"mouseup",this.onDragEnd,{passive:!1})}var i=window.Graph.units;t.prototype={onDragStart:function(t){this.skipMoveEnd=!0,clearTimeout(this.pointerTimeout),this.isTouch&&1<t.touches.length||(this.scroll=void 0,this.x=(this.isTouch?t.touches[0]:t).pageX,this.y=(this.isTouch?t.touches[0]:t).pageY,this.dX=0,this.dY=0,this.pageX=this.x,this.pageY=this.y,delete this.prevDx,delete this.prevDy,this.opts.onDragStart({pageX:this.x,pageY:this.y,isTouch:this.isTouch}))||(this.skipMoveEnd=!1)},onDragMove:function(t){var s,i;this.skipMoveEnd||"v"!=this.scroll&&(s=(this.isTouch?t.touches[0]:t).pageX,i=(this.isTouch?t.touches[0]:t).pageY,this.dX=s-this.x,this.dY=i-this.y,this.pageX=s,this.pageY=i,this.isTouch&&("h"==this.scroll?this.opts.noPrevent||t.preventDefault():(5<Math.abs(this.dX)||5<Math.abs(this.dY))&&(this.scroll=Math.abs(this.dX)>Math.abs(this.dY)?"h":"v")),this.prevDx!=this.dX||this.prevDy!=this.dY)&&(this.opts.onDragMove&&this.opts.onDragMove({canceled:"v"==this.scroll,d:this.dX,pageX:this.pageX,pageY:this.pageY,isTouch:this.isTouch}),this.prevDx=this.dX,this.prevDy=this.dY)},onDragEnd:function(t){this.skipMoveEnd||(this.skipMoveEnd=!0,this.opts.onDragEnd&&this.opts.onDragEnd({isTouch:this.isTouch,e:t}))}},i.TDrag=t})(),(()=>{function t(t){this.opts=t,this.ctx=t.ctx,"area"!=this.opts.graphStyle&&(this.$fadeTop=document.createElement("canvas"),this.ctxFadeTop=this.$fadeTop.getContext("2d"),"bar"!=this.opts.graphStyle)&&(this.$fadeBottom=document.createElement("canvas"),this.ctxFadeBottom=this.$fadeBottom.getContext("2d"))}t.prototype={onResize:function(){var t,s=this.opts.settings.dpi,i=this.opts.state.dims.fadeTop,e=this.opts.state.dims.fadeBottom,a=(a=getComputedStyle(this.opts.$canvas).getPropertyValue("--tchart-fade-color"))||(this.isDarkMode?"rgba(36,47,62,1)":"rgba(255,255,255,1)");"area"!=this.opts.graphStyle&&((t=this.ctxFadeTop.createLinearGradient(0,0,0,i.h*s)).addColorStop(0,a),t.addColorStop(1,a),this.$fadeTop.width=i.w*s,this.$fadeTop.height=i.h*s,this.ctxFadeTop.fillStyle=t,this.ctxFadeTop.fillRect(0,0,i.w*s,i.h*s),"bar"!=this.opts.graphStyle)&&((t=this.ctxFadeBottom.createLinearGradient(0,0,0,e.h*s)).addColorStop(0,a),t.addColorStop(1,a),this.$fadeBottom.width=e.w*s,this.$fadeBottom.height=e.h*s,this.ctxFadeBottom.fillStyle=t,this.ctxFadeBottom.fillRect(0,0,e.w*s,e.h*s))},setDarkMode:function(t){this.isDarkMode=t,this.onResize()},render:function(){var t=this.opts.settings.dpi,s=this.opts.state.dims.fadeTop,i=this.opts.state.dims.fadeBottom;this.$fadeTop&&this.ctx.drawImage(this.$fadeTop,s.l*t,s.t*t),this.$fadeBottom&&this.ctx.drawImage(this.$fadeBottom,i.l*t,i.t*t)}},window.Graph.units.TFade=t})(),(()=>{function t(e){this.opts=e,this.ctx=e.ctx,this.isTouch=h.TUtils.isTouchDevice(),this.$canvas=e.$canvas,this.drag=new h.TDrag({$el:this.$canvas,onDragStart:function(t){this.canvasPos=h.TUtils.getElemPagePos(this.$canvas);var s=t.pageX-this.canvasPos.x,i=t.pageY-this.canvasPos.y;return this._x1=e.state.x1,this._x2=e.state.x2,this.constrainHandleSize(!1),this.tp=this.getTp(s-e.settings.PADD[3],i-(this.opts.state.dims.composer.h-e.settings.MINI_GRAPH_HEIGHT-e.settings.MINI_GRAPH_BOTTOM),t.isTouch),this.firstMove=!0,!this.tp}.bind(this),onDragMove:function(t){this.onDragMove(t.d),this.firstMove=!1}.bind(this),onDragEnd:function(t){}.bind(this)}),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.trackMouse(!0)}var h=window.Graph.units;t.prototype={getTp:function(t,s,i){var e,a=this.opts.state.dims.handle,h=this.opts.state,o=this.opts.state.zoomMode;return s<0||s>a.h?"":(s=i?.3*a.w:10,i&&s<14&&(s=14),e=(a=this.prevX1+(i?h.x1==h.xg1?-5:-15:0))+(s=i&&30<s?30:s),s=(i=this.prevX2+(i?h.x2==h.xg2?5:15:0))-s,(e=Math.abs(h.x2-h.x1-(o?this.opts.data.mainPeriodLen:this.minRange))<.01&&(h.x2==h.xg2&&(s=i+1),h.x1==h.xg1)?a-1:e)<t&&t<s?"both":a<=t&&t<=e?"start":s<=t&&t<=i?"end":"")},trackMouse:function(t){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__handle-pointer"),this.$canvas.classList.remove("tchart--graph-canvas__handle-grab"),this.$canvas.classList.remove("tchart--graph-canvas__handle-col-resize"),delete this.canvasPos},onMouseMove:function(t){this.canvasPos=this.canvasPos||h.TUtils.getElemPagePos(this.$canvas);var s=t.pageX-this.canvasPos.x,t=t.pageY-this.canvasPos.y,s=this.getTp(s-this.opts.settings.PADD[3],t-(this.opts.state.dims.composer.h-this.opts.settings.MINI_GRAPH_HEIGHT-this.opts.settings.MINI_GRAPH_BOTTOM),!1),t={"":"",both:this.opts.settings.isIE?"pointer":"grab",start:"col-resize",end:"col-resize"};this.onMouseLeave(),t[s]&&this.$canvas.classList.add("tchart--graph-canvas__handle-"+t[s])},onResize:function(t){this.constrainHandleSize(!0)},setDarkMode:function(t){this.isDarkMode=t},constrainHandleSize:function(t){var s=32/(this.opts.state.dims.handle.w/(this.opts.state.xg2-this.opts.state.xg1)),i=this.opts.state.x1,e=this.opts.state.x2,a=(this.opts.state.xg1,this.opts.state.xg2);e-i<(this.minRange=s)&&(a<(e=i+s)&&(i=(e=a)-s),t)&&this.opts.additional.cb(i,e,"constraint")},onDragMove:function(t){var s,i,e=this.opts.state.dims.handle,a=this.tp,h=this.opts.state,t=t/e.w*(h.xg2-h.xg1),e=this._x1,o=this._x2;"both"==a&&(i=o+t,(s=e+t)<h.xg1&&(s=h.xg1,i=h.xg1+o-e),i>h.xg2)&&(s=h.xg2-(o-e),i=h.xg2),"start"==a&&(i=h.x2,s=Math.min(Math.max(e+t,h.xg1),i-this.minRange)),"end"==a&&(s=h.x1,i=Math.max(Math.min(o+t,h.xg2),s+this.minRange)),h.x1==s&&h.x2==i||this.opts.additional.cb(s,i,a,this.firstMove)},render:function(){var t=this.opts.state.dims.handle,s=this.opts.settings.dpi,i=this.opts.state,e=1/(i.xg2-i.xg1),a=Math.round((i.x1-i.xg1)*e*t.w),i=Math.round((i.x2-i.xg1)*e*t.w),e=this.ctx;e.fillStyle=this.isDarkMode?"rgba(48, 66, 89, 0.6)":"rgba(226, 238, 249, 0.6)",h.TUtils.drawRoundedRect(e,s,a+4,t.h-2,t.l,t.t+1,[7,0,0,7]),e.fill(),h.TUtils.drawRoundedRect(e,s,t.w-i+4,t.h-2,t.l+i-4,t.t+1,[0,7,7,0]),e.fill(),this.isDarkMode||"line"==this.opts.graphStyle||"step"==this.opts.graphStyle||(e.fillStyle="#fff",h.TUtils.drawRoundedRect(e,s,12,t.h+2,t.l+a-1,t.t-1,[8,0,0,8]),e.fill(),h.TUtils.drawRoundedRect(e,s,12,t.h+2,t.l+i-11,t.t-1,[0,8,8,0]),e.fill()),e.fillStyle=this.isDarkMode?"#56626D":"#C0D1E1",h.TUtils.drawRoundedRect(e,s,10,t.h,t.l+a,t.t,[7,0,0,7]),e.fill(),h.TUtils.drawRoundedRect(e,s,10,t.h,t.l+i-10,t.t,[0,7,7,0]),e.fill(),e.fillRect((t.l+a+10)*s,t.t*s,(i-a-20)*s,s),e.fillRect((t.l+a+10)*s,(t.t+t.h-1)*s,(i-a-20)*s,s),e.strokeStyle="#fff",this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=2*s,e.beginPath(),e.moveTo((t.l+a+5)*s,(t.t+17)*s),e.lineTo((t.l+a+5)*s,(t.t+25)*s),e.moveTo((t.l+i-5)*s,(t.t+17)*s),e.lineTo((t.l+i-5)*s,(t.t+25)*s),e.stroke(),this.prevX1=a,this.prevX2=i}},h.THandle=t})(),(()=>{function t(t){this.opts=t,this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!0})}var j=window.Graph.units;t.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached="",this.ctx.fillStyle=this.isDarkMode?"#242f3e":"#fff",this.ctx.fillRect(0,0,s.w*t,s.h*t)},setDarkMode:function(t){this.isDarkMode=t},render:function(){var t,s,i,e,a=this.opts,h=a.data.ys,o=a.state,n=a.additional.mini,r=n||a.data.master&&o.masterVisibility<1&&0<o.masterVisibility||a.data.slave&&o.slaveVisibility<1&&0<o.slaveVisibility,d=n?o.xg1:o.x1,l=n?o.xg2:o.x2,p=a.settings,z=p["PADD"+(n?"_MINI":"")][0],F=p["PADD"+(n?"_MINI":"")][1],Y=p["PADD"+(n?"_MINI":"")][2],p=p["PADD"+(n?"_MINI":"")][3],c=a.data.x,m=a.settings.dpi,g=(r?this:this.opts).ctx,u=n?o.dims.mini:o.dims.graph,x=o.zoomMode,X=o.detailInd1,N=o.detailInd2,v=null==o.zoomMorph?0:o.zoomMorph,y=h.length,f="step"==a.graphStyle,M=(u.w-F-p)/(l-d+(f?this.opts.data.mainPeriodLen*(1-v):0)),T=Math.floor(j.TUtils.getXIndex(c,d-p/M)),_=Math.ceil(j.TUtils.getXIndex(c,l+F/M)),H=(p+(r?0:u.l))*m-d*(M*=m),U=(f&&x&&1==v&&(T<this.opts.state.xg1Ind&&(T=this.opts.state.xg1Ind),_>this.opts.state.xg2Ind)&&(_=this.opts.state.xg2Ind-1),this.opts.data.mainPeriodLen*M),B=this.opts.data.detailPeriodLen*M;if(r){var b=[u.w,u.h,n?o.xg1:o.x1,n?o.xg2:o.x2,this.isDarkMode,x];for(n||(b.push(o.y1),b.push(o.y2)),t=0;t<y;t++)b.push(n?o["om_"+t]:o["o_"+t]),b.push(o["f_"+t]);if((b=b.join(","))==this.cached)return void this.opts.ctx.drawImage(this.$canvas,u.l*m,u.t*m);this.cached=b,g.clearRect(0,0,u.w*m,u.w*m)}var l=(a.additional.mini?1:"auto"==a.data.strokeWidth?5<y?1:2:a.data.strokeWidth)*m,w=l%2==0?0:.5;for(g.lineWidth=l,g.lineCap=a.additional.mini?"square":"round",g.lineJoin=a.additional.mini?"square":"round",t=0;t<y;t++)if(s=n?o["om_"+t]:o["o_"+t],L=o["e_"+t],0<s){for(var S,D,$,I=h[t].y,G=h[t].yFrom,L=a.pairY?(i=n?o["y1m_"+t]:o["y1_"+t],n?o["y2m_"+t]:o["y2_"+t]):n?L&&s<1?(i=o.y1m_show,o.y2m_show):!L&&s<1?(i=o.y1m_hidd,o.y2m_hidd):(i=o.y1m,o.y2m):(i=o.y1,o.y2),O=m*(u.h-z-Y)/(L-i),W=(u.h-Y+(r?0:u.t))*m+i*O,A=(g.beginPath(),g.strokeStyle=(this.isDarkMode?h[t].colors_n:h[t].colors_d)[0],g.globalAlpha=s*(.9*o["f_"+t]+.1),Number.MAX_VALUE),E=-Number.MAX_VALUE,P=-Number.MAX_VALUE,R=!1,k=!0,C=T;C<=_;C++)e=x?X<=C&&C<=N?(S=G[C]+v*(I[C]-G[C]),B):(S=I[C]+v*(I[X]-I[C]),U):(S=I[C],U),isNaN(S)?k=!0:(D=c[C]*M+H<<0,yc=W-S*O<<0,P<D||f&&C==N+1?(R&&($==A?(g.moveTo(P+w,E-w),g.lineTo(P+w,A-w)):(g.moveTo(P+w,A-w),g.lineTo(P+w,E-w),$!=E&&g.moveTo(P+w,$-w)),R=!1),k&&(g.moveTo(D+w,yc-w),k=!1),E=A=yc,g.lineTo(D+w,yc-w),f&&g.lineTo((c[C]*M+e+H<<0)+w,yc-w)):(A=Math.min(A,yc),E=Math.max(E,yc),R=!0),P=D,$=yc);R&&(g.moveTo(P+w,A-w),g.lineTo(P+w,E-w)),g.stroke()}g.globalAlpha=1,r&&this.opts.ctx.drawImage(this.$canvas,u.l*m,u.t*m)}},j.TLines=t})(),(()=>{function t(n){var r,d;this.opts=n,this.isTouch=l.TUtils.isTouchDevice(),this.enabled=n.data.ys.length,1!=this.enabled||n.data.forceLegend||(n.$parent.style.display="none"),this.switchers=n.data.ys.map(function(t,i){var s,e,a,h=document.createElement("div"),o=(h.className="tchart--switcher",n.state["e_"+i]?h.classList.toggle("tchart--switcher__active"):this.enabled--,h.setAttribute("data-label",t.label),n.$parent.appendChild(h),document.createElement("span"));return o.textContent=t.label,h.appendChild(o),this.isTouch||(h.addEventListener("mouseenter",function(t){n.state["e_"+i]&&n.additional.onEnter(i)}),h.addEventListener("mouseleave",function(t){n.state["e_"+i]&&n.additional.onLeave(i)})),h.addEventListener("click",function(t){var s;d?d=!1:(s=h.classList.contains("tchart--switcher__active"))&&1==this.enabled?(h.classList.add("tchart--switcher__denied"),clearTimeout(r),r=setTimeout(function(){h.classList.remove("tchart--switcher__denied")},500)):(this.isTouch||(s?n.additional.onLeave(i):n.additional.onEnter(i)),n.additional.onClick(!s,i))}.bind(this)),this.drag=new l.TDrag({$el:h,noPrevent:!0,useElForMove:!0,onDragStart:function(t){s=t.pageX,e=t.pageY,a=setTimeout(function(){d=!0,this.isTouch||n.additional.onEnter(i),n.additional.onLongTap(i)}.bind(this),500)}.bind(this),onDragMove:function(t){(5<Math.abs(s-t.pageX)||5<Math.abs(e-t.pageY))&&clearTimeout(a)}.bind(this),onDragEnd:function(t){clearTimeout(a)}.bind(this)}),h}.bind(this)),this.updateColors()}var l=window.Graph.units;t.prototype={onResize:function(){},updateColors:function(){for(var t=this.opts.data.ys,s=0;s<this.switchers.length;s++)this.switchers[s].style.color=(this.isDarkMode?t[s].colors_n:t[s].colors_d)[1]},setDarkMode:function(t){this.isDarkMode=t,this.updateColors()},render:function(t){for(var s=this.enabled=0;s<this.switchers.length;s++)t[s]?(this.enabled++,this.switchers[s].classList.add("tchart--switcher__active")):this.switchers[s].classList.remove("tchart--switcher__active")}},l.TSwitchers=t})(),(()=>{function t(t){var s;this.opts=t,this.shown=!1,this.isTouch=S.TUtils.isTouchDevice(),this.$canvas=t.$canvas,this.cache={},this.$tip=document.createElement("div"),this.$tip.className="tchart--tip",t.$parent.appendChild(this.$tip),this.$tipDt=document.createElement("h6"),this.$tip.appendChild(this.$tipDt),this.$tipDtText=document.createTextNode(""),this.$tipDt.appendChild(this.$tipDtText),this.$tipDtText.nodeValue=".",this.$tipArrow=document.createElement("div"),this.$tipArrow.className="tchart--tip-arrow",this.$tip.appendChild(this.$tipArrow),this.$tipLoader=document.createElement("div"),this.$tipLoader.className="tchart--tip-loader",this.$tip.appendChild(this.$tipLoader),this.$tipScrollerWrapper=document.createElement("div"),this.$tipScrollerWrapper.className="tchart--tip-scroller-wrapper",this.$tip.appendChild(this.$tipScrollerWrapper),this.$tipScroller=document.createElement("div"),this.$tipScroller.className="tchart--tip-scroller",this.$tipScrollerWrapper.appendChild(this.$tipScroller),this.updateTipScrollClasses=this.updateTipScrollClasses.bind(this),this.$tipScroller.addEventListener("scroll",this.updateTipScrollClasses),this.labels=[],t.data.ys.forEach(function(t,s){this.labels.push(this.addLabel(t))}.bind(this)),"bar"==t.graphStyle&&1<t.data.ys.length&&(this.allLabel=this.addLabel({label:"All",outside:!0})),"area"==t.graphStyle&&(this.pieLabel=this.addLabel({label:"pie",outside:!0})),this.tooltipOnHover=!this.isTouch&&t.data.tooltipOnHover,this.tooltipSortOrder=!0===(s=t.data.tooltipSort)||"desc"===s?"desc":"asc"===s?"asc":null,"bar"!=t.graphStyle?(this.$line=document.createElement("div"),this.$line.className="tchart--line",t.$parent.appendChild(this.$line),this.$lineFill=document.createElement("div"),this.$line.appendChild(this.$lineFill),"area"!=t.graphStyle&&(this.points=t.data.ys.map(function(t,s){var i=document.createElement("span");return this.$line.appendChild(i),i}.bind(this)))):(t.state.barInd=-1,t.state.barO=0),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onBodyClick=this.onBodyClick.bind(this),this.onTipClick=this.onTipClick.bind(this),this.tooltipOnHover?(this.$canvas.addEventListener("mousemove",function(t){this.canvasPos=this.canvasPos||S.TUtils.getElemPagePos(this.$canvas),this.dx=t.pageX-this.canvasPos.x,this.dy=t.pageY-this.canvasPos.y;t=this.opts.state.dims.tip;this.tp=this.getTp(this.dx,this.dy-t.t,this.isTouch),this.tp?this.shown?this.render({isMove:!0}):(delete this.prevXInd,this.toggle(!0),this.render({})):this.toggle(!1)}.bind(this)),this.$canvas.addEventListener("mouseleave",function(){delete this.canvasPos,this.toggle(!1)}.bind(this)),this.$canvas.addEventListener("click",function(t){this.shown&&this.onTipClick(t)}.bind(this)),this.$tip.style.pointerEvents="none"):(this.drag=new S.TDrag({$el:this.$canvas,onDragStart:function(t){this.canvasPos=S.TUtils.getElemPagePos(this.$canvas),this.dx=t.pageX-this.canvasPos.x,this.dy=t.pageY-this.canvasPos.y;var s=this.opts.state.dims.tip;return this.tp=this.getTp(this.dx,this.dy-s.t,t.isTouch),delete this.prevXInd,clearTimeout(this.showTimeout),this.showTimeout=setTimeout(function(){this.toggle(!!this.tp),this.tp&&this.render()}.bind(this),this.isTouch?100:30),document.body.removeEventListener("click",this.onBodyClick),!this.tp}.bind(this),onDragMove:function(t){t.canceled?(clearTimeout(this.showTimeout),this.toggle(!1)):(this.canvasPos=this.canvasPos||S.TUtils.getElemPagePos(this.$canvas),this.dx=t.pageX-this.canvasPos.x,this.dy=t.pageY-this.canvasPos.y,this.render({isMove:!0}))}.bind(this),onDragEnd:function(t){delete this.canvasPos,this.bodyTimeout=setTimeout(function(){document.body.addEventListener("click",this.onBodyClick)}.bind(this),140)}.bind(this)}),this.$tip.addEventListener("click",this.onTipClick)),this.trackMouse(!0),this.updateColors()}var S=window.Graph.units;t.prototype={onResize:function(t){var s,i=this.opts.state.dims.tip;this.$line&&(s="area"==this.opts.graphStyle?25:16,this.$line.style.top=i.t+"px",this.$line.style.height=i.h+"px",this.$lineFill.style.top=s+"px",this.$lineFill.style.bottom=this.opts.settings.PADD[2]+1+"px"),this.render()},abortDetailCallbacks:function(){this.detailCallbacks&&(this.detailCallbacks.forEach(function(t,s){t.cancelled=!0}),delete this.detailCallbacks)},onTipClick:function(t){var s,i,e,a;null==this.prevXInd||!this.opts.additional.onClick||!this.opts.data.hasDetail||this.opts.state.zoomMode||this.opts.state.zoomModeSpecial||(t.stopPropagation(),this.$tip.classList.contains("tchart--tip__loading"))||(s=this.opts.data.x[this.prevXInd],this.opts.data.detailsFunc?(this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.add("tchart--tip__loading"),this.cache[s]?(this.toggle(!1,!0),this.opts.additional.onClick(!0,s,this.cache[s]),this.$tip.classList.remove("tchart--tip__loading")):(this.abortDetailCallbacks(),t=this.opts.data.detailsFunc(s),(i=this).detailCallbacks=this.detailCallbacks||[],e=function(t){e.cancelled||(i.$tip.classList.remove("tchart--tip__loading"),t&&t.columns?(i.toggle(!1,!0),i.opts.additional.onClick(!0,s,t),i.cache[s]=t):i.$tip.classList.add("tchart--tip__error"))},a=function(t){a.cancelled||(i.$tip.classList.remove("tchart--tip__loading"),"default"===t&&i.opts.additional.onClick&&i.opts.data.hasDetail&&"area"==i.opts.graphStyle?(i.toggle(!1,!0),i.opts.additional.onClick(!0,s)):(console.log("error:",t),i.$tip.classList.add("tchart--tip__error")))},this.detailCallbacks.push(e),this.detailCallbacks.push(a),t.then(e).catch(a))):(this.toggle(!1,!0),this.opts.additional.onClick(!0,s)))},updateColors:function(){var i=this.opts.data.ys;this.labels.forEach(function(t,s){this.points&&(this.points[s].style.borderColor=(this.isDarkMode?i[s].colors_n:i[s].colors_d)[0]),t.$value.style.color=(this.isDarkMode?i[s].colors_n:i[s].colors_d)[2]}.bind(this)),this.allLabel&&(this.allLabel.$value.style.color=this.isDarkMode?"#fff":"#000"),this.$lineFill&&(this.$lineFill.style.backgroundColor=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)")},setDarkMode:function(t){this.isDarkMode=t,this.updateColors()},addLabel:function(t){var s,i,e=document.createElement("div"),a=(e.className="tchart--tip-row",t.outside?(this.$tip.appendChild(e),e.classList.add("tchart--tip-row__outside")):this.$tipScroller.appendChild(e),document.createElement("span")),h=(e.appendChild(a),document.createTextNode("")),t=(h.nodeValue=t.label,a.appendChild(h),"area"==this.opts.graphStyle&&(i=document.createElement("p"),e.appendChild(i),s=document.createTextNode(""),i.appendChild(s)),document.createElement("div")),o=(e.appendChild(t),document.createTextNode(""));return t.appendChild(o),{$row:e,$value:t,$valueText:o,$label:a,$labelText:h,$per:i,$perText:s}},getTp:function(t,s,i){var e,a,h;return"area"==this.opts.graphStyle&&this.opts.state.zoomMode?(e=(h=this.opts.state.dims.graph).w/2,a=h.h/2,Math.pow((a-s)*(a-s)+(t-e)*(t-e),.5)<=this.opts.settings.PIE_RADIUS?"graph":""):(h=this.opts.state.dims.tip,s<0||s>h.h?"":"graph")},trackMouse:function(t,s){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__tip-pointer"),delete this.canvasPos},onMouseMove:function(t){this.canvasPos=this.canvasPos||S.TUtils.getElemPagePos(this.$canvas);var s=t.pageX-this.canvasPos.x,t=t.pageY-this.canvasPos.y,i=this.opts.state.dims.tip,s=this.getTp(s,t-i.t,!1);this.onMouseLeave(),s&&this.$canvas.classList.add("tchart--graph-canvas__tip-pointer")},toggle:function(t,s){var i=this.opts,e=i.state;if(t&&!this.shown&&(this.$tip.classList.add("tchart--tip__visible"),!this.opts.data.hasDetail||this.opts.state.zoomMode||this.opts.state.zoomModeSpecial?this.$tip.classList.remove("tchart--tip__has-zoom"):this.$tip.classList.add("tchart--tip__has-zoom"),this.$tip.classList.remove("tchart--tip__shiftHide"),this.$line&&this.$line.classList.add("tchart--line__visible"),S.TUtils.triggerEvent("chart-hide-tips",{except:this.opts.chart})),!t&&this.shown){if(delete this.lastCurPieItemInd,"area"==i.graphStyle&&e.zoomMode){for(var a=[],h=0;h<e.pieAngles.length;h++){var o=e.pieAngles[h];a.push({prop:"pieInd_"+o.ind,state:i.state,end:0,duration:350,tween:"exp",speed:.2,group:{top:!0}})}i.animator.add(a)}s&&(this.$tip.classList.add("tchart--tip__shiftHide"),this.lastTipTop-=12,this.lastTipLeft=this.lastTipLeft<this.opts.state.dims.tip.w/2?this.lastTipLeft-12:this.lastTipLeft+12,this.$tip.style.transform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)",this.$tip.style.webkitTransform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)"),this.$tip.classList.remove("tchart--tip__visible"),this.$line&&this.$line.classList.remove("tchart--line__visible"),this.abortDetailCallbacks(),this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.remove("tchart--tip__loading"),"bar"==this.opts.graphStyle&&this.opts.animator.add([{prop:"barInd",state:this.opts.state,end:-1,duration:0,delay:150,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:0,duration:150,tween:"exp",speed:.3,group:{top:!0}}]),document.body.removeEventListener("click",this.onBodyClick)}this.shown=t},onBodyClick:function(t){t.target!=this.$canvas&&this.toggle(!1)},renderPieTooltip:function(t){for(var s,i=this.opts,e=i.state,a=this.opts.settings,h=a.PADD[0],o=a.PADD[1],n=a.PADD[2],a=a.PADD[3],r=e.dims.graph,d=e.dims.tip,l=r.w/2,p=r.h/2,c=S.TUtils.getFormatter("yTooltipFormatter",i.data,e.zoomMorph),m=(m=Math.atan2(p-this.dy+r.t,this.dx-l))<0?2*Math.PI+m:m,g=0;g<e.pieAngles.length;g++)m<=(x=e.pieAngles[g]).st&&m>=x.ed&&(s=x),m-2*Math.PI<=x.st&&m-2*Math.PI>=x.ed&&(s=x);if(this.lastCurPieItemInd!=s.ind){for(var u=[],g=0;g<e.pieAngles.length;g++){var x=e.pieAngles[g];u.push({prop:"pieInd_"+x.ind,state:i.state,end:x==s?1:0,duration:350,tween:"exp",speed:.2,group:{top:!0}})}i.animator.add(u)}this.pieLabel.$row.style.display="block",this.labels.forEach(function(t,s){t.$row.style.display="none"}.bind(this)),this.pieLabel.$labelText.nodeValue=s.label,this.pieLabel.$valueText.nodeValue=isNaN(s.value)?"n/a":c(s.value),this.pieLabel.$value.style.color=s.color,this.$tip.classList.add("tchart--tip__piemode"),this.$line&&this.$line.classList.add("tchart--line__piemode"),this.tipH=this.$tip.offsetHeight,this.tipW=this.$tip.offsetWidth;p=this.dx-this.tipW/2,r=Math.min(this.dy-20-this.tipH,d.t+d.h-this.tipH-n);r<d.t+h&&(r=d.t+h),p=Math.min(Math.max(p,a/2),d.w-this.tipW-o/2),this.$tip.style.transform="translate("+(p<<0)+"px,"+(r<<0)+"px)",this.$tip.style.webkitTransform="translate("+(p<<0)+"px,"+(r<<0)+"px)",this.lastCurPieItemInd=s.ind,this.updateTipScrollClasses()},render:function(t){if(this.shown){var i,e,a,h=this.opts,o=h.state,s=this.opts.settings,n=s.PADD[0],r=s.PADD[1],d=s.PADD[2],s=s.PADD[3],l=0,p=this.opts.state.dims.tip,c=S.TUtils.getFormatter("yTooltipFormatter",h.data,o.zoomMorph),m=null==o.zoomMorph?0:o.zoomMorph,m=("bar"==h.graphStyle||"step"==h.graphStyle?this.opts.data.mainPeriodLen:0)*(1-m);if(t=t||{},this.abortDetailCallbacks(),this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.remove("tchart--tip__loading"),"area"==h.graphStyle&&o.zoomMode)this.renderPieTooltip(t);else{this.pieLabel&&(this.pieLabel.$row.style.display="none");var g=Math.max(Math.min(this.dx,p.w-1),0),g=o.x1+(o.x2-o.x1+m)*((g-s)/(p.w-r-s)),g=S.TUtils.getXIndex(h.data.x,g),u="bar"==h.graphStyle||"step"==h.graphStyle?Math.floor(g):Math.round(g);if("bar"!==h.graphStyle&&"step"!==h.graphStyle?((x=(h.data.x[u]-o.x1)/(o.x2-o.x1+m)*(p.w-s-r)+s<<0)<0&&u++,x>p.w-1&&u--):(this.opts.state.zoomMode||this.opts.state.zoomModeSpecial)&&(u<h.state.detailInd1&&u++,u>h.state.detailInd2)&&u--,"bar"==h.graphStyle&&h.animator.add([{prop:"barInd",state:h.state,end:u,duration:0,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:1,duration:150,tween:"exp",speed:.3,group:{top:!0}}]),this.prevXInd!=u||!t.isMove){this.$tip.classList.remove("tchart--tip__piemode"),this.$line&&this.$line.classList.remove("tchart--line__piemode"),this.labels.forEach(function(t,s){var i=h.state["e_"+s]&&!isNaN(h.data.ys[s].y[u])?"block":"none";t.$row.style.display=i,this.points&&(this.points[s].style.display=i),l+="block"==i?1:0}.bind(this)),this.itemsVisible=l,this.allLabel&&(this.allLabel.$row.style.display=1<l?"block":"none"),this.itemsVisible?(this.$tip.classList.remove("tchart--tip__has_no_items"),this.$line&&this.$line.classList.remove("tchart--line__has_no_items")):(this.$tip.classList.add("tchart--tip__has_no_items"),this.$line&&this.$line.classList.add("tchart--line__has_no_items"));g=0;"step"==h.graphStyle&&(g=this.opts.state.zoomMode?h.data.detailPeriodLen:h.data.mainPeriodLen);var x=(h.data.x[u]-o.x1+g/2)/(o.x2-o.x1+m)*(p.w-s-r)+s<<0,v=(this.$line&&(this.$line.style.transform="translateX("+x+"px)"),this.$line&&(this.$line.style.webkitTransform="translateX("+x+"px)"),this.$tipDtText.nodeValue=h.data.dates[u],0);if(h.data.ys.forEach(function(t,s){h.state["e_"+s]&&!isNaN(t.y[u])&&(this.labels[s].$valueText.nodeValue=(t.ctf||c)(t.y[u]),v+=t.y[u]||0,this.points)&&(i=this.points[s],a=h.pairY?(e=o["y1_"+s],o["y2_"+s]):(e=o.y1,o.y2),s=(t.y[u]-e)/(a-e),i.style.transform="translateY("+(p.h-s*(p.h-n-d)-d<<0)+"px)",i.style.webkitTransform="translateY("+(p.h-s*(p.h-n-d)-d<<0)+"px)")}.bind(this)),this.allLabel&&(this.allLabel.$valueText.nodeValue=c(v)),this.tooltipSortOrder){for(var y=[],f=0;f<this.labels.length;f++)this.opts.state["e_"+f]&&!isNaN(this.opts.data.ys[f].y[u])&&y.push({ind:f,val:this.opts.data.ys[f].y[u]||0});var M=this.tooltipSortOrder;y.sort(function(t,s){return t.val===s.val?t.ind-s.ind:"desc"===M?s.val-t.val:t.val-s.val});for(var T=0;T<y.length;T++)this.$tipScroller.appendChild(this.labels[y[T].ind].$row);for(var _=0;_<this.labels.length;_++)this.opts.state["e_"+_]&&!isNaN(this.opts.data.ys[_].y[u])||this.$tipScroller.appendChild(this.labels[_].$row)}t.isMove||(this.maxLabelWidth=0,this.maxValueWidth=0,this.maxPercentageWidth=0,this.maxDateWidth=0,g=window.getComputedStyle(this.$tip),this.rowPaddings=parseInt(g.getPropertyValue("padding-left"),10)+parseInt(g.getPropertyValue("padding-right"),10)),"area"==h.graphStyle&&this.fillPercentages(u,v),this.labels.forEach(function(t,s){h.state["e_"+s]&&!isNaN(h.data.ys[s].y[u])&&((s=t.$label.offsetWidth)>this.maxLabelWidth&&(this.maxLabelWidth=s),(s=t.$value.offsetWidth)>this.maxValueWidth)&&(this.maxValueWidth=s)}.bind(this));m=this.rowPaddings+this.maxLabelWidth+20+this.maxValueWidth,x=(m+="area"==h.graphStyle?this.maxPercentageWidth:0,this.rowPaddings+this.$tipDt.offsetWidth+20);x>this.maxDateWidth&&(this.maxDateWidth=x),m=Math.max(m,this.maxDateWidth),this.$tip.style.width=m+"px",this.tipH=this.$tip.offsetHeight,this.tipW=this.$tip.offsetWidth}var b,w,t=this.itemsVisible<=2?"center":"side";"side"==(t="center"==t&&(b=this.dx-this.tipW/2,(w=Math.min(this.dy-20-this.tipH,p.t+p.h-this.tipH-d))<p.t+n)?"side":t)&&(b=this.dx>p.w/2?this.dx-this.tipW-20:this.dx+20,w=Math.min(Math.max(this.dy-this.tipH/2,p.t+n),p.t+p.h-this.tipH-d)),b=Math.min(Math.max(b,s/2),p.w-this.tipW-r/2),this.$tip.style.transform="translate("+(b<<0)+"px,"+(w<<0)+"px)",this.$tip.style.webkitTransform="translate("+(b<<0)+"px,"+(w<<0)+"px)",this.lastTipLeft=b<<0,this.lastTipTop=w<<0,this.prevXInd=u,this.updateTipScrollClasses()}}},updateTipScrollClasses:function(){this.$tipScroller.scrollHeight>this.$tipScroller.offsetHeight?this.$tip.classList.add("tchart--tip__scroll"):this.$tip.classList.remove("tchart--tip__scroll"),this.$tipScroller.scrollTop<=0?this.$tip.classList.remove("tchart--tip__has_less"):this.$tip.classList.add("tchart--tip__has_less"),this.$tipScroller.scrollTop>=this.$tipScroller.scrollHeight-this.$tipScroller.offsetHeight?this.$tip.classList.remove("tchart--tip__has_more"):this.$tip.classList.add("tchart--tip__has_more")},fillPercentages:function(i,e){var a=this.opts,h=[],o=2;a.data.ys.forEach(function(t,s){a.state["e_"+s]&&(h[s]=Math.max(Math.round(100*t.y[i]/e),0),!isNaN(t.y[i])&&0!=e||(h[s]=0),100==h[s])&&(o=3)}.bind(this)),a.data.ys.forEach(function(t,s){var i;a.state["e_"+s]&&(i=8*o+17,this.labels[s].$label.style.transform="translateX("+i+"px)",this.labels[s].$label.style.webkitTransform="translateX("+i+"px)",this.labels[s].$perText.nodeValue=h[s]+"%",this.labels[s].$per.style.width=i-7+"px",i>this.maxPercentageWidth)&&(this.maxPercentageWidth=i)}.bind(this))}},S.TTip=t})(),(()=>{Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},Math.log10=Math.log10||function(t){return Math.log(t)*Math.LOG10E};var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],h={simplifyData:function(t,s,i,e,a,h,o,n,r){var r=(n-o)/r,d=[],l=[];if(r<=1)return{xInd1:o,xInd2:n,x:s,ys:i};for(var p,c=0,m=-999999999,g=h.length,u=o;u<=n;u++){var x=s[u]*e+a<<0,v=m<x;for(v?(d[c]=s[u],c++):p++,j=0;j<g;j++){var y=h[j],f=(l[y]=l[y]||{y:[]},l[y].y[c-1]),M=i[y].y[u];null==f?l[y].y[c-1]=M:l[y].y[c-1]+=M,1<c&&(v&&(l[y].y[c-2]/=p),u==n)&&(l[y].y[c-1]/=p)}v&&(p=1),m=x}return{isOptimized:1<r,xInd1:o=0,xInd2:n=c-1,x:d,ys:l}},getElemPagePos:function(t){t=t.getBoundingClientRect();return{x:t.left+(window.pageXOffset||document.documentElement.scrollLeft),y:t.top+(window.pageYOffset||document.documentElement.scrollTop)}},getXIndex:function(t,s,i){var e=0,a=t.length-1;for(i||(s<t[e]?s=t[e]:s>t[a]&&(s=t[a]));1<Math.abs(e-a);){var h=Math.round((e+a)/2);s>=t[e]&&s<=t[h]?a=h:e=h}return e+(s-t[e])/(t[a]-t[e])},triggerEvent:function(t,s){"function"==typeof window.CustomEvent&&document.dispatchEvent(new CustomEvent(t,{detail:s||null}))},isTouchDevice:function(){var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(t=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(t).matches)},drawRoundedRect:function(t,s,i,e,a,h,o){i*=s,e*=s,a*=s,h*=s,(o="number"==typeof o?[o,o,o,o]:o)[0]*=s,o[1]*=s,o[2]*=s,o[3]*=s,t.beginPath(),t.moveTo(a+o[0],h),t.lineTo(a+i-o[1],h),t.quadraticCurveTo(a+i,h,a+i,h+o[1]),t.lineTo(a+i,h+e-o[2]),t.quadraticCurveTo(a+i,h+e,a+i-o[2],h+e),t.lineTo(a+o[3],h+e),t.quadraticCurveTo(a,h+e,a,h+e-o[3]),t.lineTo(a,h+o[0]),t.quadraticCurveTo(a,h,a+o[0],h),t.closePath()},drawRoundedRect2:function(t,s,i,e,a,h,o){a*=s,h*=s,(e*=s)<2*(o=(i*=s)<2*(o*=s)?i/2:o)&&(o=e/2),t.beginPath(),t.moveTo(a+o,h),t.arcTo(a+i,h,a+i,h+e,o),t.arcTo(a+i,h+e,a,h+e,o),t.arcTo(a,h+e,a,h,o),t.arcTo(a,h,a+i,h,o),t.closePath()},getFormatter:function(t,s,i){var e;return(e=.5<i&&s.details?s.details[t]:e)||s[t]||h[t]},xTooltipFormatter:function(t,s){t=new Date(t),t=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCDay(),t.getUTCHours(),t.getUTCMinutes()];return s?(t[4]<10?"0":"")+t[4]+":"+(t[5]<10?"0":"")+t[5]:e[t[3]]+", "+t[2]+" "+i[t[1]]+" "+t[0]},xTickFormatter:function(t,s){t=new Date(t),t=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCDay(),t.getUTCHours(),t.getUTCMinutes()];return s?(t[4]<10?"0":"")+t[4]+":"+(t[5]<10?"0":"")+t[5]:t[2]+" "+i[t[1]]},xRangeFormatter:function(t,s){t=new Date(t),t=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()];return t[2]+" "+a[t[1]]+" "+t[0]},yTickFormatter:function(t,s,i){return 0==t?0:s<1e3?Math.floor(t):1e3<=s&&s<1e6?i?Math.floor(10*t/1e3)/10+"K":Math.round(t/1e3)+"K":i?Math.floor(10*t/1e6)/10+"M":Math.round(t/1e6)+"M"},yTooltipFormatter:function(t){return"number"!=typeof t?"string"==typeof t?t:"?":h.statsFormatKMBT(t)},statsFormatKMBT:function(t,s,i){if(0==t)return"0";null==s&&(s=h.statsChooseNumKMBT(t));t=h.statsFormatFixedKMBT(t,s);return null==i&&(i=h.statsChoosePrecision(t)),t.toFixed(i)+s},statsFormatFixedKMBT:function(t,s){switch(s){case"K":return t/1e3;case"M":return t/1e6;case"B":return t/1e9;case"T":return t/1e12}return t},statsChoosePrecision:function(t){t=Math.abs(t);return 10<t?0:1<=t?Math.abs(t-Math.floor(t))<.001?0:1:2},statsChooseNumKMBT:function(t){t=Math.abs(t);return 1e12<=t?"T":1e9<=t?"B":1e6<=t?"M":2e3<=t?"K":""},roundRange:function(i,e,a,t){if(Math.abs(e-i)<1&&(i-=i/10,e+=e/10),t)return n=(t.yMinOrig-t.yMin)/(t.yMaxOrig-t.yMinOrig),{yMin:i-(e-i)*n,yMax:e+(e-i)*((t.yMax-t.yMaxOrig)/(t.yMaxOrig-t.yMinOrig)),yMinOrig:i,yMaxOrig:e};for(var s,h=function(t){var t=r*t,s=Math.floor(i/t)*t,t=s+a*Math.ceil((e-s)*o/t)*t;return{good:t<=l&&d<=s,yMin:Math.round(s),yMax:Math.round(t),yMinOrig:i,yMaxOrig:e}},o=1/a,n=(e-i)*o,r=Math.max(Math.pow(10,Math.floor(Math.log10(n))),1),d=i-.5*n,l=e+.5*n,p=1;!(s=h(5)).good&&!(s=h(2)).good&&!(s=h(1)).good;)if(r*=.1,10<++p)return{yMinOrig:i,yMaxOrig:e,yMin:i,yMax:e};return s}};window.Graph.units.TUtils=h})();