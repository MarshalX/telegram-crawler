window.Graph={render:function(t,s){var e=document.createElement("div");return e.className="tchart--wrapper",t.appendChild(e),new this.units.TChart({container:e,data:s})},units:{}},function(){var t=function(t){this.composer=t.composer,this.state=t.state,this.queue={},this.queueSize=0,this.step=this.step.bind(this)};t.prototype={add:function(t){for(var s,e,a,h=0,o=+new Date,r=this.queue;h<t.length;){if(!(s=r[(e=t[h]).prop])){if(e.end==e.state[e.prop]){e.cbEnd&&e.cbEnd(e.state),h++;continue}s={lastStart:1},r[e.prop]=s,this.queueSize++}a=o-s.lastStart,e.duration*=this.state.speed,e.delay*=this.state.speed,s.cbEnd=e.cbEnd,s.state=e.state,s.lastStart=o,s.start=e.state[e.prop],s.end=e.end,s.startDt=o+(e.delay||0),s.endDt=s.startDt+(e.duration||0)-(e.fixed?0:Math.max(e.duration-a,0)),s.tween=e.tween||"easeInOutQuad",s.speed=e.speed,s.group=e.group,h++}this.animFrame||(this.animFrame=requestAnimationFrame(this.step))},get:function(t){return this.queue[t]},step:function(){var t,s,e,a,h,o,r,n,d,l,p,c,g,$=[],m=+new Date,u={top:!1,bottom:!1};for(h in this.queue)(o=this.queue[h],r=m,n=o.endDt-o.startDt,l=o.state[h],g=r<o.startDt,r<o.startDt?r=o.startDt:r>o.endDt&&(r=o.endDt),(p=(d=n?(r-o.startDt)/n:g?0:1)<1?"exp"==o.tween?l+(o.end-l)*o.speed:(t=o.start,s=o.end,e=d,({linear:function(t,s,e,a){return e*t/a+s},easeInOutQuad:function(t,s,e,a){return(t/=.5*a)<1?.5*e*t*t+s:-e/2*(--t*(t-2)-1)+s}})[a=o.tween](e,t,s-t,1)):o.end)!=l)?(o.state[h]=p,u.top=u.top||o.group.top,u.bottom=u.bottom||o.group.bottom):p==o.end&&$.push(h);for(c=0;c<$.length;)this.queue[$[c]].cbEnd&&this.queue[$[c]].cbEnd(this.queue[$[c]].state),delete this.queue[$[c]],c++;this.queueSize-=$.length,this.composer.render(u),this.queueSize?this.animFrame=requestAnimationFrame(this.step):delete this.animFrame}},window.Graph.units.TAnimator=t}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,t.additional.mini&&(this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!0}))};s.prototype={onResize:function(){if(this.opts.additional.mini){var t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached=""}},setDarkMode:function(t){this.isDarkMode=t},render:function(){var s=this.opts,e=s.data.ys,a=s.state,h=s.additional.mini,o=h?a.xg1:a.x1,r=h?a.xg2:a.x2,n=s.settings,d=n["PADD"+(h?"_MINI_AREA":"")][0],l=n["PADD"+(h?"_MINI_AREA":"")][1],p=n["PADD"+(h?"_MINI_AREA":"")][2],c=n["PADD"+(h?"_MINI_AREA":"")][3],g=s.data.x,$=s.settings.dpi,m=h?this.ctx:this.opts.ctx,u=[],x=[],_=h?a.dims.mini:a.dims.graph,f=void 0==a.zoomMorph?0:a.zoomMorph,y=f;a.zoomMode;var T=e.length;if(h){var b=[_.w,_.h,a.xg1,a.xg2,this.isDarkMode,a.zoomMode,f];for(tv=0;tv<T;tv++)b.push(a["om_"+tv]),b.push(a["f_"+tv]);if((b=b.join(","))==this.cached){this.opts.ctx.drawImage(this.$canvas,_.l*$,_.t*$);return}this.cached=b}tb=(_.w-l-c)/(r-o),tD=Math.floor(t.TUtils.getXIndex(g,o-c/tb)),tw=Math.ceil(t.TUtils.getXIndex(g,r+l/tb)),tb*=$,tM=(c+(h?0:_.l))*$-o*tb,hBottom=(_.h-p+(h?0:_.t))*$;var M=[],S=[],D=0,w=0,I=0,L=!1;for(tv=0;tv<T;tv++)ty=h?a["om_"+tv]:a["o_"+tv],L=L||a["f_"+tv]<1,ty<1&&ty>0&&(D=ty),ty>0&&(M.push(tv),S.push(ty),1==ty&&a["e_"+tv]&&(w++,I=M.length-1));var A=M.length;D=1==w?D:1,tT=h?a.y1m:a.y1,t8=h?a.y2m:a.y2;var E=t.TUtils.simplifyData("line",g,e,tb,tM,M,tD,tw,_.w-l-c);tD=E.xInd1,tw=E.xInd2;var P=E.x,R=E.ys,k=!1;for(t_=tD;t_<=tw;t_++){for(tv=0,u[t_]=0,x[t_]=0;tv<A;tv++)x[t_]+=(R[M[tv]].y[t_]||0)*S[tv];0==x[t_]&&(k=!0)}if((k||L)&&(m.fillStyle=this.isDarkMode?"#242f3e":"#fff",m.fillRect(0,0,_.w*$,_.h*$)),f>0&&!h){if(1==y&&(this.savedX1=o,this.savedX2=r),y<1){var C=this.opts.animator.get("x1"),z=this.opts.animator.get("x2");x1End=C?C.end:this.opts.state.x1,x2End=z?z.end:this.opts.state.x2;var F=t.TUtils.getXIndex(g,-1==this.opts.state.zoomDir?this.savedX1:x1End,!0),Y=t.TUtils.getXIndex(g,-1==this.opts.state.zoomDir?this.savedX2:x2End,!0)}else var F=t.TUtils.getXIndex(g,o,!0),Y=t.TUtils.getXIndex(g,r,!0);var X=Math.floor(F),H=Math.ceil(F),U=Math.floor(--Y),G=Math.ceil(Y),N=0,O=[];for(tv=0;tv<A;tv++){O[tv]=0;var W=e[M[tv]].y;for(t_=H;t_<=U;t_++){var B=(W[t_]||0)*S[tv];O[tv]+=B,N+=B}var B=(H-F)*(W[X]||0)*S[tv];O[tv]+=B,N+=B;var B=(Y-U)*(W[G]||0)*S[tv];O[tv]+=B,N+=B}var V=1==this.opts.state.zoomDir?Math.pow(Math.min(Math.max(y<.85?(y-.65)/.2:1-(y-.9)/.15,0),1),.8):this.prevElastic,Z=2*Math.PI-Math.PI/(7-y)-Math.PI/8*V,q=Z;1==this.opts.state.zoomDir?(y=Math.min(Math.max((y-.25)/.4,0),1),this.prevElastic=V):y=Math.min(Math.max(2.4*y-1.4,0),1);var J=[],K=n.PIE_RADIUS*(f<1?2.31:1)*$,Q=$*(_.w/2+_.l),tt=$*(_.h/2+_.t+2),ts=2*Math.PI*K/$,ti=1/13;for(tv=0;tv<A;tv++){var te=O[tv]/N,ta=2*Math.PI*(te=te||0),th=Z-ta,to=Math.round(te*ts*ti);tv==A-1&&(th=q-2*Math.PI);var tr=.2*Math.PI/ts,tn=e[M[tv]];J.push({st:Z+tr,ed:th-tr,mid:Z-ta/2-tr/2,additionalPoints:Math.max(to,4),percentage:0==te?0:Math.max(Math.round(100*te),1),percentageText:0==te?"":te<.01?"<1%":Math.round(100*te)+"%",ind:M[tv],value:O[tv],label:tn.label,color:this.isDarkMode?tn.colors_n[2]:tn.colors_d[2]}),Z=th}a.pieAngles=J}t0=$*(_.h-d-p+(h?0:-4)),tS=(_.h-p+(h?0:_.t))*$;var td=0;for(tv=0;tv<T;tv++)if((ty=h?a["om_"+tv]:a["o_"+tv])>0){tf=R[tv].y;var tl=ty*t0;if(m.fillStyle=this.isDarkMode?e[tv].colors_n[0]:e[tv].colors_d[0],m.globalAlpha=.9*a["f_"+tv]+.1,m.beginPath(),0!=f&&h){var tp=this.opts.data.mainPeriodLen*tb;if(m.moveTo(P[tw]*tb+tp+tM,hBottom-u[tw]),tv>0)for(m.lineTo(P[tw]*tb+tM,hBottom-u[tw]),t_=tw;t_>=tD+1;t_--)m.lineTo(P[t_]*tb+tM,hBottom-(u[t_]+y*(u[t_-1]-u[t_]))+0),m.lineTo(P[t_-1]*tb+tM,hBottom-u[t_-1]+0);else m.lineTo(P[tD]*tb+tM,hBottom);if(td<A-1)for(t_=tD;t_<=tw-1;t_++){var tc=tS-(tf[t_]*tl/x[t_]||0),tg=hBottom-tc;t_==tD&&m.lineTo(P[tD]*tb+tM,hBottom-u[tD]-tg);var tc=tS-(tf[t_+1]*tl/x[t_+1]||0),t$=hBottom-tc,tm=u[t_]+tg,tu=u[t_+1]+t$;m.lineTo(P[t_+1]*tb+tM,hBottom-(tu+y*(tm-tu))),m.lineTo(P[t_+1]*tb+tM,hBottom-tu),t_==tw-1&&m.lineTo(P[tw]*tb+tp+tM,hBottom-u[tw]-t$),u[t_]+=tg}else m.lineTo(P[tD]*tb+tM<<0,hBottom-t0<<0),m.lineTo(P[tw]*tb+tM<<0,hBottom-t0<<0);u[tw]+=t$}else if(0==f){if(tv>0)for(m.moveTo(P[tw]*tb+tM<<0,hBottom-u[tw]+0<<0),t_=tw-1;t_>=tD;t_--)m.lineTo(P[t_]*tb+tM<<0,hBottom-u[t_]+0<<0);else m.moveTo(P[tw]*tb+tM<<0,hBottom<<0),m.lineTo(P[tD]*tb+tM<<0,hBottom<<0);if(td<A-1||k)for(t_=tD;t_<=tw;t_++){var tc=tS-(tf[t_]*tl/x[t_]||0),tg=hBottom-tc,tx=u[t_]+tg;tx>t0&&(tx=t0),m.lineTo(P[t_]*tb+tM<<0,hBottom-tx<<0),u[t_]+=tg}else m.lineTo(P[tD]*tb+tM<<0,hBottom-t0<<0),m.lineTo(P[tw]*tb+tM<<0,hBottom-t0<<0)}else{var tv,t_,tf,ty,tT,t8,tb,t0,tM,tS,tD,tw,tI,t9,tL,tA=function(t,s,e,a){var h=0,o=0;tk&&w>1&&(h=Math.cos(J[td].mid)*tk*8*$,o=-Math.sin(J[td].mid)*tk*8*$),a>K&&(a=K);var r=Math.atan2(tt-s,t-Q),n=Math.pow((tt-s)*(tt-s)+(t-Q)*(t-Q),.5);Math.abs(e-(r=r<0?2*Math.PI+r:r))>Math.PI*(1==A?1.5:1)&&(e-=2*Math.PI),e<-(2*Math.PI)&&(e-=-(2*Math.PI));var d=r+y*(e-r),l=n+y*(a-n);return[Q+Math.cos(d)*l+h,tt-Math.sin(d)*l+o]},tE=f<1?4:J[td].additionalPoints,tP=!1,tR=!1,tk=a["pieInd_"+M[td]]||0;if(0==J[td].percentage&&(m.globalAlpha=0),tI=tA(P[tw]*tb+tM,hBottom-u[tw],J[0].st,K),m.moveTo(tI[0],tI[1]),td>0)for(t_=tw-1;t_>=tD;t_--){if((tL=P[t_]*tb+tM)==Q&&(tP=!0),tL>=Q)t9=(tL-Q)/(_.w*$/2),0==y&&(t9=0),tI=tA(tL,hBottom-u[t_]+0,J[0].st,K*t9);else{if(!tP){tP=!0;var tC=(Q-tL)/(P[t_+1]*tb+tM-tL),tz=hBottom-u[t_]+0,tF=hBottom-u[t_+1]+0;tI=tA(Q,tz+tC*(tF-tz),J[td].st,0),m.lineTo(tI[0],tI[1])}t9=(Q-tL)/(_.w*$/2),tI=tA(tL,hBottom-u[t_]+0,J[td].st,K*t9)}m.lineTo(tI[0],tI[1])}else tI=tA(P[tD]*tb+tM,hBottom,J[0].st,K),m.lineTo(tI[0],tI[1]);if(td<A-1){for(t_=0;t_<=tE;t_++){var tc=tS-(tf[tD]*tl/x[tD]||0),tg=hBottom-tc,tz=hBottom-u[tD]+0,tF=hBottom-u[tD]-tg;tI=tA(P[tD]*tb+tM,tz+t_/tE*(tF-tz),J[td].st+t_/tE*(J[td].ed-J[td].st),K),m.lineTo(tI[0],tI[1])}for(t_=tD;t_<=tw;t_++){var tc=tS-(tf[t_]*tl/x[t_]||0),tg=hBottom-tc;if((tL=P[t_]*tb+tM)==Q&&(tR=!0),tL<=Q){t9=(Q-tL)/(_.w*$/2);var tY=tL,tX=hBottom-u[t_]-tg;tI=tA(tL,tX,J[td].ed,K*t9)}else{if(!tR){tR=!0;var tC=(Q-tY)/(tL-tY),tz=tX,tF=hBottom-u[t_]-tg;tI=tA(Q,tz+tC*(tF-tz),J[td].ed,0),m.lineTo(tI[0],tI[1])}t9=(tL-Q)/(_.w*$/2),0==y&&(t9=0),tI=tA(tL,hBottom-u[t_]-tg,J[0].st,K*t9)}m.lineTo(tI[0],tI[1]),u[t_]+=tg}tL<Q&&!tR&&(tI=tA(Q,tz,J[td].ed,0),m.lineTo(tI[0],tI[1]))}else for(t_=0;t_<=tE;t_++)tI=tA((P[tD]+t_/tE*(P[tw]-P[tD]))*tb+tM,0,J[td].st+t_/tE*(J[0].st-2*Math.PI-J[td].st),K),m.lineTo(tI[0],tI[1])}if(m.closePath(),m.fill(),!h&&f>0&&J[td].percentageText){var t3=Math.pow(y,1==this.opts.state.zoomDir?4:20)*ty*(.9*a["f_"+tv]+.1),tH=Math.max(Math.min(2*J[td].percentage,26),10),tU=n.PIE_RADIUS,t1=2*tU/3,tG=Math.cos(J[td].mid),tN=Math.sin(J[td].mid),tO=J[td].percentage<s.data.pieLabelsPercentages.outboard,tW=0,tx=0;if(tk&&w>1&&(tW=tG*tk*8*$,tx=-tN*tk*8*$),m.fillStyle="white",m.textAlign="center",m.globalAlpha=t3,J[td].percentage<s.data.pieLabelsPercentages.hoverOnly&&(m.globalAlpha=tk*t3),tO){var tH=Math.max(tH,14);t1=tU+tH/3+13,m.fillStyle=this.isDarkMode?e[tv].colors_n[0]:e[tv].colors_d[0],m.lineWidth=1,m.strokeStyle=this.isDarkMode?e[tv].colors_n[0]:e[tv].colors_d[0];var t2=Q+tW+tG*(tU-1)*$,tB=tt+tx-tN*(tU-1)*$,tV=Q+tW+tG*(tU+6*(1-tk)-1)*$,t4=tt+tx-tN*(tU+6*(1-tk)-1)*$;m.beginPath(),m.moveTo(t2,tB),m.lineTo(tV,t4),m.stroke()}var t5=tG*t1*(I==td?D:1),tZ=Q+tW+t5*$+(tO?tH/4*J[td].percentageText.length*t5/t1*$:0),t7=tt+tx-tN*t1*(I==td?D:1)*$;m.font="bold "+tH*$+"px "+s.settings.FONTS,m.fillText(J[td].percentageText,tZ,t7+tH*$/2.9),m.globalAlpha=1}td++}m.globalAlpha=1,h&&this.opts.ctx.drawImage(this.$canvas,_.l*$,_.t*$)}},t.TAreas=s}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,this.ctx=t.ctx,this.items={},this.setAnimation(!1),this.deleteItem=this.deleteItem.bind(this)};s.prototype={onResize:function(){this.setAnimation(!1)},setDarkMode:function(t){this.isDarkMode=t},setAnimation:function(t){this.noAnimation=!t},hideItem:function(t,s){this.items[t].tp=2,this.opts.animator.add([{prop:"ox_"+t,state:this.items[t].state,end:0,duration:this.noAnimation?0:200*s,tween:"linear",group:{top:!0},cbEnd:this.deleteItem}])},deleteItem:function(t){delete this.items[t.ind]},render:function(s){var e,a=this.opts,h=a.settings.dpi,o=a.data.x,r=a.state,n=a.settings.PADD[1],d=a.settings.PADD[3],l=a.animator;o.length;var p=this.opts.state.dims.axisX,c=this.opts.state.dims.dates,g=r.zoomMode,$=void 0==r.zoomMorph?0:r.zoomMorph,m=Math.floor(t.TUtils.getXIndex(o,r.x1)),u=Math.ceil(t.TUtils.getXIndex(o,r.x2)),x=m,_=u,f="bar"==a.graphStyle||"step"==a.graphStyle,y=(r.zoomMode&&a.data.details?a.data.details.maxXTickLength:a.data.maxXTickLength)*9,T=f?this.opts.data.mainPeriodLen:0,b=f?this.opts.data.detailPeriodLen:0,M=T+(b-T)*$,S=(p.w-n-d)/Math.round((r.x2-r.x1+T)/this.opts.data.mainPeriodLen),D=(p.w-n-d)/Math.round((r.x2-r.x1+b)/this.opts.data.detailPeriodLen),w=S+(D-S)*$,I=Math.pow(2,Math.ceil(Math.log2(y/S))),L=Math.pow(2,Math.ceil(Math.log2(y/D))),A=(p.w-d-n)/(r.x2-r.x1+T*(1-$));I<1&&(I=1),L<1&&(L=1),this.ctx.font=11*h+"px "+a.settings.FONTS,this.ctx.textAlign="center",this.ctx.fillStyle=this.isDarkMode?this.opts.data.axis_n.x:this.opts.data.axis_d.x;var E=1/Math.pow(this.prevXStep?this.prevXStep>S?this.prevXStep/S:S/this.prevXStep:1,5);g&&1==$&&(E/=2),this.prevXStep=S;var m=Math.max(m-Math.ceil((d+.5*y)/w),0),u=Math.min(u+Math.ceil((n+.5*y)/w),o.length-1);if(g){var P=this.opts.animator.get("x1"),R=this.opts.animator.get("x2");x=P?P.end:this.opts.state.x1,_=R?R.end:this.opts.state.x2,x=Math.floor(t.TUtils.getXIndex(o,x)),_=Math.floor(t.TUtils.getXIndex(o,_))}if(g)var k=Math.max(o[this.opts.state.detailInd1],this.opts.state.xMainMin),C=Math.round((Math.min(o[this.opts.state.detailInd2],this.opts.state.xMainMax)-k)/this.opts.data.mainPeriodLen)+(f?0:1);for(var z=m;z<=u;z++){var F=z%I==0,Y="m";g&&(z<this.opts.state.detailInd1?F=z%I==0&&$<1:z<=this.opts.state.detailInd2?(F=Math.max(z-this.opts.state.detailInd1,0)%L==0,Y="d"):F=Math.max(z-(this.opts.state.detailInd2-this.opts.state.detailInd1+1-C),0)%I==0&&$<1);var X=o[z]+Y,H=this.items[X];if(F?H?2==H.tp&&(H.tp=1,l.add([{prop:"ox_"+X,state:H.state,end:1,duration:this.noAnimation?0:200*E,tween:"linear",group:{top:!0}}])):((H={tp:1,xi:o[z],i:z,state:{ind:X}}).state["ox_"+X]=0,this.items[X]=H,l.add([{prop:"ox_"+X,state:H.state,end:1,duration:this.noAnimation?0:200*E,tween:"linear",group:{top:!0}}])):H&&1==H.tp&&this.hideItem(X,E),H&&H.state["ox_"+X]>0){var U=(H.xi-r.x1+M/2)*A+d;if(this.ctx.globalAlpha=H.state["ox_"+X]*s,U+y/2>=p.l&&U-y/2<=p.l+p.w){var G=(U+p.l)*h;this.ctx.fillText(a.data.datesShort[z],G,(p.t+9)*h)}}}for(z in this.items){var H=this.items[z];1==H.tp&&(H.xi<r.x1-d/A||H.xi>r.x2+n/A)&&this.hideItem(z,E)}this.ctx.globalAlpha=1,g&&1==$&&_--,_<x&&(_=x),e=a.data.datesRange[x]==a.data.datesRange[_]?a.data.datesRange[x]:a.data.datesRange[x]+" – "+a.data.datesRange[_];var N=13;p.w<375&&(N=11),this.ctx.font="bold "+N*h+"px "+a.settings.FONTS,this.ctx.textAlign="right",this.ctx.fillStyle=this.isDarkMode?"#fff":"#000",this.ctx.fillText(e,(c.l+c.w)*h,(c.t+c.h-7)*h)}},t.TAxisX=s}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,this.ctx=t.ctx,this.uuid=1,this.items={},this.setAnimation(!1),this.setForceUpdate(!1),this.deleteItem=this.deleteItem.bind(this)};s.prototype={onResize:function(){this.setAnimation(!1),this.setForceUpdate(!1)},setDarkMode:function(t){this.isDarkMode=t},setAnimation:function(t){this.noAnimation=!t},setForceUpdate:function(t){this.forceUpdate=t},deleteItem:function(t){delete this.items[t.id]},render:function(t){var s,e;this.opts.pairY?(s=this.calcAxisData("y1_0","y2_0"),(e=this.calcAxisData("y1_1","y2_1")).needAnimation&&!s.needAnimation||this.opts.state.o_0<1?this.updateAxisState("y1_1","y2_1","numRight",e,s,e):this.updateAxisState("y1_0","y2_0","numLeft",s,s,e)):(s=this.calcAxisData("y1","y2"),this.updateAxisState("y1","y2","numLeft",s,s,s)),this.renderState(t)},calcAxisData:function(t,s){var e=this.opts.state,a=this.opts.settings.PADD[0],h=this.opts.settings.PADD[2];this.opts.settings.Y_AXIS_RANGE;var o=!1,r=this.opts.animator.get(t),n=this.opts.animator.get(s),d=r?r.end:e[t],l=n?n.end:e[s],p=Math.round((l-d)/this.opts.settings.Y_AXIS_RANGE),c=e[s]-e[t],g=e[t]>d?e[t]/d:d/e[t],$=e[s]>l?e[s]/l:l/e[s],m=(this.opts.state.dims.axisYLines.h-a-h)/c,u=(this.opts.state.dims.axisYLines.h-a-h)/(l-d);return(g>1.05||$>1.05||this.forceUpdate)&&(o=!0),{needAnimation:o=this.items[0]&&o&&!this.noAnimation&&!this.animationInProgress,y1:d,y2:l,yRealStep:p,yRealStart:d,yScaleCur:m,yScaleEnd:u}},updateAxisState:function(s,e,a,h,o,r){var n,d=this.opts;d.settings,d.settings.dpi;var l=d.state;d.settings.PADD[0];var p=d.settings.PADD[2];d.settings.PADD[3],d.settings.PADD[1];var c=d.animator,g=Math.floor(d.settings.Y_AXIS_RANGE),$=!1,m=this.opts.state.dims.axisYLines;h.needAnimation&&(this.animationInProgress=!0);for(var u=0;u<=g;u++){var x=h.yRealStart+Math.round(h.yRealStep*u),_=o.yRealStart+Math.round(o.yRealStep*u),f=r.yRealStart+Math.round(r.yRealStep*u),y=t.TUtils.getFormatter("yTickFormatter",d.data,l.zoomMorph),T=y(_,o.yRealStep),b=y(Math.max(f,0),r.yRealStep,!0);if(h.needAnimation){var M=m.t+m.h-p-(x-h.y1)*h.yScaleEnd,S=m.t+m.h-p-(this.items[u][a]-h.y1)*h.yScaleEnd,D=m.t+m.h-p-(x-l[s])*h.yScaleCur,w=m.t+m.h-p-(x-h.y1)*h.yScaleEnd;1>Math.abs(S-w)?this.items[u]={numLeft:_,strLeft:T,numRight:f,strRight:b,y:w}:($=!0,this.uuid++,(n={animated:!0,strLeft:this.items[u].strLeft,strRight:this.items[u].strRight,oProp:"oyt_"+this.uuid,yProp:"yyt_"+this.uuid,state:{id:"t_"+this.uuid}}).state[n.oProp]=1,n.state[n.yProp]=M,this.items[n.state.id]=n,c.add([{prop:n.oProp,state:n.state,end:0,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:n.yProp,state:n.state,end:S,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:this.deleteItem}]),delete this.items[u],this.uuid++,(n={animated:!0,strLeft:T,strRight:b,oProp:"oy_"+u,yProp:"yy_"+u,state:{id:u,numLeft:_,strLeft:T,numRight:f,strRight:b}}).state[n.oProp]=0,n.state[n.yProp]=D,this.items[n.state.id]=n,c.add([{prop:n.oProp,state:n.state,end:1,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:n.yProp,state:n.state,end:w,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:(function(t){this.items[t.id]={numLeft:t.numLeft,strLeft:t.strLeft,numRight:t.numRight,strRight:t.strRight,y:t["yy_"+t.id]},clearTimeout(this.animationEndTimeout),this.animationEndTimeout=setTimeout((function(){this.animationInProgress=!1}).bind(this),30)}).bind(this)}]))}else this.items[u]&&this.items[u].animated?(this.items[u].numLeft=_,this.items[u].strLeft=T,this.items[u].numRight=f,this.items[u].strRight=b,this.items[u].state.numLeft=_,this.items[u].state.strLeft=T,this.items[u].state.numRight=f,this.items[u].state.strRight=b):this.items[u]={numLeft:_,strLeft:T,numRight:f,strRight:b,y:m.t+m.h-p-(x-h.y1)*h.yScaleEnd}}h.needAnimation&&!$&&(this.animationInProgress=!1),this.forceUpdate=!1},renderState:function(t){var s,e,a,h,o=this.opts.settings.dpi,r=this.opts.state.dims.axisYLeft,n=this.opts.state.dims.axisYRight,d=this.opts.state.dims.axisYLines,l=this.opts.data.ys;for(s in this.ctx.font=11*o+"px "+this.opts.settings.FONTS,this.ctx.strokeStyle=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)",this.ctx.lineWidth=1*o,this.ctx.lineCap="square",this.ctx.lineJoin="square",this.items)(h=this.items[s]).animated?(a=h.state[h.yProp],e=h.state[h.oProp]):(a=h.y,e=1),a-6>=0&&a-16<=r.h&&(this.ctx.globalAlpha=e*(this.opts.pairY?this.opts.state.o_0:1)*t,this.ctx.textAlign="left",this.opts.pairY?this.ctx.fillStyle=this.isDarkMode?l[0].colors_n[1]:l[0].colors_d[1]:this.ctx.fillStyle=this.isDarkMode?this.opts.data.axis_n.y:this.opts.data.axis_d.y,this.ctx.fillText(h.strLeft,r.l*o,(a-7)*o),this.opts.pairY&&(this.ctx.globalAlpha=e*this.opts.state.o_1*t,this.ctx.textAlign="right",this.ctx.fillStyle=this.isDarkMode?l[1].colors_n[1]:l[1].colors_d[1],this.ctx.fillText(h.strRight,(n.l+n.w)*o,(a-7)*o))),(a=(a<<0)-.5)>=0&&a<=r.h&&(this.ctx.beginPath(),this.ctx.globalAlpha=e*t,this.ctx.moveTo(d.l*o,a*o),this.ctx.lineTo((d.l+d.w)*o,a*o),this.ctx.stroke());this.ctx.globalAlpha=1}},t.TAxisY=s}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,this.filteredX1=[],this.filteredX2=[],this.filteredJ=[],this.prevY=[],this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!1})};s.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached=""},setDarkMode:function(t){this.isDarkMode=t},render:function(){var s=this.opts,e=s.data.ys,a=s.state,h=s.additional.mini,o=h?a.xg1:a.x1,r=h?a.xg2:a.x2,n=s.settings;this.w,this.h;var d=n["PADD"+(h?"_MINI_BAR":"")][0],l=n["PADD"+(h?"_MINI_BAR":"")][1],p=n["PADD"+(h?"_MINI_BAR":"")][2],c=n["PADD"+(h?"_MINI_BAR":"")][3],g=s.data.x,$=s.settings.dpi,m=this.ctx,u=h?a.dims.mini:a.dims.graph,x=a.zoomMode,_=a.detailInd1,f=a.detailInd2,y=void 0==a.zoomMorph?0:a.zoomMorph,T=this.filteredX1,b=this.filteredX2,M=this.filteredJ,S=this.prevY,D=e.length,w=[u.w,u.h,h?a.xg1:a.x1,h?a.xg2:a.x2,this.isDarkMode,x];for(h||(w.push(a.y1),w.push(a.y2)),R=0;R<D;R++)w.push(h?a["om_"+R]:a["o_"+R]),w.push(a["f_"+R]);if((w=w.join(","))!=this.cached||(this.opts.ctx.drawImage(this.$canvas,u.l*$,u.t*$),!h)){X=(u.w-l-c)/(r-o+this.opts.data.mainPeriodLen*(1-y)),B=Math.floor(t.TUtils.getXIndex(g,o-c/X)),V=Math.ceil(t.TUtils.getXIndex(g,r+l/X)),x&&1==y&&(B<this.opts.state.xg1Ind&&(B=this.opts.state.xg1Ind),V>this.opts.state.xg2Ind&&(V=this.opts.state.xg2Ind-1)),X*=$,U=c*$-o*X,O=(u.h-p)*$;var I=this.opts.data.mainPeriodLen*X,L=this.opts.data.detailPeriodLen*X;if(w!=this.cached){m.fillStyle=this.isDarkMode?"#242f3e":"#fff",m.fillRect(0,0,u.w*$,u.h*$);var A=0;for(k=B;k<=V;k++){N=x&&k>=_&&k<=f?L:I;var E=Math.round(g[k]*X+U),P=Math.round(g[k]*X+U+N);P-E>0&&(T[A]=E,b[A]=P,M[A]=k,S[A]=0,A++)}for(R=0;R<D;R++)if((z=h?a["om_"+R]:a["o_"+R])>0){C=e[R].y,W=e[R].yFrom,F=h?a.y1m:a.y1,Y=h?a.y2m:a.y2,H=$*(u.h-d-p)/(Y-F),G=(u.h-p)*$+F*H;var R,k,C,z,F,Y,X,H,U,G,N,O,W,B,V,Z,q=z*H;if(m.fillStyle=this.isDarkMode?e[R].colors_n[0]:e[R].colors_d[0],m.globalAlpha=.9*a["f_"+R]+.1,m.beginPath(),m.moveTo(Math.round(g[V]*X+U+(1==y?L:I)),Math.round(O)),R>0)for(k=A-1;k>=0;k--){var J=O-S[k];m.lineTo(b[k],Math.round(J)),m.lineTo(T[k],Math.round(J))}else m.lineTo(Math.round(g[B]*X+U),Math.round(O));for(k=0;k<A;k++){var K=M[k],J=G-(Z=(Z=x?K>=_&&K<=f?W[K]+y*(C[K]-W[K]):C[K]+y*(C[_]-C[K]):C[K])||0)*q,Q=O-J;S[k]+=Q,m.lineTo(T[k],Math.round(O-S[k])),m.lineTo(b[k],Math.round(O-S[k]))}m.closePath(),m.fill()}m.globalAlpha=1,this.opts.ctx.drawImage(this.$canvas,u.l*$,u.t*$)}if(a.barInd>-1&&!h){this.opts.ctx.fillStyle=this.isDarkMode?"rgba(36, 47, 62, 0.5)":"rgba(255, 255, 255, 0.5)",this.opts.ctx.globalAlpha=a.barO,this.opts.ctx.fillRect(0,0,u.w*$,u.h*$);var tt=0;for(R=0;R<D;R++)if((z=a["o_"+R])>0){C=e[R].y,W=e[R].yFrom,F=a.y1,Y=a.y2,H=$*(u.h-d-p)/(Y-F),G=(u.h-p)*$+F*H;var q=z*H;this.opts.ctx.fillStyle=this.isDarkMode?e[R].colors_n[0]:e[R].colors_d[0],this.opts.ctx.globalAlpha=.9*a["f_"+R]+.1,x?a.barInd>=_&&a.barInd<=f?(Z=W[a.barInd]+y*(C[a.barInd]-W[a.barInd]),N=L):(N=I,Z=C[a.barInd]+y*(C[_]-C[a.barInd])):(Z=C[a.barInd],N=I);var ts=O-(G-(Z=Z||0)*q)+tt;this.opts.ctx.fillRect(Math.round(g[a.barInd]*X+U),Math.round(O-tt+u.t*$),Math.max(Math.round(N),1),Math.round(tt)-Math.round(ts)),tt=ts}m.globalAlpha=1}this.cached=w}}},t.TBars=s}(),function(){var t=window.Graph.units,s=function(s){this.state={},this.state.masterVisibility=1,this.state.slaveVisibility=0,this.specialZoomTransition=void 0,this.darkMode=!!document.documentElement.classList.contains("dark");var e=11>(!!window.ActiveXObject&&+/msie\s(\d+)/i.exec(navigator.userAgent)[1]||NaN),a=-1!=navigator.userAgent.indexOf("Trident/")&&(-1!=navigator.userAgent.indexOf("rv:")||-1!=navigator.appName.indexOf("Netscape")),h=s.data.xRangeFormatter==statsFormatEmpty;this.settings={isIE:e||a,isEdge:/Edge\/\d./i.test(navigator.userAgent),dpi:Math.min(window.devicePixelRatio||1,2),Y_AXIS_RANGE:5.3,PADD:[20,16,20,16],PADD_MINI:[2,0,2,0],PADD_MINI_BAR:[0,0,0,0],PADD_MINI_AREA:[0,0,0,0],Y_LABELS_WIDTH:50,X_LABELS_HEIGHT:12,DATES_HEIGHT:h?0:18,DATES_WIDTH:300,MINI_GRAPH_HEIGHT:40,MINI_GRAPH_TOP:14,MINI_GRAPH_BOTTOM:2,FADE_HEIGHT:16,PIE_RADIUS:130,FONTS:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif'},this.data={caption:s.data.title,detailsFunc:s.data.x_on_zoom,hasDetail:!!s.data.x_on_zoom,slave:s.slave,yTickFormatter:s.data.yTickFormatter,yTooltipFormatter:s.data.yTooltipFormatter,yCustomTooltipFormatters:s.data.yCustomTooltipFormatters,yMinStep:s.data.yMinStep,xTickFormatter:s.data.xTickFormatter,xTooltipFormatter:s.data.xTooltipFormatter,xRangeFormatter:s.data.xRangeFormatter,strokeWidth:s.data.strokeWidth||"auto",hidden:s.data.hidden||[],tooltipOnHover:!!s.data.tooltipOnHover,forceLegend:s.data.forceLegend,sideLegend:s.data.sideLegend||!1,pieZoomRange:s.data.pieZoomRange||6048e5,pieLabelsPercentages:{outboard:s.data.pieLabelsPercentages&&void 0!=s.data.pieLabelsPercentages.outboard?s.data.pieLabelsPercentages.outboard:5,hoverOnly:s.data.pieLabelsPercentages&&void 0!=s.data.pieLabelsPercentages.hoverOnly?s.data.pieLabelsPercentages.hoverOnly:2},subchart:{show:!s.data.subchart||void 0==s.data.subchart.show||s.data.subchart.show,defaultZoom:s.data.subchart&&s.data.subchart.defaultZoom}},s.data.y_scaled&&(this.pairY=!0),this.graphStyle="line";var o=this.settings;s.data.columns.forEach((function(e,a){var h=e.shift(),o=s.data.types[h];if("x"===o){this.data.x=e,this.state.xCount=e.length,this.state.x1=e[.75*e.length<<0],this.state.x2=e[e.length-1],this.state.xg1=e[0],this.state.xg2=e[e.length-1],this.state.xg1Ind=0,this.state.xg2Ind=e.length-1,this.state.xMainMin=e[0],this.state.xMainMax=e[this.state.xg2Ind],this.state.xgMin=e[0],this.state.xgMax=e[this.state.xg2Ind];var r=this.getDefaultZoom({x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,default:this.data.subchart.defaultZoom});this.state.x1=r.x1,this.state.x2=r.x2,this.data.mainPeriodLen=this.data.x[1]-this.data.x[0],this.data.detailPeriodLen=this.data.mainPeriodLen,this.data.dates=[],this.data.datesShort=[],this.data.datesRange=[];var n=t.TUtils.getFormatter("xTooltipFormatter",this.data,0),d=t.TUtils.getFormatter("xTickFormatter",this.data,0),l=t.TUtils.getFormatter("xRangeFormatter",this.data,0),p=0;e.forEach((function(t,s){this.data.dates[s]=n(t,!1),this.data.datesShort[s]=d(t,!1),this.data.datesRange[s]=l(t,!1),this.data.datesShort[s].length>p&&(p=this.data.datesShort[s].length)}).bind(this)),this.data.maxXTickLength=p}if("x"!==o){this.data.ys=this.data.ys||[],this.data.yIds=this.data.yIds||{};var c=s.data.colors[h],g=s.data.yCustomTooltipFormatters?s.data.yCustomTooltipFormatters[h]:null;this.data.ys.push({colors_d:[c,c,c],colors_n:[c,c,c],label:s.data.names[h],y:e,ctf:g,tp:o,id:h}),"line"==o||"step"==o?(this.data.axis_d={x:"#8E8E93",y:"#8E8E93"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(163,177,194,0.6)"}):(this.data.axis_d={x:"rgba(37,37,41,0.5)",y:"rgba(37,37,41,0.5)"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(236,242,248,0.5)"});var $=this.data.ys.length-1,m=-1==this.data.hidden.indexOf(h);this.data.yIds[h]=$,this.state["e_"+$]=m,this.state["o_"+$]=m?1:0,this.state["om_"+$]=m?1:0,this.state["pieInd_"+$]=0,this.state["f_"+$]=1,this.graphStyle=o}}).bind(this)),this.state.activeColumnsCount=this.data.ys.length,this.updateSpeed(),"area"==this.graphStyle&&(o.Y_AXIS_RANGE=4.06,this.data.hasDetail=!0);var r=this.reduceGlobalRange({});r.isReduced&&(this.state.x1=r.x1,this.state.x2=r.x2,this.state.xg1=r.xg1,this.state.xg2=r.xg2,this.state.xg1Ind=r.xg1Ind,this.state.xg2Ind=r.xg2Ind),this.onResize=this.onResize.bind(this),this.onSwitcherChange=this.onSwitcherChange.bind(this),this.onSwitcherEnter=this.onSwitcherEnter.bind(this),this.onSwitcherLeave=this.onSwitcherLeave.bind(this),this.onHandleMove=this.onHandleMove.bind(this),this.toggleZoom=this.toggleZoom.bind(this),this.createDOM(s.container),window.addEventListener("resize",this.onResize),document.addEventListener("darkmode",(function(t){this.setDarkMode(!this.darkMode)}).bind(this),!1),document.addEventListener("chart-hide-tips",(function(t){t.detail.except!=this&&this.tip.toggle(!1)}).bind(this),!1),this.opts=s,this.onResize(),this.darkMode&&this.setDarkMode(this.darkMode),window.matchMedia("(-webkit-min-device-pixel-ratio: 1), (min-resolution: 96dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").addListener(this.onResize),window.matchMedia("(-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi)").addListener(this.onResize)};s.prototype={reduceGlobalRange:function(s){var e=void 0==s.x1?this.state.x1:s.x1,a=void 0==s.x2?this.state.x2:s.x2,h=void 0==s.xg1?this.state.xg1:s.xg1,o=void 0==s.xg2?this.state.xg2:s.xg2,r=s.useSaved?this.data.saved.x:this.data.x,n=Math.floor(t.TUtils.getXIndex(r,this.state.xgMin)),d=Math.ceil(t.TUtils.getXIndex(r,this.state.xgMax)),l=d,p=n,c=this.state.zoomMode?"bar"==this.graphStyle||"step"==this.graphStyle?1:2:0;if("area"==this.graphStyle&&(c=0),this.data.ys.forEach((function(t,e){var a=s.useSaved?this.data.saved.y[e]:t.y;if(this.state["e_"+e])for(i=n;i<=d-c;i++)void 0!=(v=a[i])&&(l=Math.min(l,i),p=Math.max(p,i))}).bind(this)),p+c==d&&(p=d-Math.max(c-1,0)),l>=p)return{isReduced:!1};var g=r[l],$=r[p];return h==g&&o==$?{isReduced:!1}:(a>$?(e=$-(a-e),a=$,e<g&&(e=g)):e<g&&(a=g+(a-e),e=g,a>$&&(a=$)),{isReduced:!0,x1:e,x2:a,xg1:g,xg2:$,xg1Ind:l,xg2Ind:p})},getDefaultZoom:function(t){if(!t.default)return{x1:t.x1,x2:t.x2};var s={};return s.x1=t.default[0],s.x2=t.default[1],s.x1=Math.max(s.x1,t.xg1),s.x2=Math.min(s.x2,t.xg2),s.x1>=s.x2&&(s.x1=t.xg1,s.x2=t.xg2),s},updateSpeed:function(t){var s=this.state.activeColumnsCount*this.state.xCount*Math.pow((this.state.x2-this.state.x1)/(this.state.xMainMax-this.state.xMainMin),.5),e=Math.max(1-.25*(this.state.deviceSpeed*s/16.66<<0),0);return e=Math.pow(e,.85),void 0==this.state.deviceSpeed&&(t=1),t=1,this.state.speed=void 0==t?e:t,this.state.speed},getYMinMax:function(s,e,a,h,o){if("area"==this.graphStyle)return{min:0,max:102};var r,n,d,l,p,c,g=this.state.dims?this.state.dims.graph.w:this.getGraphWidth(this.data.sideLegend).width,$=Number.MAX_VALUE,m=-Number.MAX_VALUE,u=(e-s)/g,x=t.TUtils.getXIndex(o?this.data.saved.x:this.data.x,s-u*this.settings.PADD[3]),_=t.TUtils.getXIndex(o?this.data.saved.x:this.data.x,e+u*this.settings.PADD[1]),f=this.data.yMinStep||1,y=[],T=[],b=this.settings,M=this.state;!o&&this.state.zoomMode?(x=Math.max(x,this.state.detailInd1),_=Math.min(_,this.state.detailInd2)):(x=Math.max(x,0),_=Math.min(_,this.data.x.length-1));var S=Math.floor(x),D=Math.ceil(x),w=Math.floor(_),I=Math.ceil(_);if(("line"==this.graphStyle||"step"==this.graphStyle)&&this.data.ys.forEach((function(t,s){var e=o?this.data.saved.y[s]:t.y,a="step"==this.graphStyle?S:D,h="step"==this.graphStyle?I:w;if(M["e_"+s]||0==s&&this.pairY){for(r=a;r<=h;r++)void 0!==(n=e[r])&&(n<$&&($=n),n>m&&(m=n));"line"==this.graphStyle&&(void 0!==e[S]&&void 0!==e[D]&&((d=e[S]+(x-S)*(e[D]-e[S]))<$&&($=d),d>m&&(m=d)),void 0!==e[w]&&void 0!==e[I]&&((l=e[w]+(_-w)*(e[I]-e[w]))<$&&($=l),l>m&&(m=l)))}if(this.pairY){var p=P($,m,s,c);y[s]=p.min,T[s]=p.max,$=Number.MAX_VALUE,m=-Number.MAX_VALUE}}).bind(this)),"bar"==this.graphStyle){var L=[];for(p=0;p<this.data.ys.length;p++)M["e_"+p]&&L.push(p);var A=L.length;for(r=S;r<=I;r++){for(p=0,yCur=0;p<A;p++)yCur+=(o?this.data.saved.y[L[p]][r]:this.data.ys[L[p]].y[r])||0;yCur>m&&(m=yCur)}$=0}if(this.pairY)return isNaN(y[0])&&(y[0]=y[1]),isNaN(y[1])&&(y[1]=y[0]),isNaN(T[0])&&(T[0]=T[1]),isNaN(T[1])&&(T[1]=T[0]),{min:y,max:T};var E=P($,m);return{min:E.min,max:E.max};function P(s,e,o,r){if(s==Number.MAX_VALUE)a?void 0==o?(s=M.y1m,e=M.y2m):(s=M["y1m_"+o],e=M["y2m_"+o]):void 0==o?(s=M.y1,e=M.y2):(s=M["y1_"+o],e=M["y2_"+o]);else if("bar"==this.graphStyle&&(s=0),s=Math.floor(s),e=Math.ceil(e),h){var n=t.TUtils.roundRange(s,e,b.Y_AXIS_RANGE,r);Math.abs((s=n.yMin)-(e=n.yMax))<b.Y_AXIS_RANGE*f&&(e=s+Math.floor(b.Y_AXIS_RANGE*f))}return .1>Math.abs(s-e)&&e++,{min:s,max:e,range:n}}},setDarkMode:function(t){this.darkMode=t,this.graph.setDarkMode(t),this.axisY.setDarkMode(t),this.fade.setDarkMode(t),this.axisX.setDarkMode(t),this.mini.setDarkMode(t),this.handle.setDarkMode(t),this.tip.setDarkMode(t),this.switchers.setDarkMode(t),this.composer.setDarkMode(t)},getGraphWidth:function(t){var s=this.$el.getBoundingClientRect();if(!t)return{width:s.width};var e=this.$switchers.getBoundingClientRect();return s.width-e.width>=500?{hasSpaceForLegend:!0,width:Math.max(s.width-e.width,1)}:{hasSpaceForLegend:!1,width:s.width}},onResize:function(){var t=Math.min(window.devicePixelRatio||1,2);if(this.ww!=window.innerWidth||t!=this.settings.dpi){if(this.settings.dpi=t,this.ww=window.innerWidth,this.data.sideLegend){this.$switchers.classList.remove("tchart--switchers__no-space");var s=this.getGraphWidth(!0);s.hasSpaceForLegend||this.$switchers.classList.add("tchart--switchers__no-space"),this.$graph.style.width=s.width+"px"}var e=this.$graph.getBoundingClientRect(),a=this.settings,h=e.height-a.DATES_HEIGHT-a.MINI_GRAPH_HEIGHT-a.MINI_GRAPH_TOP-a.MINI_GRAPH_BOTTOM;this.state.dims={composer:{w:e.width,h:e.height,l:0,t:0},graph:{w:e.width,h:h,l:0,t:a.DATES_HEIGHT},axisYLeft:{w:a.Y_LABELS_WIDTH,h:h,l:a.PADD[3],t:a.DATES_HEIGHT},axisYRight:{w:a.Y_LABELS_WIDTH,h:h,l:e.width-a.PADD[1]-a.Y_LABELS_WIDTH,t:a.DATES_HEIGHT},axisYLines:{w:e.width-a.PADD[1]-a.PADD[3],h:h,l:a.PADD[3],t:a.DATES_HEIGHT},fadeTop:{w:e.width,h:a.FADE_HEIGHT,l:0,t:a.DATES_HEIGHT},fadeBottom:{w:e.width,h:a.FADE_HEIGHT,l:0,t:a.DATES_HEIGHT+h-a.FADE_HEIGHT},axisX:{w:e.width,h:a.X_LABELS_HEIGHT,l:0,t:a.DATES_HEIGHT+h-a.X_LABELS_HEIGHT},dates:{w:a.DATES_WIDTH,h:a.DATES_HEIGHT,l:e.width-a.DATES_WIDTH-a.PADD[1],t:0},mini:{w:e.width-a.PADD[1]-a.PADD[3],h:a.MINI_GRAPH_HEIGHT,l:a.PADD[3],t:a.DATES_HEIGHT+h+a.MINI_GRAPH_TOP},handle:{w:e.width-a.PADD[1]-a.PADD[3],h:a.MINI_GRAPH_HEIGHT+2,l:a.PADD[3],t:a.DATES_HEIGHT+h+a.MINI_GRAPH_TOP-1},tip:{w:e.width,h:h,l:0,t:a.DATES_HEIGHT}},this.graph.onResize(),this.axisY.onResize(),this.fade.onResize(),this.axisX.onResize(),this.mini.onResize(),this.handle.onResize(),this.tip.onResize(),this.composer.onResize()}},createDOM:function(s){var e,a,h,o,r=this.settings;this.$el=document.createElement("div"),this.$el.className="tchart",this.data.subchart.show||this.$el.classList.add("tchart__no-subchart"),this.data.slave&&this.$el.classList.add("tchart__slave"),this.$h1=document.createElement("h1"),this.$h1.className="tchart--header",this.$h1.textContent=this.data.caption,this.$el.appendChild(this.$h1),this.$zoom=document.createElement("div"),this.$zoom.className="tchart--zoom",this.$el.appendChild(this.$zoom);var n=document.createElement("div");this.$zoom.appendChild(n);var d=document.createElement("span");if(d.textContent="Zoom Out",this.$zoom.appendChild(d),this.$zoom.addEventListener("click",(function(){this.toggleZoom(!1)}).bind(this)),this.$graph=document.createElement("div"),this.$graph.className="tchart--graph",this.$el.appendChild(this.$graph),this.$switchers=document.createElement("div"),this.$switchers.className="tchart--switchers",this.data.sideLegend&&this.$switchers.classList.add("tchart--switchers__side-legend"),this.$el.appendChild(this.$switchers),s.appendChild(this.$el),e=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),a=this.getYMinMax(this.state.xg1,this.state.xg2,!0),this.pairY)for(h=0;h<this.data.ys.length;h++)this.state["y1_"+h]=e.min[h],this.state["y2_"+h]=e.max[h],this.state["y1m_"+h]=a.min[h],this.state["y2m_"+h]=a.max[h];else this.state.y1=e.min,this.state.y2=e.max,this.state.y1m=a.min,this.state.y2m=a.max;this.composer=new t.TComposer({$parent:this.$graph,settings:r,chart:this,state:this.state,data:this.data,graphStyle:this.graphStyle}),this.animator=new t.TAnimator({state:this.state,composer:this.composer});var l={line:"TLines",step:"TLines",bar:"TBars",area:"TAreas"};(o=[["graph",l[this.graphStyle],this.$graph],["axisX","TAxisX",this.$graph],["fade","TFade",this.$graph],["axisY","TAxisY",this.$graph],["tip","TTip",this.$graph,{onClick:this.toggleZoom}],["mini",l[this.graphStyle],this.$graph,{mini:!0}],["handle","THandle",this.$graph,{cb:this.onHandleMove}],["switchers","TSwitchers",this.$switchers,{onClick:this.onSwitcherChange,onLongTap:this.onSwitcherChange,onEnter:this.onSwitcherEnter,onLeave:this.onSwitcherLeave}],]).forEach((function(s){this[s[0]]=new t[s[1]]({animator:this.animator,$canvas:this.composer.$canvas,ctx:this.composer.ctx,graphStyle:this.graphStyle,chart:this,pairY:this.pairY,state:this.state,data:this.data,$parent:s[2],settings:r,additional:s[3]||{}}),this[s[0]].id=s[0]}).bind(this))},onHandleMove:function(s,e,a,h){var s,e,o=this.state.zoomMode;this.updateSpeed(),t.TUtils.triggerEvent("chart-handle-move",{x1:s,x2:e,target:this.opts.container.parentElement}),o=!1;var r=[],n=this.getYMinMax(s,e,!1,!0);for(this.axisX.setAnimation(o||"both"!=a),this.axisY.setAnimation(!0),this.axisY.setForceUpdate(!1),h&&t.TUtils.triggerEvent("chart-hide-tips",{except:null}),r.push({prop:"x1",state:this.state,end:s,fixed:!0,duration:o?250:0,group:{top:!0,bottom:!0}}),r.push({prop:"x2",state:this.state,end:e,fixed:!0,duration:o?250:0,group:{top:!0,bottom:!0}}),i=0;i<this.data.ys.length;i++)("line"==this.graphStyle||"step"==this.graphStyle)&&r.push({prop:this.pairY?"y1_"+i:"y1",state:this.state,end:this.pairY?n.min[i]:n.min,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}}),"area"!=this.graphStyle&&r.push({prop:this.pairY?"y2_"+i:"y2",state:this.state,end:this.pairY?n.max[i]:n.max,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}});this.animator.add(r)},onSwitcherEnter:function(t){clearTimeout(this.switcherLeaveTimeout);var s=[];for(i=0;i<this.data.ys.length;i++)s.push({prop:"f_"+i,state:this.state,end:t==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),s.push({prop:"pieInd_"+i,state:this.state,end:t==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(s)},onSwitcherLeave:function(t){clearTimeout(this.switcherLeaveTimeout),this.switcherLeaveTimeout=setTimeout((function(){var t=[];for(i=0;i<this.data.ys.length;i++)t.push({prop:"f_"+i,state:this.state,end:1,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),t.push({prop:"pieInd_"+i,state:this.state,end:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(t)}).bind(this),300)},onSwitcherChange:function(s,e){var a,h,o,r,n,d,l=[],p=[],c=[];if(this.updateSpeed(),"boolean"!=typeof s)for(n=0,a=!0,e=s,h=!0;n<this.data.ys.length;n++)h=h&&(n==e?this.state["e_"+n]:!this.state["e_"+n]);var g=0;for(n=0;n<this.data.ys.length;n++)d=n==e,c[n]=this.state["e_"+n],a?this.state["e_"+n]=d:d&&(this.state["e_"+n]=!!s),h&&a&&(this.state["e_"+n]=!0),p[n]=this.state["e_"+n],p[n]&&(g=Math.max(g,this.data.ys[n].y.length));var $=this.reduceGlobalRange({});for($.isReduced?(l.push({prop:"x1",state:this.state,end:$.x1,duration:333,group:{top:!0,bottom:!0}}),l.push({prop:"x2",state:this.state,end:$.x2,duration:333,group:{top:!0,bottom:!0}}),l.push({prop:"xg1",state:this.state,end:$.xg1,duration:333,group:{top:!0,bottom:!0}}),l.push({prop:"xg2",state:this.state,end:$.xg2,duration:333,group:{top:!0,bottom:!0}}),this.state.xg1Ind=$.xg1Ind,this.state.xg2Ind=$.xg2Ind,o=this.getYMinMax($.x1,$.x2,!1,!0),r=this.getYMinMax($.xg1,$.xg2,!0)):(o=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),r=this.getYMinMax(this.state.xg1,this.state.xg2,!0)),t.TUtils.triggerEvent("chart-hide-tips",{except:null}),this.axisY.setForceUpdate(!0),this.axisY.setAnimation(!0),this.state.activeColumnsCount=0,n=0;n<p.length;n++)p[n]&&this.state.activeColumnsCount++,c[n]!=p[n]&&(l.push({prop:"o_"+n,state:this.state,end:p[n]?1:0,duration:300,group:{top:!0}}),l.push({prop:"om_"+n,state:this.state,end:p[n]?1:0,duration:"line"==this.graphStyle||"step"==this.graphStyle?166:300,delay:p[n]&&"line"==this.graphStyle||"step"==this.graphStyle?200:0,tween:"linear",group:{bottom:!0}}));for(n=0;n<(this.pairY?p.length:1);n++)("line"==this.graphStyle||"step"==this.graphStyle)&&l.push({prop:this.pairY?"y1_"+n:"y1",state:this.state,end:this.pairY?o.min[n]:o.min,duration:this.pairY?0:333,group:{top:!0}}),"area"!=this.graphStyle&&l.push({prop:this.pairY?"y2_"+n:"y2",state:this.state,end:this.pairY?o.max[n]:o.max,duration:this.pairY?0:333,group:{top:!0}}),("line"==this.graphStyle||"step"==this.graphStyle)&&l.push({prop:this.pairY?"y1m_"+n:"y1m",state:this.state,end:this.pairY?r.min[n]:r.min,duration:this.pairY?0:316,group:{bottom:!0}}),"area"!=this.graphStyle&&l.push({prop:this.pairY?"y2m_"+n:"y2m",state:this.state,end:this.pairY?r.max[n]:r.max,duration:this.pairY?0:316,group:{bottom:!0}});this.state.y1m_hidd=this.state.y1m,this.state.y2m_hidd=this.state.y2m,this.state.y1m_show=r.min,this.state.y2m_show=r.max,this.switchers.render(p),this.animator.add(l)},toggleSlave:function(s,e,a,h){var o=[];if(this.updateSpeed(h),this.state.zoomModeSlave!=s){if(this.state.zoomSpecialOrigin=e,s){this.state.zoomModeSlave=!0,this.switchers.switchers.forEach(function(t,s){t.classList.add("tchart--switcher__visible"),t.getElementsByTagName("span")[0].textContent=a.names[s]}),this.tip.labels.forEach(function(t,s){t.$label.textContent=a.names[s]}),this.data.x=a.x;for(var r=[],n=0;n<a.y.length;n++){this.data.ys[n].y=a.y[n];var d=-1==a.hidden.indexOf(this.data.ys[n].id);this.state["e_"+n]=d,this.state["o_"+n]=d?1:0,this.state["om_"+n]=d?1:0,r[n]=d}this.switchers.render(r);var l=this.data.x[0],p=this.data.x[this.data.x.length-1];this.data.dates=[],this.data.datesShort=[],this.data.datesRange=[];for(var c=t.TUtils.getFormatter("xTooltipFormatter",this.data,1),g=t.TUtils.getFormatter("xTickFormatter",this.data,1),$=t.TUtils.getFormatter("xRangeFormatter",this.data,1),m=0,n=0;n<this.data.x.length;n++)this.data.dates[n]=c(this.data.x[n],!0),this.data.datesShort[n]=g(this.data.x[n],!0),this.data.datesRange[n]=$(this.data.x[n],!0),this.data.datesShort[n].length>m&&(m=this.data.datesShort[n].length);this.data.maxXTickLength=m,this.data.subchart=a.subchart,this.data.hidden=a.hidden;var u=this.getDefaultZoom({x1:l,x2:p,xg1:l,xg2:p,default:this.data.subchart.defaultZoom});this.state.x1=u.x1,this.state.x2=u.x2,this.state.xCount=this.data.x.length,this.state.xg1=l,this.state.xg2=p,this.state.xg1Ind=0,this.state.xg2Ind=this.data.x.length-1,this.state.xMainMin=l,this.state.xMainMax=p,this.state.xgMin=l,this.state.xgMax=p;var x=this.reduceGlobalRange({});x.isReduced&&(this.state.x1=x.x1,this.state.x2=x.x2,this.state.xg1=x.xg1,this.state.xg2=x.xg2,this.state.xg1Ind=x.xg1Ind,this.state.xg2Ind=x.xg2Ind);var _=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),f=this.getYMinMax(l,p,!0);this.state.y1=_.min,this.state.y2=_.max,this.state.y1m=f.min,this.state.y2m=f.max}else this.switchers.switchers.forEach(function(t,s){t.classList.remove("tchart--switcher__visible")});setTimeout((function(){s||(this.state.zoomModeSlave=!1)}).bind(this),470),this.state.slaveVisibility=s?0:1,o.push({prop:"slaveVisibility",state:this.state,end:s?1:0,duration:450,group:{top:!0,bottom:!0}}),this.animator.add(o)}},toggleZoomSpecial:function(t,s,e){var a=[];if(this.state.zoomModeSpecial!=t){var h=this.updateSpeed();if(t){var o=(this.state.x2-this.state.x1)/(this.state.dims.graph.w-this.settings.PADD[3]-this.settings.PADD[1]),r=this.settings.PADD[3]*o,n=this.settings.PADD[1]*o;this.state.zoomSpecialOrigin=(s-this.state.x1+r)/(this.state.x2-this.state.x1+r+n),this.state.zoomModeSpecial=!0,this.$h1.classList.add("tchart--header__hidden"),this.$zoom.classList.add("tchart--zoom__visible"),this.switchers.switchers.forEach(function(t,s){t.classList.remove("tchart--switcher__visible")}),this.slaveChart.toggleSlave(!0,this.state.zoomSpecialOrigin,e,h)}else this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.switchers.switchers.forEach(function(t,s){t.classList.add("tchart--switcher__visible")}),this.slaveChart.toggleSlave(!1,this.state.zoomSpecialOrigin,null,h);document.body.style.pointerEvents="none",setTimeout((function(){t||(this.state.zoomModeSpecial=!1),document.body.style.pointerEvents=""}).bind(this),470),this.state.masterVisibility=t?1:0,a.push({prop:"masterVisibility",state:this.state,end:t?0:1,duration:450,group:{top:!0,bottom:!0}}),this.animator.add(a)}},toggleZoom:function(s,e,a){if(a&&void 0==this.specialZoomTransition&&(a.columns.length!=this.data.ys.length+1&&(this.specialZoomTransition=!0),this.specialZoomTransition||a.columns.forEach((function(t,s){var e=t[0],h=a.types[e],o=a.names[e],s=this.data.yIds[e];if(void 0!=s){var r=this.data.ys[s].tp,n=this.data.ys[s].label;(r!=h||n!=o)&&(this.specialZoomTransition=!0)}else"x"!==e&&(this.specialZoomTransition=!0)}).bind(this)),void 0==this.specialZoomTransition&&(this.specialZoomTransition=!1)),this.specialZoomTransition&&(this.data.master=!0,this.$el.classList.add("tchart__master"),!this.slaveChart)){var h=JSON.parse(JSON.stringify(a));h.yTickFormatter=a.yTickFormatter,h.yTooltipFormatter=a.yTooltipFormatter,h.yCustomTooltipFormatters=a.yCustomTooltipFormatters,h.xTickFormatter=a.xTickFormatter,h.xTooltipFormatter=a.xTooltipFormatter,h.xRangeFormatter=a.xRangeFormatter,h.sideLegend=this.data.sideLegend,this.slaveChart=new t.TChart({container:this.opts.container,slave:!0,data:h}),this.slaveChart.setDarkMode(this.darkMode)}if(a&&!a.details&&(a.details={y:[],names:[]},a.columns.forEach((function(t,s){var e=t.shift(),h=a.types[e],o=a.names[e];"x"===h?a.details.x=t:this.specialZoomTransition?(a.details.y.push(t),a.details.names.push(o)):a.details.y[this.data.yIds[e]]=t}).bind(this))),a&&(a.subchart={show:!a.subchart||void 0==a.subchart.show||a.subchart.show,defaultZoom:a.subchart&&a.subchart.defaultZoom},a.details.subchart=a.subchart,a.details.hidden=a.hidden||[]),this.specialZoomTransition){this.toggleZoomSpecial(s,e,a&&a.details);return}var o,r,n,d=a&&a.details,l=[];if(this.state.zoomMode!=s){if(s){if(this.state.zoomMode=!0,this.state.zoomDir=1,this.$h1.classList.add("tchart--header__hidden"),this.$zoom.classList.add("tchart--zoom__visible"),this.zoomEnterSpeed=this.updateSpeed(),a&&(this.data.details={yTickFormatter:a.yTickFormatter,yTooltipFormatter:a.yTooltipFormatter,yCustomTooltipFormatters:a.yCustomTooltipFormatters,xTickFormatter:a.xTickFormatter,xTooltipFormatter:a.xTooltipFormatter,xRangeFormatter:a.xRangeFormatter,subchart:a.subchart,hidden:a.hidden||[]}),!this.hasSavedData){for(j=0,this.data.saved={},this.data.saved.x=this.data.x.slice(),this.data.saved.dates=this.data.dates.slice(),this.data.saved.datesShort=this.data.datesShort.slice(),this.data.saved.datesRange=this.data.datesRange.slice(),this.data.saved.y=[];j<this.data.ys.length;j++)this.data.saved.y[j]=this.data.ys[j].y.slice();this.hasSavedData=!0}this.data.details&&this.data.details.subchart&&(this.data.details.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart")),this.state.zoomSaved={x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,xgMin:this.state.xgMin,xgMax:this.state.xgMax};var p,c,g=this.data.mainPeriodLen,$=e,m=e+g;if(this.data.details)var u=this.getDefaultZoom({x1:$,x2:m,xg1:d.x[0],xg2:d.x[d.x.length-1],default:this.data.details.subchart.defaultZoom}),$=u.x1,m=u.x2;if("area"!=this.graphStyle)this.data.detailPeriodLen=d.x[1]-d.x[0],p=d.x[0],c=d.x[d.x.length-1];else{this.data.detailPeriodLen=g;var x=this.data.pieZoomRange;c=(p=$-(x-g)/2)+x,m=$+Math.round(x/7/g)*g,p<this.data.x[0]?(c=(p=this.data.x[0])+x)>this.data.x[this.data.x.length-1]&&(c=this.data.x[this.data.x.length-1]+g):c>this.data.x[this.data.x.length-1]&&(p=(c=this.data.x[this.data.x.length-1]+g)-x)<this.data.x[0]&&(p=this.data.x[0])}p=Math.round(p/g)*g,c=Math.round(c/g)*g,"area"!=this.graphStyle&&this.insertDetails(p,c,d),this.state.xgMin=p,this.state.xgMax=c}else this.updateSpeed(this.zoomEnterSpeed/("area"==this.graphStyle?2:1)),this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.data.details&&(this.data.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart")),this.state.zoomDir=-1,$=this.state.zoomSaved.x1,m=this.state.zoomSaved.x2,p=this.state.zoomSaved.xg1,c=this.state.zoomSaved.xg2,this.state.xgMin=this.state.zoomSaved.xgMin,this.state.xgMax=this.state.zoomSaved.xgMax;this.axisY.setForceUpdate(!0),this.axisY.setAnimation(!0),this.axisX.setAnimation(!0);var _=450,f=0,y=0;"area"==this.graphStyle&&(_=350,s?y=.95*_:f=.95*_);var T=this.reduceGlobalRange({x1:$,x2:m,xg1:p,xg2:c,useSaved:!s});for(T.isReduced&&($=T.x1,m=T.x2,p=T.xg1,c=T.xg2),this.state.xg1Ind=Math.floor(t.TUtils.getXIndex(s?this.data.x:this.data.saved.x,p)),this.state.xg2Ind=Math.ceil(t.TUtils.getXIndex(s?this.data.x:this.data.saved.x,c)),o=this.getYMinMax($,m,!1,!0,!s),r=this.getYMinMax(p,c,!0,!1,!s),document.body.style.pointerEvents="none",setTimeout((function(){s||(this.state.zoomMode=!1,"area"!=this.graphStyle&&this.revertDetails()),document.body.style.pointerEvents="",this.composer.render({top:!0,bottom:!0})}).bind(this),_+20+("area"==this.graphStyle?.9*_:0)),this.state.zoomMorph=s?0:1,l.push({prop:"zoomMorph",state:this.state,end:s?1:0,duration:_,delay:y,group:{top:!0,bottom:!0}}),l.push({prop:"x1",state:this.state,end:$,delay:f,duration:_,group:{top:!0,bottom:!0}}),l.push({prop:"x2",state:this.state,end:m,delay:f,duration:_,group:{top:!0,bottom:!0}}),l.push({prop:"xg1",state:this.state,end:p,delay:f,duration:_,group:{top:!0,bottom:!0}}),l.push({prop:"xg2",state:this.state,end:c,delay:f,duration:_,group:{top:!0,bottom:!0}}),n=0;n<(this.pairY?this.data.ys.length:1);n++)("line"==this.graphStyle||"step"==this.graphStyle)&&l.push({prop:this.pairY?"y1_"+n:"y1",state:this.state,end:this.pairY?o.min[n]:o.min,delay:f,duration:_,group:{top:!0}}),"area"!=this.graphStyle&&l.push({prop:this.pairY?"y2_"+n:"y2",state:this.state,end:this.pairY?o.max[n]:o.max,delay:f,duration:_,group:{top:!0}}),("line"==this.graphStyle||"step"==this.graphStyle)&&l.push({prop:this.pairY?"y1m_"+n:"y1m",state:this.state,end:this.pairY?r.min[n]:r.min,delay:f,duration:_,group:{bottom:!0}}),"area"!=this.graphStyle&&l.push({prop:this.pairY?"y2m_"+n:"y2m",state:this.state,end:this.pairY?r.max[n]:r.max,delay:f,duration:_,group:{bottom:!0}});this.animator.add(l)}},insertDetails:function(s,e,a){var h,o,r,n,d,l,p=Math.ceil(t.TUtils.getXIndex(this.data.x,s)),c=Math.ceil(t.TUtils.getXIndex(this.data.x,e)),g=a.x.length-1;e>this.data.x[c]&&c++;var $=p,m=c-("bar"==this.graphStyle||"step"==this.graphStyle?1:0),u=this.data.x.length-1,x=[],_=[],f=[],y=[],T=[],b=[];for(h=0;h<$;h++)x[o=h-0]=this.data.x[h],_[o]=this.data.dates[h],f[o]=this.data.datesShort[h],y[o]=this.data.datesRange[h];for(j=0;j<this.data.ys.length;j++)for(h=0,T[j]=T[j]||[],r=T[j],d=this.data.ys[j].y;h<$;h++)r[h-0]=d[h];var M=[],S=[],D=[],w=t.TUtils.getFormatter("xTooltipFormatter",this.data,1),I=t.TUtils.getFormatter("xTickFormatter",this.data,1),L=t.TUtils.getFormatter("xRangeFormatter",this.data,1),A=0;for(h=0;h<=g;h++){x[o=h-0+$]=a.x[h],_[o]=w(x[o],!0),f[o]=I(x[o],!0),y[o]=L(x[o],!0),f[o].length>A&&(A=f[o].length);var E=t.TUtils.getXIndex(this.data.x,x[o]);M[h]=E,S[h]=Math.floor(E),D[h]=Math.ceil(E)}for(j=0,this.data.details.maxXTickLength=A;j<this.data.ys.length;j++)for(h=0,T[j]=T[j]||[],r=T[j],d=this.data.ys[j].y,l=a.y[j],b[j]=b[j]||[],n=b[j];h<=g;h++){if("bar"==this.graphStyle)var P=d[S[h]]||0;else if("step"==this.graphStyle)var P=d[S[h]];else var P=d[S[h]]+(M[h]-S[h])*(d[D[h]]-d[S[h]]);var R=l[h];"bar"!==this.graphStyle&&isNaN(P)&&!isNaN(R)&&(P=0),r[h-0+$]=R,n[h-0+$]=P}for(h=m+1;h<=u;h++)x[o=h-m+g+$]=this.data.x[h],_[o]=this.data.dates[h],f[o]=this.data.datesShort[h],y[o]=this.data.datesRange[h];for(j=0;j<this.data.ys.length;j++)for(T[j]=T[j]||[],r=T[j],d=this.data.ys[j].y,h=m+1;h<=u;h++)r[h-m+g+$]=d[h];for(j=0,this.state.detailInd1=$,this.state.detailInd2=$+g-0,this.data.x=x,this.data.dates=_,this.data.datesShort=f,this.data.datesRange=y;j<this.data.ys.length;j++)this.data.ys[j].y=T[j],this.data.ys[j].yFrom=b[j]},revertDetails:function(){for(i=0,this.data.x=this.data.saved.x,this.data.dates=this.data.saved.dates,this.data.datesShort=this.data.saved.datesShort,this.data.datesRange=this.data.saved.datesRange;i<this.data.ys.length;i++)this.data.ys[i].y=this.data.saved.y[i]}},t.TChart=s}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,this.$canvas=document.createElement("canvas"),this.$canvas.className="tchart--graph-canvas",this.ctx=this.$canvas.getContext("2d"),t.$parent.appendChild(this.$canvas),this.deviceSpeed=void 0};s.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.state.dims.composer;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.render({top:!0,bottom:!0})},setDarkMode:function(t){this.isDarkMode=t,this.onResize()},render:function(t){if(void 0==this.deviceSpeed){var s=performance.now(),e=this.opts.state.x1;this.opts.state.x1=this.opts.state.xMainMin,this.renderInner(t);var a=performance.now();this.opts.state.x1=e}if(this.renderInner(t),void 0==this.deviceSpeed){var h="line"==this.opts.graphStyle||"step"==this.opts.graphStyle?1.5:2;this.deviceSpeed=(a-s)/h/(this.opts.data.x.length*this.opts.data.ys.length),this.opts.state.deviceSpeed=this.deviceSpeed}},renderInner:function(s){var e=this.opts.state.dims,a=this.opts.state,h=this.ctx,o=this.opts.settings.dpi,r=this.opts.settings,n=r.PADD,d=void 0==a.zoomMorph?0:a.zoomMorph,l="area"==this.opts.graphStyle&&a.zoomMode&&d<1,p="area"==this.opts.graphStyle&&a.zoomMode&&1==d;if(this.opts.data.master&&(this.$canvas.style.opacity=a.masterVisibility),this.opts.data.slave&&(this.$canvas.style.opacity=a.slaveVisibility,this.opts.chart.$el.style.visibility=a.slaveVisibility>0?"visible":"hidden"),s.top){if(h.clearRect(e.dates.l*o,e.dates.t*o,e.dates.w*o,e.dates.h*o),("line"==this.opts.graphStyle||"step"==this.opts.graphStyle||"area"==this.opts.graphStyle&&d>0||this.opts.data.slave&&a.slaveVisibility<1||this.opts.data.master&&a.masterVisibility<1)&&(p?h.clearRect(e.graph.l*o,(e.graph.t-18)*o,e.graph.w*o,(e.graph.h+30)*o):h.clearRect(e.graph.l*o,e.graph.t*o,e.graph.w*o,e.graph.h*o)),("area"==this.opts.graphStyle&&0==d||"bar"==this.opts.graphStyle)&&(h.clearRect(e.graph.l*o,e.graph.t*o,e.graph.w*o,(r.PADD[0]+4)*o),h.clearRect(e.graph.l*o,(e.graph.t+n[0])*o,n[3]*o,(e.graph.h-n[0]-n[2])*o),h.clearRect(e.graph.l*o,(e.graph.t+e.graph.h-n[2])*o,e.graph.w*o,n[2]*o),h.clearRect((e.graph.l+e.graph.w-n[1]-1)*o,(e.graph.t+n[0])*o,(n[1]+1)*o,(e.graph.h-n[0]-n[2])*o)),l||p||(h.save(),h.beginPath(),h.rect(e.graph.l*o,e.graph.t*o,e.graph.w*o,e.graph.h*o),h.clip()),this.opts.data.master&&a.masterVisibility<1){h.save();var c=(1-a.masterVisibility)*5+1;h.translate(e.graph.w*a.zoomSpecialOrigin*(1-c),0),h.scale(c,1)}if(this.opts.data.slave&&a.slaveVisibility<1){h.save();var c=a.slaveVisibility;h.translate(e.graph.w*a.zoomSpecialOrigin*(1-c),0),h.scale(c,1)}var g=1;if("area"==this.opts.graphStyle&&a.zoomMode&&(g=1-d),l){h.save();var $=r.PIE_RADIUS,m=e.graph.w+d*(2*$-e.graph.w),u=e.graph.h-42+d*(2*$-e.graph.h+42);t.TUtils.drawRoundedRect2(h,o,m,u,(e.graph.w-m)/2+e.graph.l,(e.graph.h-42-u)/2+e.graph.t+23,d*$),h.clip()}this.opts.chart.graph.render(),l&&h.restore(),this.opts.data.master&&a.masterVisibility<1&&h.restore(),this.opts.data.slave&&a.slaveVisibility<1&&h.restore(),this.opts.chart.axisY.render(g),this.opts.chart.fade.render(),l||p||h.restore(),this.opts.chart.axisX.render(g)}if(s.bottom){h.clearRect(e.graph.l*o,(e.handle.t-1)*o,e.graph.w*o,(e.handle.h+2)*o);var x=this.opts.data.subchart.show,_=!this.opts.data.master&&!this.opts.data.slave&&this.opts.data.details&&this.opts.data.subchart.show!=this.opts.data.details.subchart.show;_&&(x=x?d<1:d>0),x&&(h.save(),t.TUtils.drawRoundedRect(h,o,e.mini.w,e.mini.h,e.mini.l,e.mini.t,7),h.clip(),this.opts.chart.mini.render(),h.restore(),this.opts.chart.handle.render()),_&&d>0&&d<1&&(h.fillStyle=this.isDarkMode?"#242f3e":"#fff",h.globalAlpha=this.opts.data.subchart.show?d:1-d,h.fillRect(e.graph.l*o,(e.handle.t-1)*o,e.graph.w*o,(e.handle.h+2)*o),h.globalAlpha=1)}}},t.TComposer=s}(),function(){var t=window.Graph.units,s=function(s){this.opts=s,this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.isTouch=t.TUtils.isTouchDevice(),this.skipMoveEnd=!0;var e=s.useElForMove?s.$el:window;s.$el.addEventListener(this.isTouch?"touchstart":"mousedown",this.onDragStart,{passive:!1}),e.addEventListener(this.isTouch?"touchmove":"mousemove",this.onDragMove,{passive:!1}),e.addEventListener(this.isTouch?"touchend":"mouseup",this.onDragEnd,{passive:!1})};s.prototype={onDragStart:function(t){this.skipMoveEnd=!0,clearTimeout(this.pointerTimeout),(!this.isTouch||!(t.touches.length>1))&&(this.scroll=void 0,this.x=this.isTouch?t.touches[0].pageX:t.pageX,this.y=this.isTouch?t.touches[0].pageY:t.pageY,this.dX=0,this.dY=0,this.pageX=this.x,this.pageY=this.y,delete this.prevDx,delete this.prevDy,this.opts.onDragStart({pageX:this.x,pageY:this.y,isTouch:this.isTouch})||(this.skipMoveEnd=!1))},onDragMove:function(t){if(!this.skipMoveEnd&&"v"!=this.scroll){var s=this.isTouch?t.touches[0].pageX:t.pageX,e=this.isTouch?t.touches[0].pageY:t.pageY;this.dX=s-this.x,this.dY=e-this.y,this.pageX=s,this.pageY=e,this.isTouch&&("h"==this.scroll?this.opts.noPrevent||t.preventDefault():(Math.abs(this.dX)>5||Math.abs(this.dY)>5)&&(this.scroll=Math.abs(this.dX)>Math.abs(this.dY)?"h":"v")),(this.prevDx!=this.dX||this.prevDy!=this.dY)&&(this.opts.onDragMove&&this.opts.onDragMove({canceled:"v"==this.scroll,d:this.dX,pageX:this.pageX,pageY:this.pageY,isTouch:this.isTouch}),this.prevDx=this.dX,this.prevDy=this.dY)}},onDragEnd:function(t){!this.skipMoveEnd&&(this.skipMoveEnd=!0,this.opts.onDragEnd&&this.opts.onDragEnd({isTouch:this.isTouch,e:t}))}},t.TDrag=s}(),function(){var t=function(t){this.opts=t,this.ctx=t.ctx,"area"!=this.opts.graphStyle&&(this.$fadeTop=document.createElement("canvas"),this.ctxFadeTop=this.$fadeTop.getContext("2d"),"bar"!=this.opts.graphStyle&&(this.$fadeBottom=document.createElement("canvas"),this.ctxFadeBottom=this.$fadeBottom.getContext("2d")))};t.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.state.dims.fadeTop,e=this.opts.state.dims.fadeBottom,a=getComputedStyle(this.opts.$canvas).getPropertyValue("--tchart-fade-color");if(a||(a=this.isDarkMode?"rgba(36,47,62,1)":"rgba(255,255,255,1)"),"area"!=this.opts.graphStyle){var h=this.ctxFadeTop.createLinearGradient(0,0,0,s.h*t);if(h.addColorStop(0,a),h.addColorStop(1,a),this.$fadeTop.width=s.w*t,this.$fadeTop.height=s.h*t,this.ctxFadeTop.fillStyle=h,this.ctxFadeTop.fillRect(0,0,s.w*t,s.h*t),"bar"!=this.opts.graphStyle){var o=this.ctxFadeBottom.createLinearGradient(0,0,0,e.h*t);o.addColorStop(0,a),o.addColorStop(1,a),this.$fadeBottom.width=e.w*t,this.$fadeBottom.height=e.h*t,this.ctxFadeBottom.fillStyle=o,this.ctxFadeBottom.fillRect(0,0,e.w*t,e.h*t)}}},setDarkMode:function(t){this.isDarkMode=t,this.onResize()},render:function(){var t=this.opts.settings.dpi,s=this.opts.state.dims.fadeTop,e=this.opts.state.dims.fadeBottom;this.$fadeTop&&this.ctx.drawImage(this.$fadeTop,s.l*t,s.t*t),this.$fadeBottom&&this.ctx.drawImage(this.$fadeBottom,e.l*t,e.t*t)}},window.Graph.units.TFade=t}(),function(){var t=window.Graph.units,s=function(s){this.opts=s,this.ctx=s.ctx,this.isTouch=t.TUtils.isTouchDevice(),this.$canvas=s.$canvas,this.drag=new t.TDrag({$el:this.$canvas,onDragStart:(function(e){this.canvasPos=t.TUtils.getElemPagePos(this.$canvas);var a=e.pageX-this.canvasPos.x,h=e.pageY-this.canvasPos.y;return this._x1=s.state.x1,this._x2=s.state.x2,this.constrainHandleSize(!1),this.tp=this.getTp(a-s.settings.PADD[3],h-(this.opts.state.dims.composer.h-s.settings.MINI_GRAPH_HEIGHT-s.settings.MINI_GRAPH_BOTTOM),e.isTouch),this.firstMove=!0,!this.tp}).bind(this),onDragMove:(function(t){this.onDragMove(t.d),this.firstMove=!1}).bind(this),onDragEnd:(function(t){}).bind(this)}),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.trackMouse(!0)};s.prototype={getTp:function(t,s,e){var a=this.opts.state.dims.handle,h=this.opts.state,o=this.opts.state.zoomMode;if(s<0||s>a.h)return"";var r=e?.3*a.w:10;e&&r<14&&(r=14),e&&r>30&&(r=30);var n=this.prevX1+(e?h.x1==h.xg1?-5:-15:0),d=n+r,l=this.prevX2+(e?h.x2==h.xg2?5:15:0),p=l-r;return(.01>Math.abs(h.x2-h.x1-(o?this.opts.data.mainPeriodLen:this.minRange))&&(h.x2==h.xg2&&(p=l+1),h.x1==h.xg1&&(d=n-1)),t>d&&t<p)?"both":t>=n&&t<=d?"start":t>=p&&t<=l?"end":""},trackMouse:function(t){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__handle-pointer"),this.$canvas.classList.remove("tchart--graph-canvas__handle-grab"),this.$canvas.classList.remove("tchart--graph-canvas__handle-col-resize"),delete this.canvasPos},onMouseMove:function(s){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas);var e=s.pageX-this.canvasPos.x,a=s.pageY-this.canvasPos.y,h=this.getTp(e-this.opts.settings.PADD[3],a-(this.opts.state.dims.composer.h-this.opts.settings.MINI_GRAPH_HEIGHT-this.opts.settings.MINI_GRAPH_BOTTOM),!1),o={"":"",both:this.opts.settings.isIE?"pointer":"grab",start:"col-resize",end:"col-resize"};this.onMouseLeave(),o[h]&&this.$canvas.classList.add("tchart--graph-canvas__handle-"+o[h])},onResize:function(t){this.constrainHandleSize(!0)},setDarkMode:function(t){this.isDarkMode=t},constrainHandleSize:function(t){var s=32/(this.opts.state.dims.handle.w/(this.opts.state.xg2-this.opts.state.xg1)),e=this.opts.state.x1,a=this.opts.state.x2;this.opts.state.xg1;var h=this.opts.state.xg2;this.minRange=s,a-e<s&&((a=e+s)>h&&(e=(a=h)-s),t&&this.opts.additional.cb(e,a,"constraint"))},onDragMove:function(t){var s,e,a=this.opts.state.dims.handle,h=this.tp,o=this.opts.state,r=t/a.w*(o.xg2-o.xg1),n=this._x1,d=this._x2;"both"==h&&(s=n+r,e=d+r,s<o.xg1&&(s=o.xg1,e=o.xg1+d-n),e>o.xg2&&(s=o.xg2-(d-n),e=o.xg2)),"start"==h&&(e=o.x2,s=Math.min(Math.max(n+r,o.xg1),e-this.minRange)),"end"==h&&(s=o.x1,e=Math.max(Math.min(d+r,o.xg2),s+this.minRange)),(o.x1!=s||o.x2!=e)&&this.opts.additional.cb(s,e,h,this.firstMove)},render:function(){var s=this.opts.state.dims.handle,e=this.opts.settings.dpi,a=this.opts.state,h=1/(a.xg2-a.xg1),o=Math.round((a.x1-a.xg1)*h*s.w),r=Math.round((a.x2-a.xg1)*h*s.w),n=this.ctx;n.fillStyle=this.isDarkMode?"rgba(48, 66, 89, 0.6)":"rgba(226, 238, 249, 0.6)",t.TUtils.drawRoundedRect(n,e,o+4,s.h-2,s.l,s.t+1,[7,0,0,7]),n.fill(),t.TUtils.drawRoundedRect(n,e,s.w-r+4,s.h-2,s.l+r-4,s.t+1,[0,7,7,0]),n.fill(),this.isDarkMode||"line"==this.opts.graphStyle||"step"==this.opts.graphStyle||(n.fillStyle="#fff",t.TUtils.drawRoundedRect(n,e,12,s.h+2,s.l+o-1,s.t-1,[8,0,0,8]),n.fill(),t.TUtils.drawRoundedRect(n,e,12,s.h+2,s.l+r-11,s.t-1,[0,8,8,0]),n.fill()),n.fillStyle=this.isDarkMode?"#56626D":"#C0D1E1",t.TUtils.drawRoundedRect(n,e,10,s.h,s.l+o,s.t,[7,0,0,7]),n.fill(),t.TUtils.drawRoundedRect(n,e,10,s.h,s.l+r-10,s.t,[0,7,7,0]),n.fill(),n.fillRect((s.l+o+10)*e,s.t*e,(r-o-20)*e,e),n.fillRect((s.l+o+10)*e,(s.t+s.h-1)*e,(r-o-20)*e,e),n.strokeStyle="#fff",this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=2*e,n.beginPath(),n.moveTo((s.l+o+5)*e,(s.t+17)*e),n.lineTo((s.l+o+5)*e,(s.t+25)*e),n.moveTo((s.l+r-5)*e,(s.t+17)*e),n.lineTo((s.l+r-5)*e,(s.t+25)*e),n.stroke(),this.prevX1=o,this.prevX2=r}},t.THandle=s}(),function(){var t=window.Graph.units,s=function(t){this.opts=t,this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!0})};s.prototype={onResize:function(){var t=this.opts.settings.dpi,s=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=s.w*t,this.$canvas.height=s.h*t,this.cached="",this.ctx.fillStyle=this.isDarkMode?"#242f3e":"#fff",this.ctx.fillRect(0,0,s.w*t,s.h*t)},setDarkMode:function(t){this.isDarkMode=t},render:function(){var s=this.opts,e=s.data.ys,a=s.state,h=s.additional.mini,o=h||s.data.master&&a.masterVisibility<1&&a.masterVisibility>0||s.data.slave&&a.slaveVisibility<1&&a.slaveVisibility>0,r=h?a.xg1:a.x1,n=h?a.xg2:a.x2,d=s.settings,l=d["PADD"+(h?"_MINI":"")][0],p=d["PADD"+(h?"_MINI":"")][1],c=d["PADD"+(h?"_MINI":"")][2],g=d["PADD"+(h?"_MINI":"")][3],$=s.data.x,m=s.settings.dpi,u=o?this.ctx:this.opts.ctx,x=h?a.dims.mini:a.dims.graph,_=a.zoomMode,f=a.detailInd1,y=a.detailInd2,T=void 0==a.zoomMorph?0:a.zoomMorph,b=e.length,M="step"==s.graphStyle;z=(x.w-p-g)/(n-r+(M?this.opts.data.mainPeriodLen*(1-T):0)),G=Math.floor(t.TUtils.getXIndex($,r-g/z)),N=Math.ceil(t.TUtils.getXIndex($,n+p/z)),z*=m,Y=(g+(o?0:x.l))*m-r*z,M&&_&&1==T&&(G<this.opts.state.xg1Ind&&(G=this.opts.state.xg1Ind),N>this.opts.state.xg2Ind&&(N=this.opts.state.xg2Ind-1));var S=this.opts.data.mainPeriodLen*z,D=this.opts.data.detailPeriodLen*z;if(o){var w=[x.w,x.h,h?a.xg1:a.x1,h?a.xg2:a.x2,this.isDarkMode,_];for(h||(w.push(a.y1),w.push(a.y2)),A=0;A<b;A++)w.push(h?a["om_"+A]:a["o_"+A]),w.push(a["f_"+A]);if((w=w.join(","))==this.cached){this.opts.ctx.drawImage(this.$canvas,x.l*m,x.t*m);return}this.cached=w,u.clearRect(0,0,x.w*m,x.w*m)}var I=(s.additional.mini?1:"auto"==s.data.strokeWidth?b>5?1:2:s.data.strokeWidth)*m,L=I%2==0?0:.5;for(A=0,u.lineWidth=I,u.lineCap=s.additional.mini?"square":"round",u.lineJoin=s.additional.mini?"square":"round";A<b;A++)if(R=h?a["om_"+A]:a["o_"+A],H=a["e_"+A],R>0){P=e[A].y,U=e[A].yFrom,s.pairY?(k=h?a["y1m_"+A]:a["y1_"+A],C=h?a["y2m_"+A]:a["y2_"+A]):h?H&&R<1?(k=a.y1m_show,C=a.y2m_show):!H&&R<1?(k=a.y1m_hidd,C=a.y2m_hidd):(k=a.y1m,C=a.y2m):(k=a.y1,C=a.y2),F=m*(x.h-l-c)/(C-k),X=(x.h-c+(o?0:x.t))*m+k*F,u.beginPath(),u.strokeStyle=this.isDarkMode?e[A].colors_n[0]:e[A].colors_d[0],u.globalAlpha=R*(.9*a["f_"+A]+.1);var A,E,P,R,k,C,z,F,Y,X,H,U,G,N,O,W,B,V,Z=Number.MAX_VALUE,q=-Number.MAX_VALUE,J=-Number.MAX_VALUE,K=!1,Q=!0;for(E=G;E<=N;E++){if(_?E>=f&&E<=y?(W=U[E]+T*(P[E]-U[E]),O=D):(W=P[E]+T*(P[f]-P[E]),O=S):(W=P[E],O=S),isNaN(W)){Q=!0;continue}B=$[E]*z+Y<<0,yc=X-W*F<<0,B>J||M&&E==y+1?(K&&(V==Z?(u.moveTo(J+L,q-L),u.lineTo(J+L,Z-L)):(u.moveTo(J+L,Z-L),u.lineTo(J+L,q-L),V!=q&&u.moveTo(J+L,V-L)),K=!1),Q&&(u.moveTo(B+L,yc-L),Q=!1),Z=yc,q=yc,u.lineTo(B+L,yc-L),M&&u.lineTo(($[E]*z+O+Y<<0)+L,yc-L)):(Z=Math.min(Z,yc),q=Math.max(q,yc),K=!0),J=B,V=yc}K&&(u.moveTo(J+L,Z-L),u.lineTo(J+L,q-L)),u.stroke()}u.globalAlpha=1,o&&this.opts.ctx.drawImage(this.$canvas,x.l*m,x.t*m)}},t.TLines=s}(),function(){var t=window.Graph.units,s=function(s){var e,a;this.opts=s,this.isTouch=t.TUtils.isTouchDevice(),this.enabled=s.data.ys.length,1!=this.enabled||s.data.forceLegend||(s.$parent.style.display="none"),this.switchers=s.data.ys.map((function(h,o){var r,n,d,l=document.createElement("div");l.className="tchart--switcher",s.state["e_"+o]?l.classList.toggle("tchart--switcher__active"):this.enabled--,l.setAttribute("data-label",h.label),s.$parent.appendChild(l);var p=document.createElement("span");return p.textContent=h.label,l.appendChild(p),this.isTouch||(l.addEventListener("mouseenter",function(t){s.state["e_"+o]&&s.additional.onEnter(o)}),l.addEventListener("mouseleave",function(t){s.state["e_"+o]&&s.additional.onLeave(o)})),l.addEventListener("click",(function(t){if(a){a=!1;return}var h=l.classList.contains("tchart--switcher__active");if(h&&1==this.enabled){l.classList.add("tchart--switcher__denied"),clearTimeout(e),e=setTimeout(function(){l.classList.remove("tchart--switcher__denied")},500);return}this.isTouch||(h?s.additional.onLeave(o):s.additional.onEnter(o)),s.additional.onClick(!h,o)}).bind(this)),this.drag=new t.TDrag({$el:l,noPrevent:!0,useElForMove:!0,onDragStart:(function(t){r=t.pageX,n=t.pageY,d=setTimeout((function(){a=!0,this.isTouch||s.additional.onEnter(o),s.additional.onLongTap(o)}).bind(this),500)}).bind(this),onDragMove:(function(t){(Math.abs(r-t.pageX)>5||Math.abs(n-t.pageY)>5)&&clearTimeout(d)}).bind(this),onDragEnd:(function(t){clearTimeout(d)}).bind(this)}),l}).bind(this)),this.updateColors()};s.prototype={onResize:function(){},updateColors:function(){for(var t=this.opts.data.ys,s=0;s<this.switchers.length;s++)this.switchers[s].style.color=this.isDarkMode?t[s].colors_n[1]:t[s].colors_d[1]},setDarkMode:function(t){this.isDarkMode=t,this.updateColors()},render:function(t){this.enabled=0;for(var s=0;s<this.switchers.length;s++)t[s]?(this.enabled++,this.switchers[s].classList.add("tchart--switcher__active")):this.switchers[s].classList.remove("tchart--switcher__active")}},t.TSwitchers=s}(),function(){var t=window.Graph.units,s=function(s){this.opts=s,this.shown=!1,this.isTouch=t.TUtils.isTouchDevice(),this.$canvas=s.$canvas,this.cache={},this.$tip=document.createElement("div"),this.$tip.className="tchart--tip",s.$parent.appendChild(this.$tip),this.$tipDt=document.createElement("h6"),this.$tip.appendChild(this.$tipDt),this.$tipDtText=document.createTextNode(""),this.$tipDt.appendChild(this.$tipDtText),this.$tipDtText.nodeValue=".",this.$tipArrow=document.createElement("div"),this.$tipArrow.className="tchart--tip-arrow",this.$tip.appendChild(this.$tipArrow),this.$tipLoader=document.createElement("div"),this.$tipLoader.className="tchart--tip-loader",this.$tip.appendChild(this.$tipLoader),this.$tipScrollerWrapper=document.createElement("div"),this.$tipScrollerWrapper.className="tchart--tip-scroller-wrapper",this.$tip.appendChild(this.$tipScrollerWrapper),this.$tipScroller=document.createElement("div"),this.$tipScroller.className="tchart--tip-scroller",this.$tipScrollerWrapper.appendChild(this.$tipScroller),this.updateTipScrollClasses=this.updateTipScrollClasses.bind(this),this.$tipScroller.addEventListener("scroll",this.updateTipScrollClasses),this.labels=[],s.data.ys.forEach((function(t,s){this.labels.push(this.addLabel(t))}).bind(this)),"bar"==s.graphStyle&&s.data.ys.length>1&&(this.allLabel=this.addLabel({label:"All",outside:!0})),"area"==s.graphStyle&&(this.pieLabel=this.addLabel({label:"pie",outside:!0})),this.tooltipOnHover=!this.isTouch&&s.data.tooltipOnHover,"bar"!=s.graphStyle?(this.$line=document.createElement("div"),this.$line.className="tchart--line",s.$parent.appendChild(this.$line),this.$lineFill=document.createElement("div"),this.$line.appendChild(this.$lineFill),"area"!=s.graphStyle&&(this.points=s.data.ys.map((function(t,s){var e=document.createElement("span");return this.$line.appendChild(e),e}).bind(this)))):(s.state.barInd=-1,s.state.barO=0),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onBodyClick=this.onBodyClick.bind(this),this.onTipClick=this.onTipClick.bind(this),this.tooltipOnHover?(this.$canvas.addEventListener("mousemove",(function(s){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas),this.dx=s.pageX-this.canvasPos.x,this.dy=s.pageY-this.canvasPos.y;var e=this.opts.state.dims.tip;this.tp=this.getTp(this.dx,this.dy-e.t,this.isTouch),this.tp?this.shown?this.render({isMove:!0}):(delete this.prevXInd,this.toggle(!0),this.render({})):this.toggle(!1)}).bind(this)),this.$canvas.addEventListener("mouseleave",(function(){delete this.canvasPos,this.toggle(!1)}).bind(this)),this.$canvas.addEventListener("click",(function(t){this.shown&&this.onTipClick(t)}).bind(this)),this.$tip.style.pointerEvents="none"):(this.drag=new t.TDrag({$el:this.$canvas,onDragStart:(function(s){this.canvasPos=t.TUtils.getElemPagePos(this.$canvas),this.dx=s.pageX-this.canvasPos.x,this.dy=s.pageY-this.canvasPos.y;var e=this.opts.state.dims.tip;return this.tp=this.getTp(this.dx,this.dy-e.t,s.isTouch),delete this.prevXInd,clearTimeout(this.showTimeout),this.showTimeout=setTimeout((function(){this.toggle(!!this.tp),this.tp&&this.render()}).bind(this),this.isTouch?100:30),document.body.removeEventListener("click",this.onBodyClick),!this.tp}).bind(this),onDragMove:(function(s){if(s.canceled){clearTimeout(this.showTimeout),this.toggle(!1);return}this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas),this.dx=s.pageX-this.canvasPos.x,this.dy=s.pageY-this.canvasPos.y,this.render({isMove:!0})}).bind(this),onDragEnd:(function(t){delete this.canvasPos,this.bodyTimeout=setTimeout((function(){document.body.addEventListener("click",this.onBodyClick)}).bind(this),140)}).bind(this)}),this.$tip.addEventListener("click",this.onTipClick)),this.trackMouse(!0),this.updateColors()};s.prototype={onResize:function(t){var s=this.opts.state.dims.tip;if(this.$line){var e="area"==this.opts.graphStyle?25:16;this.$line.style.top=s.t+"px",this.$line.style.height=s.h+"px",this.$lineFill.style.top=e+"px",this.$lineFill.style.bottom=this.opts.settings.PADD[2]+1+"px"}this.render()},abortDetailCallbacks:function(){this.detailCallbacks&&(this.detailCallbacks.forEach(function(t,s){t.cancelled=!0}),delete this.detailCallbacks)},onTipClick:function(t){if(void 0!=this.prevXInd&&this.opts.additional.onClick&&this.opts.data.hasDetail&&!this.opts.state.zoomMode&&!this.opts.state.zoomModeSpecial&&(t.stopPropagation(),!this.$tip.classList.contains("tchart--tip__loading"))){var s=this.opts.data.x[this.prevXInd];if(!this.opts.data.detailsFunc){this.toggle(!1,!0),this.opts.additional.onClick(!0,s);return}if(this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.add("tchart--tip__loading"),this.cache[s]){this.toggle(!1,!0),this.opts.additional.onClick(!0,s,this.cache[s]),this.$tip.classList.remove("tchart--tip__loading");return}this.abortDetailCallbacks();var e=this.opts.data.detailsFunc(s),a=this;this.detailCallbacks=this.detailCallbacks||[];var h=function(t){if(!h.cancelled){if(a.$tip.classList.remove("tchart--tip__loading"),!t||!t.columns){a.$tip.classList.add("tchart--tip__error");return}a.toggle(!1,!0),a.opts.additional.onClick(!0,s,t),a.cache[s]=t}},o=function(t){o.cancelled||(a.$tip.classList.remove("tchart--tip__loading"),"default"===t&&a.opts.additional.onClick&&a.opts.data.hasDetail&&"area"==a.opts.graphStyle?(a.toggle(!1,!0),a.opts.additional.onClick(!0,s)):(console.log("error:",t),a.$tip.classList.add("tchart--tip__error")))};this.detailCallbacks.push(h),this.detailCallbacks.push(o),e.then(h).catch(o)}},updateColors:function(){var t=this.opts.data.ys;this.labels.forEach((function(s,e){this.points&&(this.points[e].style.borderColor=this.isDarkMode?t[e].colors_n[0]:t[e].colors_d[0]),s.$value.style.color=this.isDarkMode?t[e].colors_n[2]:t[e].colors_d[2]}).bind(this)),this.allLabel&&(this.allLabel.$value.style.color=this.isDarkMode?"#fff":"#000"),this.$lineFill&&(this.$lineFill.style.backgroundColor=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)")},setDarkMode:function(t){this.isDarkMode=t,this.updateColors()},addLabel:function(t){var s,e=document.createElement("div");e.className="tchart--tip-row",t.outside?(this.$tip.appendChild(e),e.classList.add("tchart--tip-row__outside")):this.$tipScroller.appendChild(e);var a=document.createElement("span");e.appendChild(a);var h=document.createTextNode("");if(h.nodeValue=t.label,a.appendChild(h),"area"==this.opts.graphStyle){var o=document.createElement("p");e.appendChild(o),s=document.createTextNode(""),o.appendChild(s)}var r=document.createElement("div");e.appendChild(r);var n=document.createTextNode("");return r.appendChild(n),{$row:e,$value:r,$valueText:n,$label:a,$labelText:h,$per:o,$perText:s}},getTp:function(t,s,e){if("area"==this.opts.graphStyle&&this.opts.state.zoomMode){var a=this.opts.state.dims.graph,h=a.w/2,o=a.h/2;return Math.pow((o-s)*(o-s)+(t-h)*(t-h),.5)<=this.opts.settings.PIE_RADIUS?"graph":""}var a=this.opts.state.dims.tip;return s<0||s>a.h?"":"graph"},trackMouse:function(t,s){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__tip-pointer"),delete this.canvasPos},onMouseMove:function(s){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas);var e=s.pageX-this.canvasPos.x,a=s.pageY-this.canvasPos.y,h=this.opts.state.dims.tip,o=this.getTp(e,a-h.t,!1);this.onMouseLeave(),o&&this.$canvas.classList.add("tchart--graph-canvas__tip-pointer")},toggle:function(s,e){var a=this.opts,h=a.state;if(s&&!this.shown&&(this.$tip.classList.add("tchart--tip__visible"),this.opts.data.hasDetail&&!(this.opts.state.zoomMode||this.opts.state.zoomModeSpecial)?this.$tip.classList.add("tchart--tip__has-zoom"):this.$tip.classList.remove("tchart--tip__has-zoom"),this.$tip.classList.remove("tchart--tip__shiftHide"),this.$line&&this.$line.classList.add("tchart--line__visible"),t.TUtils.triggerEvent("chart-hide-tips",{except:this.opts.chart})),!s&&this.shown){if(delete this.lastCurPieItemInd,"area"==a.graphStyle&&h.zoomMode){for(var o=[],r=0;r<h.pieAngles.length;r++){var n=h.pieAngles[r];o.push({prop:"pieInd_"+n.ind,state:a.state,end:0,duration:350,tween:"exp",speed:.2,group:{top:!0}})}a.animator.add(o)}e&&(this.$tip.classList.add("tchart--tip__shiftHide"),this.lastTipTop-=12,this.lastTipLeft=this.lastTipLeft<this.opts.state.dims.tip.w/2?this.lastTipLeft-12:this.lastTipLeft+12,this.$tip.style.transform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)",this.$tip.style.webkitTransform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)"),this.$tip.classList.remove("tchart--tip__visible"),this.$line&&this.$line.classList.remove("tchart--line__visible"),this.abortDetailCallbacks(),this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.remove("tchart--tip__loading"),"bar"==this.opts.graphStyle&&this.opts.animator.add([{prop:"barInd",state:this.opts.state,end:-1,duration:0,delay:150,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:0,duration:150,tween:"exp",speed:.3,group:{top:!0}}]),document.body.removeEventListener("click",this.onBodyClick)}this.shown=s},onBodyClick:function(t){t.target!=this.$canvas&&this.toggle(!1)},renderPieTooltip:function(s){var e,a=this.opts,h=a.state,o=this.opts.settings,r=o.PADD[0],n=o.PADD[1],d=o.PADD[2],l=o.PADD[3],p=h.dims.graph,c=h.dims.tip,g=p.w/2,$=p.h/2,m=t.TUtils.getFormatter("yTooltipFormatter",a.data,h.zoomMorph),u=Math.atan2($-this.dy+p.t,this.dx-g);u=u<0?2*Math.PI+u:u;for(var x=0;x<h.pieAngles.length;x++){var _=h.pieAngles[x];u<=_.st&&u>=_.ed&&(e=_),u-2*Math.PI<=_.st&&u-2*Math.PI>=_.ed&&(e=_)}if(this.lastCurPieItemInd!=e.ind){for(var f=[],x=0;x<h.pieAngles.length;x++){var _=h.pieAngles[x];f.push({prop:"pieInd_"+_.ind,state:a.state,end:_==e?1:0,duration:350,tween:"exp",speed:.2,group:{top:!0}})}a.animator.add(f)}this.pieLabel.$row.style.display="block",this.labels.forEach((function(t,s){t.$row.style.display="none"}).bind(this)),this.pieLabel.$labelText.nodeValue=e.label,this.pieLabel.$valueText.nodeValue=isNaN(e.value)?"n/a":m(e.value),this.pieLabel.$value.style.color=e.color,this.$tip.classList.add("tchart--tip__piemode"),this.$line&&this.$line.classList.add("tchart--line__piemode"),this.tipH=this.$tip.offsetHeight,this.tipW=this.$tip.offsetWidth;var y=this.dx-this.tipW/2,T=Math.min(this.dy-20-this.tipH,c.t+c.h-this.tipH-d);T<c.t+r&&(T=c.t+r),y=Math.min(Math.max(y,l/2),c.w-this.tipW-n/2),this.$tip.style.transform="translate("+(y<<0)+"px,"+(T<<0)+"px)",this.$tip.style.webkitTransform="translate("+(y<<0)+"px,"+(T<<0)+"px)",this.lastCurPieItemInd=e.ind,this.updateTipScrollClasses()},render:function(s){if(this.shown){var e,a,h,o=this.opts,r=o.state,n=this.opts.settings,d=n.PADD[0],l=n.PADD[1],p=n.PADD[2],c=n.PADD[3],g=0,$=this.opts.state.dims.tip,m=t.TUtils.getFormatter("yTooltipFormatter",o.data,r.zoomMorph),u=void 0==r.zoomMorph?0:r.zoomMorph,x=("bar"==o.graphStyle||"step"==o.graphStyle?this.opts.data.mainPeriodLen:0)*(1-u);if(s=s||{},this.abortDetailCallbacks(),this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.remove("tchart--tip__loading"),"area"==o.graphStyle&&r.zoomMode){this.renderPieTooltip(s);return}this.pieLabel&&(this.pieLabel.$row.style.display="none");var _=Math.max(Math.min(this.dx,$.w-1),0),f=r.x1+(r.x2-r.x1+x)*((_-c)/($.w-l-c)),y=t.TUtils.getXIndex(o.data.x,f),T="bar"==o.graphStyle||"step"==o.graphStyle?Math.floor(y):Math.round(y);if("bar"!==o.graphStyle&&"step"!==o.graphStyle){var b=(o.data.x[T]-r.x1)/(r.x2-r.x1+x),M=b*($.w-c-l)+c<<0;M<0&&T++,M>$.w-1&&T--}else(this.opts.state.zoomMode||this.opts.state.zoomModeSpecial)&&(T<o.state.detailInd1&&T++,T>o.state.detailInd2&&T--);if("bar"==o.graphStyle&&o.animator.add([{prop:"barInd",state:o.state,end:T,duration:0,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:1,duration:150,tween:"exp",speed:.3,group:{top:!0}}]),this.prevXInd!=T||!s.isMove){this.$tip.classList.remove("tchart--tip__piemode"),this.$line&&this.$line.classList.remove("tchart--line__piemode"),this.labels.forEach((function(t,s){var e=o.state["e_"+s]&&!isNaN(o.data.ys[s].y[T])?"block":"none";t.$row.style.display=e,this.points&&(this.points[s].style.display=e),g+="block"==e?1:0}).bind(this)),this.itemsVisible=g,this.allLabel&&(this.allLabel.$row.style.display=g>1?"block":"none"),this.itemsVisible?(this.$tip.classList.remove("tchart--tip__has_no_items"),this.$line&&this.$line.classList.remove("tchart--line__has_no_items")):(this.$tip.classList.add("tchart--tip__has_no_items"),this.$line&&this.$line.classList.add("tchart--line__has_no_items"));var S=0;"step"==o.graphStyle&&(S=this.opts.state.zoomMode?o.data.detailPeriodLen:o.data.mainPeriodLen);var b=(o.data.x[T]-r.x1+S/2)/(r.x2-r.x1+x),M=b*($.w-c-l)+c<<0;this.$line&&(this.$line.style.transform="translateX("+M+"px)"),this.$line&&(this.$line.style.webkitTransform="translateX("+M+"px)"),this.$tipDtText.nodeValue=o.data.dates[T];var D=0;if(o.data.ys.forEach((function(t,s){if(o.state["e_"+s]&&!isNaN(t.y[T])&&(this.labels[s].$valueText.nodeValue=(t.ctf||m)(t.y[T]),D+=t.y[T]||0,this.points)){e=this.points[s],o.pairY?(a=r["y1_"+s],h=r["y2_"+s]):(a=r.y1,h=r.y2);var n=(t.y[T]-a)/(h-a);e.style.transform="translateY("+($.h-n*($.h-d-p)-p<<0)+"px)",e.style.webkitTransform="translateY("+($.h-n*($.h-d-p)-p<<0)+"px)"}}).bind(this)),this.allLabel&&(this.allLabel.$valueText.nodeValue=m(D)),!s.isMove){this.maxLabelWidth=0,this.maxValueWidth=0,this.maxPercentageWidth=0,this.maxDateWidth=0;var w=window.getComputedStyle(this.$tip);this.rowPaddings=parseInt(w.getPropertyValue("padding-left"),10)+parseInt(w.getPropertyValue("padding-right"),10)}"area"==o.graphStyle&&this.fillPercentages(T,D),this.labels.forEach((function(t,s){if(o.state["e_"+s]&&!isNaN(o.data.ys[s].y[T])){var e=t.$label.offsetWidth;e>this.maxLabelWidth&&(this.maxLabelWidth=e);var a=t.$value.offsetWidth;a>this.maxValueWidth&&(this.maxValueWidth=a)}}).bind(this));var I=this.rowPaddings+this.maxLabelWidth+20+this.maxValueWidth;I+="area"==o.graphStyle?this.maxPercentageWidth:0;var L=this.rowPaddings+this.$tipDt.offsetWidth+20;L>this.maxDateWidth&&(this.maxDateWidth=L),I=Math.max(I,this.maxDateWidth),this.$tip.style.width=I+"px",this.tipH=this.$tip.offsetHeight,this.tipW=this.$tip.offsetWidth}var A=this.itemsVisible<=2?"center":"side";if("center"==A){var E=this.dx-this.tipW/2,P=Math.min(this.dy-20-this.tipH,$.t+$.h-this.tipH-p);P<$.t+d&&(A="side")}if("side"==A){if(this.dx>$.w/2)var E=this.dx-this.tipW-20;else var E=this.dx+20;var P=Math.min(Math.max(this.dy-this.tipH/2,$.t+d),$.t+$.h-this.tipH-p)}E=Math.min(Math.max(E,c/2),$.w-this.tipW-l/2),this.$tip.style.transform="translate("+(E<<0)+"px,"+(P<<0)+"px)",this.$tip.style.webkitTransform="translate("+(E<<0)+"px,"+(P<<0)+"px)",this.lastTipLeft=E<<0,this.lastTipTop=P<<0,this.prevXInd=T,this.updateTipScrollClasses()}},updateTipScrollClasses:function(){this.$tipScroller.scrollHeight>this.$tipScroller.offsetHeight?this.$tip.classList.add("tchart--tip__scroll"):this.$tip.classList.remove("tchart--tip__scroll"),this.$tipScroller.scrollTop<=0?this.$tip.classList.remove("tchart--tip__has_less"):this.$tip.classList.add("tchart--tip__has_less"),this.$tipScroller.scrollTop>=this.$tipScroller.scrollHeight-this.$tipScroller.offsetHeight?this.$tip.classList.remove("tchart--tip__has_more"):this.$tip.classList.add("tchart--tip__has_more")},fillPercentages:function(t,s){var e=this.opts,a=[],h=2;e.data.ys.forEach((function(o,r){e.state["e_"+r]&&(a[r]=Math.max(Math.round(100*o.y[t]/s),0),(isNaN(o.y[t])||0==s)&&(a[r]=0),100==a[r]&&(h=3))}).bind(this)),e.data.ys.forEach((function(t,s){if(e.state["e_"+s]){var o=8*h+17;this.labels[s].$label.style.transform="translateX("+o+"px)",this.labels[s].$label.style.webkitTransform="translateX("+o+"px)",this.labels[s].$perText.nodeValue=a[s]+"%",this.labels[s].$per.style.width=o-7+"px",o>this.maxPercentageWidth&&(this.maxPercentageWidth=o)}}).bind(this))}},t.TTip=s}(),function(){Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},Math.log10=Math.log10||function(t){return Math.log(t)*Math.LOG10E};var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],a={simplifyData:function(t,s,e,a,h,o,r,n,d){var l=(n-r)/d,p=[],c=[];if(l<=1)return{xInd1:r,xInd2:n,x:s,ys:e};for(var g,$=0,m=-999999999,u=o.length,x=r;x<=n;x++){var _=s[x]*a+h<<0,f=_>m;for(f?(p[$]=s[x],$++):g++,j=0;j<u;j++){var y=o[j];c[y]=c[y]||{y:[]};var T=c[y].y[$-1],b=e[y].y[x];void 0==T?c[y].y[$-1]=b:c[y].y[$-1]+=b,$>1&&(f&&(c[y].y[$-2]/=g),x==n&&(c[y].y[$-1]/=g))}f&&(g=1),m=_}return r=0,n=$-1,{isOptimized:l>1,xInd1:0,xInd2:$-1,x:p,ys:c}},getElemPagePos:function(t){var s=t.getBoundingClientRect();return{x:s.left+(window.pageXOffset||document.documentElement.scrollLeft),y:s.top+(window.pageYOffset||document.documentElement.scrollTop)}},getXIndex:function(t,s,e){var a=0,h=t.length-1;for(!e&&(s<t[a]?s=t[a]:s>t[h]&&(s=t[h]));Math.abs(a-h)>1;){var o=Math.round((a+h)/2);s>=t[a]&&s<=t[o]?h=o:a=o}return a+(s-t[a])/(t[h]-t[a])},triggerEvent:function(t,s){"function"==typeof window.CustomEvent&&document.dispatchEvent(new CustomEvent(t,{detail:s||null}))},isTouchDevice:function(){var t,s=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(t=["(",s.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(t).matches)},drawRoundedRect:function(t,s,e,a,h,o,r){e*=s,a*=s,h*=s,o*=s,"number"==typeof r&&(r=[r,r,r,r]),r[0]*=s,r[1]*=s,r[2]*=s,r[3]*=s,t.beginPath(),t.moveTo(h+r[0],o),t.lineTo(h+e-r[1],o),t.quadraticCurveTo(h+e,o,h+e,o+r[1]),t.lineTo(h+e,o+a-r[2]),t.quadraticCurveTo(h+e,o+a,h+e-r[2],o+a),t.lineTo(h+r[3],o+a),t.quadraticCurveTo(h,o+a,h,o+a-r[3]),t.lineTo(h,o+r[0]),t.quadraticCurveTo(h,o,h+r[0],o),t.closePath()},drawRoundedRect2:function(t,s,e,a,h,o,r){e*=s,a*=s,h*=s,o*=s,e<2*(r*=s)&&(r=e/2),a<2*r&&(r=a/2),t.beginPath(),t.moveTo(h+r,o),t.arcTo(h+e,o,h+e,o+a,r),t.arcTo(h+e,o+a,h,o+a,r),t.arcTo(h,o+a,h,o,r),t.arcTo(h,o,h+e,o,r),t.closePath()},getFormatter:function(t,s,e){var h;return e>.5&&s.details&&(h=s.details[t]),h||s[t]||a[t]},xTooltipFormatter:function(e,a){var h=new Date(e),o=[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCDay(),h.getUTCHours(),h.getUTCMinutes()];return a?(o[4]<10?"0":"")+o[4]+":"+(o[5]<10?"0":"")+o[5]:s[o[3]]+", "+o[2]+" "+t[o[1]]+" "+o[0]},xTickFormatter:function(s,e){var a=new Date(s),h=[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCDay(),a.getUTCHours(),a.getUTCMinutes()];return e?(h[4]<10?"0":"")+h[4]+":"+(h[5]<10?"0":"")+h[5]:h[2]+" "+t[h[1]]},xRangeFormatter:function(t,s){var a=new Date(t),h=[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()];return h[2]+" "+e[h[1]]+" "+h[0]},yTickFormatter:function(t,s,e){return 0==t?0:s<1e3?Math.floor(t):s>=1e3&&s<1e6?e?Math.floor(10*t/1e3)/10+"K":Math.round(t/1e3)+"K":e?Math.floor(10*t/1e6)/10+"M":Math.round(t/1e6)+"M"},yTooltipFormatter:function(t){return"number"!=typeof t?"string"==typeof t?t:"?":a.statsFormatKMBT(t)},statsFormatKMBT:function(t,s,e){if(0==t)return"0";null==s&&(s=a.statsChooseNumKMBT(t));var h=a.statsFormatFixedKMBT(t,s);return null==e&&(e=a.statsChoosePrecision(h)),h.toFixed(e)+s},statsFormatFixedKMBT:function(t,s){switch(s){case"K":return t/1e3;case"M":return t/1e6;case"B":return t/1e9;case"T":return t/1e12}return t},statsChoosePrecision:function(t){var s=Math.abs(t);return s>10?0:s>=1?.001>Math.abs(s-Math.floor(s))?0:1:2},statsChooseNumKMBT:function(t){var s=Math.abs(t);return s>=1e12?"T":s>=1e9?"B":s>=1e6?"M":s>=2e3?"K":""},roundRange:function(t,s,e,a){if(1>Math.abs(s-t)&&(t-=t/10,s+=s/10),a){var h,o;return{yMin:t-(s-t)*((a.yMinOrig-a.yMin)/(a.yMaxOrig-a.yMinOrig)),yMax:s+(s-t)*((a.yMax-a.yMaxOrig)/(a.yMaxOrig-a.yMinOrig)),yMinOrig:t,yMaxOrig:s}}for(var r=function(a){var h=l*a,o=Math.floor(t/h)*h,r=o+e*Math.ceil((s-o)*n/h)*h;return{good:r<=c&&o>=p,yMin:Math.round(o),yMax:Math.round(r),yMinOrig:t,yMaxOrig:s}},n=1/e,d=(s-t)*n,l=Math.max(Math.pow(10,Math.floor(Math.log10(d))),1),p=t-.5*d,c=s+.5*d,g=1;!(h=r(5)).good&&!(h=r(2)).good&&!(h=r(1)).good;)if(l*=.1,++g>10)return{yMinOrig:t,yMaxOrig:s,yMin:t,yMax:s};return h}};window.Graph.units.TUtils=a}();