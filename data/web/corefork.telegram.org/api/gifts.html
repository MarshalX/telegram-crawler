<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Telegram Gifts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Users can send Gifts to their friends. The recipients of gifts can display them on their profile pages or turn them into Telegram Stars &amp;raquo;. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.">
    <meta property="og:title" content="Telegram Gifts">
    <meta property="og:image" content="">
    <meta property="og:description" content="Users can send Gifts to their friends. The recipients of gifts can display them on their profile pages or turn them into Telegram Stars &amp;raquo;. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    
    <link href="/css/telegram.css?247" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class="active"><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/api" >API</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/api/gifts" >Telegram Gifts</a></li></ul></div>
  <h1 id="dev_page_title">Telegram Gifts</h1>
  
  <div id="dev_page_content"><!-- scroll_nav -->

<p>Users can send <strong>Gifts</strong> to their friends. The recipients of gifts can display them on their profile pages or turn them into <a href="/api/stars">Telegram Stars »</a>. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.</p>
<h3><a class="anchor" href="#sending-gifts" id="sending-gifts" name="sending-gifts"><i class="anchor-icon"></i></a>Sending gifts</h3>
<pre><code><a href='/constructor/payments.starGiftsNotModified'>payments.starGiftsNotModified</a>#a388a368 = <a href='/type/payments.StarGifts'>payments.StarGifts</a>;
<a href='/constructor/payments.starGifts'>payments.starGifts</a>#2ed82995 hash:<a href='/type/int'>int</a> gifts:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGift'>StarGift</a>&gt; chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/payments.StarGifts'>payments.StarGifts</a>;

<a href='/constructor/starGift'>starGift</a>#80ac53c3 flags:<a href='/type/%23'>#</a> limited:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> sold_out:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> birthday:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> require_premium:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> limited_per_user:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/constructor/true'>true</a> id:<a href='/type/long'>long</a> sticker:<a href='/type/Document'>Document</a> stars:<a href='/type/long'>long</a> availability_remains:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> availability_total:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> availability_resale:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> convert_stars:<a href='/type/long'>long</a> first_sale_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> last_sale_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/long'>long</a> resell_min_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> title:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/string'>string</a> released_by:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> per_user_total:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/int'>int</a> per_user_remains:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/int'>int</a> locked_until_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> = <a href='/type/StarGift'>StarGift</a>;

<a href='/constructor/payments.checkCanSendGiftResultOk'>payments.checkCanSendGiftResultOk</a>#374fa7ad = <a href='/type/payments.CheckCanSendGiftResult'>payments.CheckCanSendGiftResult</a>;
<a href='/constructor/payments.checkCanSendGiftResultFail'>payments.checkCanSendGiftResultFail</a>#d5e58274 reason:<a href='/type/TextWithEntities'>TextWithEntities</a> = <a href='/type/payments.CheckCanSendGiftResult'>payments.CheckCanSendGiftResult</a>;

<a href='/constructor/inputInvoiceStarGift'>inputInvoiceStarGift</a>#e8625e92 flags:<a href='/type/%23'>#</a> hide_name:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> include_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> peer:<a href='/type/InputPeer'>InputPeer</a> gift_id:<a href='/type/long'>long</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/TextWithEntities'>TextWithEntities</a> = <a href='/type/InputInvoice'>InputInvoice</a>;
<a href='/constructor/inputInvoiceStarGiftResale'>inputInvoiceStarGiftResale</a>#c39f5324 flags:<a href='/type/%23'>#</a> ton:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> slug:<a href='/type/string'>string</a> to_id:<a href='/type/InputPeer'>InputPeer</a> = <a href='/type/InputInvoice'>InputInvoice</a>;

<a href='/constructor/messageActionStarGift'>messageActionStarGift</a>#f24de7fa flags:<a href='/type/%23'>#</a> name_hidden:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> converted:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/constructor/true'>true</a> upgraded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> can_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/constructor/true'>true</a> upgrade_separate:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.16?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/TextWithEntities'>TextWithEntities</a> convert_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> upgrade_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/int'>int</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/long'>long</a> prepaid_upgrade_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/string'>string</a> gift_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/inputPrivacyKeyStarGiftsAutoSave'>inputPrivacyKeyStarGiftsAutoSave</a>#e1732341 = <a href='/type/InputPrivacyKey'>InputPrivacyKey</a>;
<a href='/constructor/privacyKeyStarGiftsAutoSave'>privacyKeyStarGiftsAutoSave</a>#2ca4fdf8 = <a href='/type/PrivacyKey'>PrivacyKey</a>;

---functions---

<a href='/method/payments.getStarGifts'>payments.getStarGifts</a>#c4563590 hash:<a href='/type/int'>int</a> = <a href='/type/payments.StarGifts'>payments.StarGifts</a>;
<a href='/method/payments.checkCanSendGift'>payments.checkCanSendGift</a>#c0c4edc9 gift_id:<a href='/type/long'>long</a> = <a href='/type/payments.CheckCanSendGiftResult'>payments.CheckCanSendGiftResult</a>;
<a href='/method/payments.saveStarGift'>payments.saveStarGift</a>#2a2a697c flags:<a href='/type/%23'>#</a> unsave:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> = <a href='/type/Bool'>Bool</a>;
<a href='/method/payments.convertStarGift'>payments.convertStarGift</a>#74bf076b stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> = <a href='/type/Bool'>Bool</a>;</code></pre>
<p>If the <a href="/constructor/userFull">userFull</a>.<code>display_gifts_button</code> flag of both us and another user is set (changed through <a href="/constructor/globalPrivacySettings">globalPrivacySettings</a>), a gift button should always be displayed in the text field in private chats with the other user: once clicked, the gift UI should be displayed, offering the user options to gift <a href="/api/premium#gifting-telegram-premium">Telegram Premium »</a> subscriptions or <a href="/api/gifts">Telegram Gifts »</a>. </p>
<p>The same gifting UI should always be (unconditionally) available through a chat picker, activated by a "Send a Gift" entry in the app's settings.  </p>
<p>Users may disallow the reception of specific gift types by populating the <a href="/constructor/globalPrivacySettings">globalPrivacySettings</a>.<code>disallowed_gifts</code> flag, visible to other users in <a href="/constructor/userFull">userFull</a>.<code>disallowed_gifts</code>.  </p>
<p>Use <a href="/method/payments.getStarGifts">payments.getStarGifts</a> to obtain the full list of of available <a href="/constructor/starGift">starGifts</a>; this method may return some sold-out gifts that have the <code>availability_resale</code> flag set, which indicates that some gifts of this type are on <a href="#reselling-collectible-gifts">resale »</a>, use <a href="/method/payments.getResaleStarGifts">payments.getResaleStarGifts</a> to fetch them.  </p>
<p><a href="/constructor/starGift">starGift</a>s with the <code>limited_per_user</code> flag set and <code>per_user_remains &lt;= 0</code> cannot be bought by the current user, since they already <code>per_user_total</code> gifts of the same type.  </p>
<p><a href="/constructor/starGift">starGift</a>s with the <code>locked_until_date</code> flag set <em>possibly</em> cannot be bought until the specified unixtime: to verify if that is the case, invoke <a href="/method/payments.checkCanSendGift">payments.checkCanSendGift</a>.<br>
This method will return a <a href="/constructor/payments.checkCanSendGiftResultFail">payments.checkCanSendGiftResultFail</a> if the gift cannot be sent, along with a localized description specifying why it cannot be sent yet.<br>
Otherwise, it will return <a href="/constructor/payments.checkCanSendGiftResultOk">payments.checkCanSendGiftResultOk</a>, in which case the client should still check if the <a href="/constructor/starGift">starGift</a>.<code>require_premium</code> flag is set, and if yes, require the user to purchase a <a href="/api/premium">Telegram Premium</a> subscription (if they aren't subscribed already).  </p>
<p>Once the user chooses a sendable, (non-<code>sold_out</code>) gift, they may buy it spending <a href="/constructor/starGift">starGift</a>.<code>stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGift">inputInvoiceStarGift</a>, passing the following parameters:</p>
<ul>
<li><code>peer</code>: Identifier of the user or channel (only if <a href="/constructor/channelFull">channelFull</a>.<code>stargifts_available</code> is set) that will receive the gift</li>
<li><code>gift_id</code>: Identifier of the gift, from <a href="/constructor/starGift">starGift</a>.<code>id</code></li>
<li><code>message</code>: Optional message, attached with the gift: the maximum length for this field is specified in the <a href="/api/config#stargifts-message-length-max">stargifts_message_length_max client configuration value »</a>.</li>
<li><code>hide_name</code>: If set, your name will be hidden if the destination peer decides to display the gift on their profile (they will still see that you sent the gift)</li>
<li><code>include_upgrade</code>: Set this flag to additionally prepay <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> <a href="/api/stars">Telegram Stars</a>, allowing the receiver to convert the gift to a <a href="#collectible-gifts">collectible gift »</a> without paying anything.<br>
Note that this flag can only be set if <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> is set.  </li>
</ul>
<p>When buying a gift from the list of gifts currently on <a href="#reselling-collectible-gifts">resale »</a>, pass an <a href="/constructor/inputInvoiceStarGiftResale">inputInvoiceStarGiftResale</a> instead:</p>
<ul>
<li><code>slug</code>: Taken from the returned <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>slug</code>, or from the link</li>
<li><code>to_id</code>: Identifier of the user or channel that will receive the gift</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow »</a>.  </p>
<p>Once the payment is completed, the destination peer will receive a <a href="/constructor/messageService">messageService</a> with a <a href="/constructor/messageActionStarGift">messageActionStarGift</a> from us, containing info about the received gift.  </p>
<p>The peer may then choose to display the received gift on their profile using <a href="/method/payments.saveStarGift">payments.saveStarGift</a>.<br>
Received gifts may also be automatically displayed on the profile, depending on the destination peer's <a href="/api/privacy">privacy settings</a> (<a href="/constructor/inputPrivacyKeyStarGiftsAutoSave">inputPrivacyKeyStarGiftsAutoSave</a> key).  </p>
<p>Alternatively, the gift may be converted into <a href="/api/stars">Telegram Stars</a> using <a href="/method/payments.convertStarGift">payments.convertStarGift</a>; the latter operation will permanently destroy the gift, converting it into <a href="/constructor/starGift">starGift</a>.<code>convert_stars</code> Telegram Stars, added to the user's balance (note that <a href="/constructor/starGift">starGift</a>.<code>convert_stars</code> will be less than the buying price (<a href="/constructor/starGift">starGift</a>.<code>stars</code>) of the gift if it was originally bought using Telegram Stars bought a long time ago).<br>
A gift can be converted back into <a href="/api/stars">Telegram Stars</a> only if it was received less than <a href="/api/config#stargifts-convert-period-max"><code>stargifts_convert_period_max</code> seconds ago, as specified by the client configuration »</a>.  </p>
<p>If the user decides to display the received gift on their profile, it will be fetchable by all users as specified <a href="#list-all-received-gifts">here »</a>.<br>
The same method may also be used to fetch all gifts received by owned peers from any user.</p>
<p>Note that gift support must be disabled if the <a href="/api/config"><code>stargifts_blocked</code> client configuration flag »</a> is set to true.</p>
<h3><a class="anchor" href="#list-all-received-gifts" id="list-all-received-gifts" name="list-all-received-gifts"><i class="anchor-icon"></i></a>List all received gifts</h3>
<pre><code><a href='/constructor/payments.savedStarGifts'>payments.savedStarGifts</a>#95f389b1 flags:<a href='/type/%23'>#</a> count:<a href='/type/int'>int</a> chat_notifications_enabled:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Bool'>Bool</a> gifts:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SavedStarGift'>SavedStarGift</a>&gt; next_offset:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/payments.SavedStarGifts'>payments.SavedStarGifts</a>;

---functions---

<a href='/method/payments.getSavedStarGifts'>payments.getSavedStarGifts</a>#a319e569 flags:<a href='/type/%23'>#</a> exclude_unsaved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> exclude_saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> exclude_unlimited:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> exclude_unique:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/constructor/true'>true</a> sort_by_value:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> exclude_upgradable:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> exclude_unupgradable:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/constructor/true'>true</a> peer:<a href='/type/InputPeer'>InputPeer</a> collection_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/int'>int</a> offset:<a href='/type/string'>string</a> limit:<a href='/type/int'>int</a> = <a href='/type/payments.SavedStarGifts'>payments.SavedStarGifts</a>;</code></pre>
<p><a href="/method/payments.getSavedStarGifts">payments.getSavedStarGifts</a> may be used to fetch the full list of gifts received by a peer, such as:</p>
<ul>
<li>A user, with peer=<a href="/constructor/inputPeerUser">inputPeerUser</a> (including users different from us)</li>
<li>A channel, with peer=<a href="/constructor/inputPeerChannel">inputPeerChannel</a> (including channels we don't own)</li>
<li>A <a href="/api/bots/connected-business-bots">connected business user</a> (when executing the method as a bot, over the business connection), with peer=<a href="/constructor/inputPeerUser">inputPeerUser</a> of the controlled user</li>
</ul>
<p>The method's parameters may be used to filter out gifts based on various criteria, see the <a href="/method/payments.getSavedStarGifts">method page</a> for more info.  </p>
<p>Note that unlike what the name suggests, the method can be used to fetch both "saved" and "unsaved" gifts (aka gifts both pinned and not pinned to the profile) for users and channels we own/control, depending on the passed flags.  </p>
<h3><a class="anchor" href="#list-specific-owned-gifts" id="list-specific-owned-gifts" name="list-specific-owned-gifts"><i class="anchor-icon"></i></a>List specific owned gifts</h3>
<pre><code><a href='/constructor/inputSavedStarGiftUser'>inputSavedStarGiftUser</a>#69279795 msg_id:<a href='/type/int'>int</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftChat'>inputSavedStarGiftChat</a>#f101aa7f peer:<a href='/type/InputPeer'>InputPeer</a> saved_id:<a href='/type/long'>long</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftSlug'>inputSavedStarGiftSlug</a>#2085c238 slug:<a href='/type/string'>string</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;

<a href='/constructor/payments.savedStarGifts'>payments.savedStarGifts</a>#95f389b1 flags:<a href='/type/%23'>#</a> count:<a href='/type/int'>int</a> chat_notifications_enabled:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Bool'>Bool</a> gifts:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/SavedStarGift'>SavedStarGift</a>&gt; next_offset:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/payments.SavedStarGifts'>payments.SavedStarGifts</a>;

---functions---

<a href='/method/payments.getSavedStarGift'>payments.getSavedStarGift</a>#b455a106 stargift:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; = <a href='/type/payments.SavedStarGifts'>payments.SavedStarGifts</a>;</code></pre>
<p><a href="/method/payments.getSavedStarGift">payments.getSavedStarGift</a> may be used to fetch info about specific gifts owned by a peer we control.  </p>
<p>Note that unlike what the name suggests, the method can be used to fetch both "saved" and "unsaved" gifts (aka gifts both pinned and not pinned to the profile).  </p>
<h3><a class="anchor" href="#notifications-for-received-channel-gifts" id="notifications-for-received-channel-gifts" name="notifications-for-received-channel-gifts"><i class="anchor-icon"></i></a>Notifications for received channel gifts</h3>
<pre><code>---functions---

<a href='/method/payments.toggleChatStarGiftNotifications'>payments.toggleChatStarGiftNotifications</a>#60eaefa1 flags:<a href='/type/%23'>#</a> enabled:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> peer:<a href='/type/InputPeer'>InputPeer</a> = <a href='/type/Bool'>Bool</a>;</code></pre>
<p><a href="/method/payments.toggleChatStarGiftNotifications">payments.toggleChatStarGiftNotifications</a> can be used to enable or disable the reception of notifications every time a <a href="/api/gifts">gift »</a> is received by the specified channel: it can only be invoked by admins with <code>post_messages</code> <a href="/constructor/chatAdminRights">admin rights</a>.</p>
<p>The notifications will be received in the form of <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a> and <a href="/constructor/messageActionStarGift">messageActionStarGift</a> service messages from the channel.</p>
<h3><a class="anchor" href="#pinning-a-received-gift" id="pinning-a-received-gift" name="pinning-a-received-gift"><i class="anchor-icon"></i></a>Pinning a received gift</h3>
<pre><code>---functions---

<a href='/method/payments.toggleStarGiftsPinnedToTop'>payments.toggleStarGiftsPinnedToTop</a>#1513e7b0 peer:<a href='/type/InputPeer'>InputPeer</a> stargift:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; = <a href='/type/Bool'>Bool</a>;</code></pre>
<p>A received gift can be pinned on top of the profile of the user or owned channels by using <a href="/method/payments.toggleStarGiftsPinnedToTop">payments.toggleStarGiftsPinnedToTop</a>.</p>
<p>The maximum number of gifts that can be pinned to a profile is specified in the <a href="/api/config#stargifts-pinned-to-top-limit">stargifts_pinned_to_top_limit client configuration key »</a>.  </p>
<h3><a class="anchor" href="#gift-collections" id="gift-collections" name="gift-collections"><i class="anchor-icon"></i></a>Gift collections</h3>
<pre><code><a href='/constructor/inputSavedStarGiftUser'>inputSavedStarGiftUser</a>#69279795 msg_id:<a href='/type/int'>int</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftChat'>inputSavedStarGiftChat</a>#f101aa7f peer:<a href='/type/InputPeer'>InputPeer</a> saved_id:<a href='/type/long'>long</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftSlug'>inputSavedStarGiftSlug</a>#2085c238 slug:<a href='/type/string'>string</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;

<a href='/constructor/starGiftCollection'>starGiftCollection</a>#9d6b13b0 flags:<a href='/type/%23'>#</a> collection_id:<a href='/type/int'>int</a> title:<a href='/type/string'>string</a> icon:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Document'>Document</a> gifts_count:<a href='/type/int'>int</a> hash:<a href='/type/long'>long</a> = <a href='/type/StarGiftCollection'>StarGiftCollection</a>;

<a href='/constructor/payments.starGiftCollectionsNotModified'>payments.starGiftCollectionsNotModified</a>#a0ba4f17 = <a href='/type/payments.StarGiftCollections'>payments.StarGiftCollections</a>;
<a href='/constructor/payments.starGiftCollections'>payments.starGiftCollections</a>#8a2932f3 collections:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftCollection'>StarGiftCollection</a>&gt; = <a href='/type/payments.StarGiftCollections'>payments.StarGiftCollections</a>;

---functions---

<a href='/method/payments.createStarGiftCollection'>payments.createStarGiftCollection</a>#1f4a0e87 peer:<a href='/type/InputPeer'>InputPeer</a> title:<a href='/type/string'>string</a> stargift:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; = <a href='/type/StarGiftCollection'>StarGiftCollection</a>;
<a href='/method/payments.getStarGiftCollections'>payments.getStarGiftCollections</a>#981b91dd peer:<a href='/type/InputPeer'>InputPeer</a> hash:<a href='/type/long'>long</a> = <a href='/type/payments.StarGiftCollections'>payments.StarGiftCollections</a>;
<a href='/method/payments.updateStarGiftCollection'>payments.updateStarGiftCollection</a>#4fddbee7 flags:<a href='/type/%23'>#</a> peer:<a href='/type/InputPeer'>InputPeer</a> collection_id:<a href='/type/int'>int</a> title:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> delete_stargift:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; add_stargift:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; order:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputSavedStarGift'>InputSavedStarGift</a>&gt; = <a href='/type/StarGiftCollection'>StarGiftCollection</a>;
<a href='/method/payments.reorderStarGiftCollections'>payments.reorderStarGiftCollections</a>#c32af4cc peer:<a href='/type/InputPeer'>InputPeer</a> order:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/int'>int</a>&gt; = <a href='/type/Bool'>Bool</a>;
<a href='/method/payments.deleteStarGiftCollection'>payments.deleteStarGiftCollection</a>#ad5648e8 peer:<a href='/type/InputPeer'>InputPeer</a> collection_id:<a href='/type/int'>int</a> = <a href='/type/Bool'>Bool</a>;

<a href='/method/payments.getSavedStarGifts'>payments.getSavedStarGifts</a>#a319e569 flags:<a href='/type/%23'>#</a> exclude_unsaved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> exclude_saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> exclude_unlimited:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> exclude_unique:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/constructor/true'>true</a> sort_by_value:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> exclude_upgradable:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> exclude_unupgradable:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/constructor/true'>true</a> peer:<a href='/type/InputPeer'>InputPeer</a> collection_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/int'>int</a> offset:<a href='/type/string'>string</a> limit:<a href='/type/int'>int</a> = <a href='/type/payments.SavedStarGifts'>payments.SavedStarGifts</a>;</code></pre>
<p>Gift collections group together multiple owned gifts; each gift may be part of one or more collection.  </p>
<p>Use <a href="/method/payments.createStarGiftCollection">payments.createStarGiftCollection</a> to create a collection.  </p>
<p>Use <a href="/method/payments.getSavedStarGifts">payments.getSavedStarGifts</a> with the <code>collection_id</code> flag set to fetch gifts within a collection.  </p>
<p>Use <a href="/method/payments.getStarGiftCollections">payments.getStarGiftCollections</a> to list all star gift collections of a given peer.  </p>
<p><strong>Note</strong>: the <code>hash</code> parameter of <a href="/method/payments.getStarGiftCollections">payments.getStarGiftCollections</a> is generated by passing the <a href="/constructor/starGiftCollection">starGiftCollection</a>.<code>hash</code> field (<strong>not</strong> the <code>collection_id</code> field) of all previously returned collections, to avoid returning any results if the available collections and their content hasn't changed.  </p>
<p>Use <a href="/method/payments.updateStarGiftCollection">payments.updateStarGiftCollection</a> to add, remove or reorder gifts in the collection or rename the collection.  </p>
<p>Use <a href="/method/payments.reorderStarGiftCollections">payments.reorderStarGiftCollections</a> to reorder the collections on an owned peer's profile.  </p>
<p>Use <a href="/method/payments.deleteStarGiftCollection">payments.deleteStarGiftCollection</a> to delete a gift collection.  </p>
<p>A profile can contain a maximum of <a href="/api/config#stargifts-collections-limit">stargifts_collections_limit »</a> gift collections, each contaning a maximum of <a href="/api/config#stargifts-collection-gifts-limit">stargifts_collection_gifts_limit</a> gifts.  </p>
<p><a href="/api/links#gift-collection-links">Gift collection deep links »</a> can be used to share a gift collection.  </p>
<h3><a class="anchor" href="#collectible-gifts" id="collectible-gifts" name="collectible-gifts"><i class="anchor-icon"></i></a>Collectible gifts</h3>
<p>A <a href="#sending-gifts">received gift</a> may be upgraded to a <a href="https://telegram.org/blog/collectible-gifts-and-more#collectible-gifts">collectible gift</a>.  </p>
<p>Collectible gifts have <strong>special attributes</strong> and can be <strong>transferred</strong> to other users or <strong>auctioned</strong> on NFT marketplaces.  </p>
<p>When you upgrade a gift it unlocks a <strong>new appearance</strong> from dozens of <strong>custom variations</strong> made by Telegram artists. Collectibles also receive a random set of <strong>secondary attributes</strong>, including a background color, icon and number. This means every collectible gift is a <strong>unique work of art</strong> — and that some will be <strong>more rare</strong> than others.  </p>
<h4><a class="anchor" href="#upgrade-a-gift-to-a-collectible-gift" id="upgrade-a-gift-to-a-collectible-gift" name="upgrade-a-gift-to-a-collectible-gift"><i class="anchor-icon"></i></a>Upgrade a gift to a collectible gift</h4>
<pre><code><a href='/constructor/messageActionStarGift'>messageActionStarGift</a>#f24de7fa flags:<a href='/type/%23'>#</a> name_hidden:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> converted:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/constructor/true'>true</a> upgraded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> can_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/constructor/true'>true</a> upgrade_separate:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.16?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/TextWithEntities'>TextWithEntities</a> convert_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> upgrade_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/int'>int</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/long'>long</a> prepaid_upgrade_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/string'>string</a> gift_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;
<a href='/constructor/savedStarGift'>savedStarGift</a>#19a9b572 flags:<a href='/type/%23'>#</a> name_hidden:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> unsaved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> can_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/constructor/true'>true</a> pinned_to_top:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/constructor/true'>true</a> upgrade_separate:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.17?<a href='/constructor/true'>true</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Peer'>Peer</a> date:<a href='/type/int'>int</a> gift:<a href='/type/StarGift'>StarGift</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/TextWithEntities'>TextWithEntities</a> msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/type/long'>long</a> convert_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/long'>long</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/int'>int</a> collection_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/int'>int</a>&gt; prepaid_upgrade_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.16?<a href='/type/string'>string</a> = <a href='/type/SavedStarGift'>SavedStarGift</a>;

<a href='/constructor/starGift'>starGift</a>#80ac53c3 flags:<a href='/type/%23'>#</a> limited:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> sold_out:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> birthday:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> require_premium:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> limited_per_user:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/constructor/true'>true</a> id:<a href='/type/long'>long</a> sticker:<a href='/type/Document'>Document</a> stars:<a href='/type/long'>long</a> availability_remains:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> availability_total:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> availability_resale:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> convert_stars:<a href='/type/long'>long</a> first_sale_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> last_sale_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/int'>int</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/long'>long</a> resell_min_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> title:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/string'>string</a> released_by:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> per_user_total:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/int'>int</a> per_user_remains:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/int'>int</a> locked_until_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> = <a href='/type/StarGift'>StarGift</a>;

<a href='/constructor/starGiftAttributeModel'>starGiftAttributeModel</a>#39d99013 name:<a href='/type/string'>string</a> document:<a href='/type/Document'>Document</a> rarity_permille:<a href='/type/int'>int</a> = <a href='/type/StarGiftAttribute'>StarGiftAttribute</a>;
<a href='/constructor/starGiftAttributePattern'>starGiftAttributePattern</a>#13acff19 name:<a href='/type/string'>string</a> document:<a href='/type/Document'>Document</a> rarity_permille:<a href='/type/int'>int</a> = <a href='/type/StarGiftAttribute'>StarGiftAttribute</a>;
<a href='/constructor/starGiftAttributeBackdrop'>starGiftAttributeBackdrop</a>#d93d859c name:<a href='/type/string'>string</a> backdrop_id:<a href='/type/int'>int</a> center_color:<a href='/type/int'>int</a> edge_color:<a href='/type/int'>int</a> pattern_color:<a href='/type/int'>int</a> text_color:<a href='/type/int'>int</a> rarity_permille:<a href='/type/int'>int</a> = <a href='/type/StarGiftAttribute'>StarGiftAttribute</a>;
<a href='/constructor/starGiftAttributeOriginalDetails'>starGiftAttributeOriginalDetails</a>#e0bff26c flags:<a href='/type/%23'>#</a> sender_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Peer'>Peer</a> recipient_id:<a href='/type/Peer'>Peer</a> date:<a href='/type/int'>int</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/TextWithEntities'>TextWithEntities</a> = <a href='/type/StarGiftAttribute'>StarGiftAttribute</a>;

<a href='/constructor/payments.starGiftUpgradePreview'>payments.starGiftUpgradePreview</a>#167bd90b sample_attributes:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttribute'>StarGiftAttribute</a>&gt; = <a href='/type/payments.StarGiftUpgradePreview'>payments.StarGiftUpgradePreview</a>;

<a href='/constructor/inputSavedStarGiftUser'>inputSavedStarGiftUser</a>#69279795 msg_id:<a href='/type/int'>int</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftChat'>inputSavedStarGiftChat</a>#f101aa7f peer:<a href='/type/InputPeer'>InputPeer</a> saved_id:<a href='/type/long'>long</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftSlug'>inputSavedStarGiftSlug</a>#2085c238 slug:<a href='/type/string'>string</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;

---functions---

<a href='/method/payments.getStarGiftUpgradePreview'>payments.getStarGiftUpgradePreview</a>#9c9abcb1 gift_id:<a href='/type/long'>long</a> = <a href='/type/payments.StarGiftUpgradePreview'>payments.StarGiftUpgradePreview</a>;
<a href='/method/payments.upgradeStarGift'>payments.upgradeStarGift</a>#aed6e4f5 flags:<a href='/type/%23'>#</a> keep_original_details:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> = <a href='/type/Updates'>Updates</a>;</code></pre>
<p>A received gift can be upgraded to a collectible gift if the <a href="/constructor/messageActionStarGift">messageActionStarGift</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_upgrade</code> flag is set.</p>
<p>To obtain a preview of the possible <strong>attributes</strong> (chosen randomly) the gift can receive after the upgrade, invoke <a href="/method/payments.getStarGiftUpgradePreview">payments.getStarGiftUpgradePreview</a>.  </p>
<p>To upgrade a received gift, pay <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGiftUpgrade">inputInvoiceStarGiftUpgrade</a> with the following parameters:</p>
<ul>
<li><code>stargift</code>: The identifier of the received gift</li>
<li><code>keep_original_details</code>: Set this flag to keep the original gift text, sender and receiver in the upgraded gift as a <a href="/constructor/starGiftAttributeOriginalDetails">starGiftAttributeOriginalDetails</a> attribute.</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow »</a>.  </p>
<p>If the original sender of the gift has already paid for the upgrade <a href="#prepaying-for-someone-elses-upgrade">as specified here »</a> (signaled by specific flags listed <a href="#prepaying-for-someone-elses-upgrade">here »</a>), simply invoke <a href="/method/payments.upgradeStarGift">payments.upgradeStarGift</a> with the same flags instead of using the <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a> payment flow.  </p>
<p>Upgrading a gift will emit a <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>, containing info about the newly upgraded gift and some extra information.</p>
<h5><a class="anchor" href="#prepaying-for-someone-elses-upgrade" id="prepaying-for-someone-elses-upgrade" name="prepaying-for-someone-elses-upgrade"><i class="anchor-icon"></i></a>Prepaying for someone else's upgrade</h5>
<pre><code><a href='/constructor/messageActionStarGift'>messageActionStarGift</a>#f24de7fa flags:<a href='/type/%23'>#</a> name_hidden:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> converted:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/constructor/true'>true</a> upgraded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> can_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/constructor/true'>true</a> upgrade_separate:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.16?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/TextWithEntities'>TextWithEntities</a> convert_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> upgrade_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/int'>int</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/type/long'>long</a> prepaid_upgrade_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/string'>string</a> gift_msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/inputInvoiceStarGiftPrepaidUpgrade'>inputInvoiceStarGiftPrepaidUpgrade</a>#9a0b48b8 peer:<a href='/type/InputPeer'>InputPeer</a> hash:<a href='/type/string'>string</a> = <a href='/type/InputInvoice'>InputInvoice</a>;

<a href='/constructor/messageActionStarGiftUnique'>messageActionStarGiftUnique</a>#34f762f3 flags:<a href='/type/%23'>#</a> upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> transferred:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/long'>long</a> resale_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/StarsAmount'>StarsAmount</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;</code></pre>
<p>When sending a gift, the sender can pay for the upgrade by setting <a href="/constructor/inputInvoiceStarGift">inputInvoiceStarGift</a>.<code>include_upgrade</code> when buying the gift.<br>
The resulting <a href="/constructor/messageActionStarGift">messageActionStarGift</a> will have the <code>prepaid_upgrade</code> flag set, and the associated <a href="/constructor/savedStarGift">savedStarGift</a> <strong>will</strong> have the <code>upgrade_stars</code> flag set and populated with the amount paid.  </p>
<p>It's also possible to pay to upgrade someone else's gift (even if we did not send them that gift) after the fact, by using <a href="/constructor/inputInvoiceStarGiftPrepaidUpgrade">inputInvoiceStarGiftPrepaidUpgrade</a>, passing the peer where the gift was sent and the upgrade hash from <a href="/constructor/messageActionStarGift">messageActionStarGift</a>.<code>prepaid_upgrade_hash</code> or <a href="/constructor/savedStarGift">savedStarGift</a>.<code>prepaid_upgrade_hash</code>.  </p>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow »</a>.  </p>
<p>Upon completion, a new <a href="/constructor/messageActionStarGift">messageActionStarGift</a> will be emitted with the <code>upgrade_separate</code> flag set, and the <code>gift_msg_id</code> flag populated with the ID of the <a href="/constructor/messageActionStarGift">messageActionStarGift</a> with the upgraded gift only valid for the receiver of the message.   </p>
<h4><a class="anchor" href="#sharing-and-getting-info-about-a-collectible-gift" id="sharing-and-getting-info-about-a-collectible-gift" name="sharing-and-getting-info-about-a-collectible-gift"><i class="anchor-icon"></i></a>Sharing and getting info about a collectible gift</h4>
<pre><code><a href='/constructor/starGiftUnique'>starGiftUnique</a>#1befe865 flags:<a href='/type/%23'>#</a> require_premium:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/constructor/true'>true</a> resale_ton_only:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> theme_available:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> id:<a href='/type/long'>long</a> gift_id:<a href='/type/long'>long</a> title:<a href='/type/string'>string</a> slug:<a href='/type/string'>string</a> num:<a href='/type/int'>int</a> owner_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Peer'>Peer</a> owner_name:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/string'>string</a> owner_address:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/string'>string</a> attributes:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttribute'>StarGiftAttribute</a>&gt; availability_issued:<a href='/type/int'>int</a> availability_total:<a href='/type/int'>int</a> gift_address:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/string'>string</a> resell_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarsAmount'>StarsAmount</a>&gt; released_by:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/Peer'>Peer</a> value_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> value_currency:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/string'>string</a> theme_peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/Peer'>Peer</a> = <a href='/type/StarGift'>StarGift</a>;

<a href='/constructor/payments.uniqueStarGift'>payments.uniqueStarGift</a>#416c56e8 gift:<a href='/type/StarGift'>StarGift</a> chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/payments.UniqueStarGift'>payments.UniqueStarGift</a>;

<a href='/constructor/payments.uniqueStarGiftValueInfo'>payments.uniqueStarGiftValueInfo</a>#512fe446 flags:<a href='/type/%23'>#</a> last_sale_on_fragment:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> value_is_average:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/constructor/true'>true</a> currency:<a href='/type/string'>string</a> value:<a href='/type/long'>long</a> initial_sale_date:<a href='/type/int'>int</a> initial_sale_stars:<a href='/type/long'>long</a> initial_sale_price:<a href='/type/long'>long</a> last_sale_date:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/int'>int</a> last_sale_price:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/long'>long</a> floor_price:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/long'>long</a> average_price:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/long'>long</a> listed_count:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/int'>int</a> fragment_listed_count:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/int'>int</a> fragment_listed_url:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/string'>string</a> = <a href='/type/payments.UniqueStarGiftValueInfo'>payments.UniqueStarGiftValueInfo</a>;

---functions---

<a href='/method/payments.getUniqueStarGift'>payments.getUniqueStarGift</a>#a1974d72 slug:<a href='/type/string'>string</a> = <a href='/type/payments.UniqueStarGift'>payments.UniqueStarGift</a>;
<a href='/method/payments.getUniqueStarGiftValueInfo'>payments.getUniqueStarGiftValueInfo</a>#4365af6b slug:<a href='/type/string'>string</a> = <a href='/type/payments.UniqueStarGiftValueInfo'>payments.UniqueStarGiftValueInfo</a>;</code></pre>
<p>Info about a unique gift may be shared by creating a <a href="/api/links#collectible-gift-link">collectible gift link »</a> using the slug in <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>slug</code>.  </p>
<p>When parsing a received collectible gift link, invoke <a href="/method/payments.getUniqueStarGift">payments.getUniqueStarGift</a> to obtain info about the gift.  </p>
<p>The slug is also used when buying a gift currently on <a href="#reselling-collectible-gifts">resale »</a>.  </p>
<p>The slug of an <strong>owned</strong> collectible gift link may also be used in any place in the API where an <a href="/type/InputSavedStarGift">InputSavedStarGift</a> is accepted, passing an <a href="/constructor/inputSavedStarGiftSlug">inputSavedStarGiftSlug</a>.  </p>
<p><a href="/method/payments.getUniqueStarGiftValueInfo">payments.getUniqueStarGiftValueInfo</a> may also be used to obtain info about the value of a collectible gift.  </p>
<h4><a class="anchor" href="#reselling-collectible-gifts" id="reselling-collectible-gifts" name="reselling-collectible-gifts"><i class="anchor-icon"></i></a>Reselling collectible gifts</h4>
<pre><code><a href='/constructor/messageActionStarGiftUnique'>messageActionStarGiftUnique</a>#34f762f3 flags:<a href='/type/%23'>#</a> upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> transferred:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/long'>long</a> resale_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/StarsAmount'>StarsAmount</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/inputSavedStarGiftUser'>inputSavedStarGiftUser</a>#69279795 msg_id:<a href='/type/int'>int</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftChat'>inputSavedStarGiftChat</a>#f101aa7f peer:<a href='/type/InputPeer'>InputPeer</a> saved_id:<a href='/type/long'>long</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftSlug'>inputSavedStarGiftSlug</a>#2085c238 slug:<a href='/type/string'>string</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;

<a href='/constructor/payments.resaleStarGifts'>payments.resaleStarGifts</a>#947a12df flags:<a href='/type/%23'>#</a> count:<a href='/type/int'>int</a> gifts:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGift'>StarGift</a>&gt; next_offset:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> attributes:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttribute'>StarGiftAttribute</a>&gt; attributes_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/long'>long</a> chats:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/Chat'>Chat</a>&gt; counters:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttributeCounter'>StarGiftAttributeCounter</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/payments.ResaleStarGifts'>payments.ResaleStarGifts</a>;

---functions---

<a href='/method/payments.updateStarGiftPrice'>payments.updateStarGiftPrice</a>#edbe6ccb stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> resell_amount:<a href='/type/StarsAmount'>StarsAmount</a> = <a href='/type/Updates'>Updates</a>;

<a href='/method/payments.getResaleStarGifts'>payments.getResaleStarGifts</a>#7a5fa236 flags:<a href='/type/%23'>#</a> sort_by_price:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> sort_by_num:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> attributes_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/long'>long</a> gift_id:<a href='/type/long'>long</a> attributes:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttributeId'>StarGiftAttributeId</a>&gt; offset:<a href='/type/string'>string</a> limit:<a href='/type/int'>int</a> = <a href='/type/payments.ResaleStarGifts'>payments.ResaleStarGifts</a>;</code></pre>
<p>A <a href="#collectible-gifts">collectible gift we own »</a> can be put up for sale on the <a href="https://telegram.org/blog/gift-marketplace-and-more">gift marketplace »</a> by using <a href="/method/payments.updateStarGiftPrice">payments.updateStarGiftPrice</a>, specifying the price in <code>resell_stars</code>.  </p>
<p>Note that if the <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_resell_at</code> flag is set, the gift can be put up for sale only starting from the specified date.  </p>
<p>The minimum and maximum resale prices are specified in the <a href="/api/config#stars-stargift-resale-amount-min">stars_stargift_resale_amount_min »</a>/<a href="/api/config#stars-stargift-resale-amount-max">stars_stargift_resale_amount_max »</a> client configuration parameters; passing <code>0</code> will unlist the gift from the marketplace.<br>
If someone buys the gift, you will get <code>price*</code><a href="/api/config#stars-stargift-resale-commission-permille">stars_stargift_resale_commission_permille »</a> <code>/1000</code> stars.  </p>
<p>When specifying the price in nanotons, the minimum and maximum resale prices are specified in the <a href="/api/config#ton-stargift-resale-amount-min">ton_stargift_resale_amount_min »</a>/<a href="/api/config#ton-stargift-resale-amount-max">ton_stargift_resale_amount_max »</a> client configuration parameters; passing <code>0</code> will unlist the gift from the marketplace.<br>
If someone buys the gift, you will get <code>price*</code><a href="/api/config#ton-stargift-resale-commission-permille">ton_stargift_resale_commission_permille »</a> <code>/1000</code> nanoton.  </p>
<p>Use <a href="/method/payments.getStarGifts">payments.getStarGifts</a> to obtain the full list of of available <a href="/constructor/starGift">starGifts</a>; this method may return some sold-out gifts that have the <code>availability_resale</code> flag set, which indicates that some gifts of this type are on <a href="#reselling-collectible-gifts">resale »</a>, use <a href="/method/payments.getResaleStarGifts">payments.getResaleStarGifts</a> to fetch them.  </p>
<p>To buy a gift on resale, follow the usual <a href="#collectible-gifts">payment flow »</a>, passing an <a href="/constructor/inputInvoiceStarGiftResale">inputInvoiceStarGiftResale</a>.  </p>
<h4><a class="anchor" href="#transferring-collectible-gifts" id="transferring-collectible-gifts" name="transferring-collectible-gifts"><i class="anchor-icon"></i></a>Transferring collectible gifts</h4>
<pre><code><a href='/constructor/messageActionStarGiftUnique'>messageActionStarGiftUnique</a>#34f762f3 flags:<a href='/type/%23'>#</a> upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> transferred:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/long'>long</a> resale_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/StarsAmount'>StarsAmount</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/starGiftUnique'>starGiftUnique</a>#1befe865 flags:<a href='/type/%23'>#</a> require_premium:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/constructor/true'>true</a> resale_ton_only:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/constructor/true'>true</a> theme_available:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> id:<a href='/type/long'>long</a> gift_id:<a href='/type/long'>long</a> title:<a href='/type/string'>string</a> slug:<a href='/type/string'>string</a> num:<a href='/type/int'>int</a> owner_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Peer'>Peer</a> owner_name:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/string'>string</a> owner_address:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/string'>string</a> attributes:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarGiftAttribute'>StarGiftAttribute</a>&gt; availability_issued:<a href='/type/int'>int</a> availability_total:<a href='/type/int'>int</a> gift_address:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/string'>string</a> resell_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/StarsAmount'>StarsAmount</a>&gt; released_by:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/type/Peer'>Peer</a> value_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> value_currency:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/string'>string</a> theme_peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/Peer'>Peer</a> = <a href='/type/StarGift'>StarGift</a>;

<a href='/constructor/inputSavedStarGiftUser'>inputSavedStarGiftUser</a>#69279795 msg_id:<a href='/type/int'>int</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftChat'>inputSavedStarGiftChat</a>#f101aa7f peer:<a href='/type/InputPeer'>InputPeer</a> saved_id:<a href='/type/long'>long</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;
<a href='/constructor/inputSavedStarGiftSlug'>inputSavedStarGiftSlug</a>#2085c238 slug:<a href='/type/string'>string</a> = <a href='/type/InputSavedStarGift'>InputSavedStarGift</a>;

<a href='/constructor/inputInvoiceStarGiftTransfer'>inputInvoiceStarGiftTransfer</a>#4a5f5bd9 stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> to_id:<a href='/type/InputPeer'>InputPeer</a> = <a href='/type/InputInvoice'>InputInvoice</a>;

---functions---

<a href='/method/payments.transferStarGift'>payments.transferStarGift</a>#7f18176a stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> to_id:<a href='/type/InputPeer'>InputPeer</a> = <a href='/type/Updates'>Updates</a>;</code></pre>
<p>A collectible gift may be transferred to another user.</p>
<p>To transfer a collectible gift, pay <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>transfer_stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGiftTransfer">inputInvoiceStarGiftTransfer</a> with the following parameters:</p>
<ul>
<li><code>stargift</code>: The identifier of the received gift</li>
<li><code>to_id</code>: The destination peer</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow »</a>.  </p>
<p>If <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>transfer_stars</code> is not set, the gift may be transferred for free: in this case, simply invoke <a href="/method/payments.transferStarGift">payments.transferStarGift</a>.  </p>
<h4><a class="anchor" href="#withdraw-a-collectible-gift-to-the-ton-blockchain" id="withdraw-a-collectible-gift-to-the-ton-blockchain" name="withdraw-a-collectible-gift-to-the-ton-blockchain"><i class="anchor-icon"></i></a>Withdraw a collectible gift to the TON blockchain</h4>
<pre><code><a href='/constructor/messageActionStarGiftUnique'>messageActionStarGiftUnique</a>#34f762f3 flags:<a href='/type/%23'>#</a> upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> transferred:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> saved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> prepaid_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/constructor/true'>true</a> gift:<a href='/type/StarGift'>StarGift</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Peer'>Peer</a> peer:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/Peer'>Peer</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/long'>long</a> resale_amount:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/StarsAmount'>StarsAmount</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/type/int'>int</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/savedStarGift'>savedStarGift</a>#19a9b572 flags:<a href='/type/%23'>#</a> name_hidden:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> unsaved:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> refunded:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.9?<a href='/constructor/true'>true</a> can_upgrade:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.10?<a href='/constructor/true'>true</a> pinned_to_top:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.12?<a href='/constructor/true'>true</a> upgrade_separate:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.17?<a href='/constructor/true'>true</a> from_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/type/Peer'>Peer</a> date:<a href='/type/int'>int</a> gift:<a href='/type/StarGift'>StarGift</a> message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/TextWithEntities'>TextWithEntities</a> msg_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/type/int'>int</a> saved_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.11?<a href='/type/long'>long</a> convert_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/long'>long</a> upgrade_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/long'>long</a> can_export_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.7?<a href='/type/int'>int</a> transfer_stars:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.8?<a href='/type/long'>long</a> can_transfer_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.13?<a href='/type/int'>int</a> can_resell_at:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.14?<a href='/type/int'>int</a> collection_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.15?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/int'>int</a>&gt; prepaid_upgrade_hash:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.16?<a href='/type/string'>string</a> = <a href='/type/SavedStarGift'>SavedStarGift</a>;

<a href='/constructor/payments.starGiftWithdrawalUrl'>payments.starGiftWithdrawalUrl</a>#84aa3a9c url:<a href='/type/string'>string</a> = <a href='/type/payments.StarGiftWithdrawalUrl'>payments.StarGiftWithdrawalUrl</a>;

---functions---

<a href='/method/payments.getStarGiftWithdrawalUrl'>payments.getStarGiftWithdrawalUrl</a>#d06e93a8 stargift:<a href='/type/InputSavedStarGift'>InputSavedStarGift</a> password:<a href='/type/InputCheckPasswordSRP'>InputCheckPasswordSRP</a> = <a href='/type/payments.StarGiftWithdrawalUrl'>payments.StarGiftWithdrawalUrl</a>;</code></pre>
<p>A collectible gift can be converted to an NFT on the TON blockchain by using <a href="/method/payments.getStarGiftWithdrawalUrl">payments.getStarGiftWithdrawalUrl</a>: the method requires the current user's 2FA password, passed as <a href="/api/srp">specified here »</a>, and it returns a URL that can be used to import the NFT on Fragment.</p>
<p>Note that if the <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_export_at</code> flag is set, the gift can be exported to the blockchain only starting from the specified date.  </p>
<h4><a class="anchor" href="#setting-a-collectible-gift-as-emoji-status" id="setting-a-collectible-gift-as-emoji-status" name="setting-a-collectible-gift-as-emoji-status"><i class="anchor-icon"></i></a>Setting a collectible gift as emoji status</h4>
<p><a href="/api/gifts#collectible-gifts">Owned collectible gifts »</a> may be set as emoji statuses: see <a href="/api/emoji-status#collectibles-as-emoji-statuses">here »</a> for more info on the full flow.</p>
<h4><a class="anchor" href="#setting-a-collectible-gift-as-chat-theme" id="setting-a-collectible-gift-as-chat-theme" name="setting-a-collectible-gift-as-chat-theme"><i class="anchor-icon"></i></a>Setting a collectible gift as chat theme</h4>
<p>Some <a href="/api/gifts#collectible-gifts">owned collectible gifts »</a> (those with the <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>theme_available</code> flag set) may be set as chat themes: see <a href="/api/themes#chat-themes">here »</a> for more info on the full flow.</p>
<h3><a class="anchor" href="#toncoin" id="toncoin" name="toncoin"><i class="anchor-icon"></i></a>Toncoin</h3>
<pre><code><a href='/constructor/messageActionGiftTon'>messageActionGiftTon</a>#a8a3c699 flags:<a href='/type/%23'>#</a> currency:<a href='/type/string'>string</a> amount:<a href='/type/long'>long</a> crypto_currency:<a href='/type/string'>string</a> crypto_amount:<a href='/type/long'>long</a> transaction_id:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/string'>string</a> = <a href='/type/MessageAction'>MessageAction</a>;

<a href='/constructor/inputStickerSetTonGifts'>inputStickerSetTonGifts</a>#1cf671a0 = <a href='/type/InputStickerSet'>InputStickerSet</a>;</code></pre>
<p>When TONs are gifted to the user, a <a href="/constructor/messageActionGiftTon">messageActionGiftTon</a> is received: this constructor, along with its contents, should be displayed next to the appropriate sticker from the <a href="/constructor/inputStickerSetTonGifts">inputStickerSetTonGifts »</a> <a href="/api/stickers#stickersets">stickerset »</a>:</p>
<ul>
<li>If <code>crypto_amount &lt;= 10_000_000_000</code>, choose the sticker with emoji equal to "<img class="emoji" src="//telegram.org/img/emoji/40/32E283A3.png" width="20" height="20" alt="2️⃣" />"</li>
<li>If <code>crypto_amount &lt;= 50_000_000_000</code>, choose the sticker with emoji equal to "<img class="emoji" src="//telegram.org/img/emoji/40/31E283A3.png" width="20" height="20" alt="1️⃣" />"</li>
<li>Otherwise, choose the sticker with emoji equal to "<img class="emoji" src="//telegram.org/img/emoji/40/33E283A3.png" width="20" height="20" alt="3️⃣" />"</li>
</ul></div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="//core.telegram.org/">Platform</a></h5>
      <ul>
        <li><a href="//core.telegram.org/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>window.initDevPageNav&&initDevPageNav();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

