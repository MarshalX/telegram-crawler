<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Connected business bots</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Business users can connect Telegram bots that will process and answer messages on their behalf. This allows businesses to seamlessly integrate any existing tools and workflows, or add AI assistants that manage their chats.">
    <meta property="og:title" content="Connected business bots">
    <meta property="og:image" content="">
    <meta property="og:description" content="Business users can connect Telegram bots that will process and answer messages on their behalf. This allows businesses to seamlessly integrate any existing tools and workflows, or add AI assistants that manage their chats.">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    
    <link href="/css/telegram.css?247" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class="active"><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/api" >API</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/api/bots%2Fconnected-business-bots" >Connected business bots</a></li></ul></div>
  <h1 id="dev_page_title">Connected business bots</h1>
  
  <div id="dev_page_content"><!-- scroll_nav -->

<p>Business users can connect Telegram bots that will process and answer messages <strong>on their behalf</strong>. This allows businesses to <strong>seamlessly integrate</strong> any existing tools and workflows, or add <strong>AI assistants</strong> that manage their chats.  </p>
<pre><code><a href='/constructor/inputBusinessBotRecipients'>inputBusinessBotRecipients</a>#c4e5921e flags:<a href='/type/%23'>#</a> existing_chats:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> new_chats:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> contacts:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> non_contacts:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/constructor/true'>true</a> exclude_selected:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> users:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputUser'>InputUser</a>&gt; exclude_users:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/InputUser'>InputUser</a>&gt; = <a href='/type/InputBusinessBotRecipients'>InputBusinessBotRecipients</a>;

<a href='/constructor/businessBotRecipients'>businessBotRecipients</a>#b88cf373 flags:<a href='/type/%23'>#</a> existing_chats:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/constructor/true'>true</a> new_chats:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> contacts:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/constructor/true'>true</a> non_contacts:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.3?<a href='/constructor/true'>true</a> exclude_selected:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.5?<a href='/constructor/true'>true</a> users:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.4?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/long'>long</a>&gt; exclude_users:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.6?<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/long'>long</a>&gt; = <a href='/type/BusinessBotRecipients'>BusinessBotRecipients</a>;

<a href='/constructor/connectedBot'>connectedBot</a>#cd64636c flags:<a href='/type/%23'>#</a> bot_id:<a href='/type/long'>long</a> recipients:<a href='/type/BusinessBotRecipients'>BusinessBotRecipients</a> rights:<a href='/type/BusinessBotRights'>BusinessBotRights</a> = <a href='/type/ConnectedBot'>ConnectedBot</a>;

<a href='/constructor/account.connectedBots'>account.connectedBots</a>#17d7f87b connected_bots:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/ConnectedBot'>ConnectedBot</a>&gt; users:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/User'>User</a>&gt; = <a href='/type/account.ConnectedBots'>account.ConnectedBots</a>;

<a href='/constructor/botBusinessConnection'>botBusinessConnection</a>#8f34b2f5 flags:<a href='/type/%23'>#</a> disabled:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> connection_id:<a href='/type/string'>string</a> user_id:<a href='/type/long'>long</a> dc_id:<a href='/type/int'>int</a> date:<a href='/type/int'>int</a> rights:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/BusinessBotRights'>BusinessBotRights</a> = <a href='/type/BotBusinessConnection'>BotBusinessConnection</a>;

<a href='/constructor/updateBotBusinessConnect'>updateBotBusinessConnect</a>#8ae5c97a connection:<a href='/type/BotBusinessConnection'>BotBusinessConnection</a> qts:<a href='/type/int'>int</a> = <a href='/type/Update'>Update</a>;
<a href='/constructor/updateBotNewBusinessMessage'>updateBotNewBusinessMessage</a>#9ddb347c flags:<a href='/type/%23'>#</a> connection_id:<a href='/type/string'>string</a> message:<a href='/type/Message'>Message</a> reply_to_message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Message'>Message</a> qts:<a href='/type/int'>int</a> = <a href='/type/Update'>Update</a>;
<a href='/constructor/updateBotEditBusinessMessage'>updateBotEditBusinessMessage</a>#7df587c flags:<a href='/type/%23'>#</a> connection_id:<a href='/type/string'>string</a> message:<a href='/type/Message'>Message</a> reply_to_message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/Message'>Message</a> qts:<a href='/type/int'>int</a> = <a href='/type/Update'>Update</a>;
<a href='/constructor/updateBotDeleteBusinessMessage'>updateBotDeleteBusinessMessage</a>#a02a982e connection_id:<a href='/type/string'>string</a> peer:<a href='/type/Peer'>Peer</a> messages:<a href='/type/Vector%20t'>Vector</a>&lt;<a href='/type/int'>int</a>&gt; qts:<a href='/type/int'>int</a> = <a href='/type/Update'>Update</a>;
<a href='/constructor/updateBusinessBotCallbackQuery'>updateBusinessBotCallbackQuery</a>#1ea2fda7 flags:<a href='/type/%23'>#</a> query_id:<a href='/type/long'>long</a> user_id:<a href='/type/long'>long</a> connection_id:<a href='/type/string'>string</a> message:<a href='/type/Message'>Message</a> reply_to_message:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.2?<a href='/type/Message'>Message</a> chat_instance:<a href='/type/long'>long</a> data:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/bytes'>bytes</a> = <a href='/type/Update'>Update</a>;

---functions---

<a href='/method/account.updateConnectedBot'>account.updateConnectedBot</a>#66a08c7e flags:<a href='/type/%23'>#</a> deleted:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.1?<a href='/constructor/true'>true</a> rights:<a href='/mtproto/TL-combinators#conditional-fields'>flags</a>.0?<a href='/type/BusinessBotRights'>BusinessBotRights</a> bot:<a href='/type/InputUser'>InputUser</a> recipients:<a href='/type/InputBusinessBotRecipients'>InputBusinessBotRecipients</a> = <a href='/type/Updates'>Updates</a>;
<a href='/method/account.getConnectedBots'>account.getConnectedBots</a>#4ea4c80f = <a href='/type/account.ConnectedBots'>account.ConnectedBots</a>;

<a href='/method/account.toggleConnectedBotPaused'>account.toggleConnectedBotPaused</a>#646e1097 peer:<a href='/type/InputPeer'>InputPeer</a> paused:<a href='/type/Bool'>Bool</a> = <a href='/type/Bool'>Bool</a>;
<a href='/method/account.disablePeerConnectedBot'>account.disablePeerConnectedBot</a>#5e437ed9 peer:<a href='/type/InputPeer'>InputPeer</a> = <a href='/type/Bool'>Bool</a>;

<a href='/method/account.getBotBusinessConnection'>account.getBotBusinessConnection</a>#76a86270 connection_id:<a href='/type/string'>string</a> = <a href='/type/Updates'>Updates</a>;

invokeWithBusinessConnection#dd289f8e {X:Type} connection_id:string query:!X = X;</code></pre>
<p>Currently just one business bot may be connected to a user account.<br>
Bots which may be connected to user accounts have the <a href="/constructor/user">user</a>.<code>bot_business</code> flag set; trying to connect a non-business bot will emit a <code>BOT_BUSINESS_MISSING</code> error.  </p>
<p>Use <a href="/method/account.updateConnectedBot">account.updateConnectedBot »</a> to connect a business bot to the current account, or to change the connection settings.<br>
Use <a href="/method/account.updateConnectedBot">account.updateConnectedBot »</a> with the <code>deleted</code> flag set to disconnect a business bot from the current account.<br>
Use <a href="/method/account.getConnectedBots">account.getConnectedBots »</a> list all currently connected business bots.  </p>
<p>Use <a href="/method/account.toggleConnectedBotPaused">account.toggleConnectedBotPaused »</a> to pause or unpause a specific chat, temporarily disconnecting it from all business bots (equivalent to temporarily specifying it in <code>recipients.exclude_users</code> during initial configuration with <a href="/method/account.updateConnectedBot">account.updateConnectedBot »</a>).<br>
Use <a href="/method/account.toggleConnectedBotPaused">account.disablePeerConnectedBot »</a> to permanently disconnect a specific chat from all business bots (equivalent to specifying it in <code>recipients.exclude_users</code> during initial configuration with <a href="/method/account.updateConnectedBot">account.updateConnectedBot »</a>); to reconnect of a chat disconnected using this method the user must reconnect the entire bot by invoking <a href="/method/account.updateConnectedBot">account.updateConnectedBot »</a>.  </p>
<p>Note that invoking the above two methods will also add the peer to the <code>recipients.exclude_users</code> field of the related <a href="/constructor/connectedBot">connectedBot</a> (or to <code>recipients.users</code>, if the inversion <code>recipients.exclude_selected</code> flag is set).  </p>
<p>The above two methods should be invoked when pressing the appropriate buttons in the <a href="/api/action-bar#manage-a-connected-business-bot">action bar, see here »</a> for more info on the business bot action bar that should be displayed on all peers currently managed by the bot, according to the <a href="/api/action-bar#manage-a-connected-business-bot">action bar flags »</a>.  </p>
<p>Connecting or disconnecting a business bot or changing the connection settings will emit an <a href="/constructor/updateBotBusinessConnect">updateBotBusinessConnect</a> update to the bot, with the new settings and a <code>connection_id</code> that will be used by the bot to handle updates from and send messages as the user.  </p>
<p>According to the specified settings, the bot will start receiving <a href="/constructor/updateBotNewBusinessMessage">updateBotNewBusinessMessage</a>, <a href="/constructor/updateBotEditBusinessMessage">updateBotEditBusinessMessage</a>, <a href="/constructor/updateBotDeleteBusinessMessage">updateBotDeleteBusinessMessage</a> updates containing messages sent to the connected user via the business connection.  </p>
<p>Bots may invoke <a href="/method/account.getBotBusinessConnection">account.getBotBusinessConnection</a> to re-fetch the <a href="/constructor/updateBotBusinessConnect">updateBotBusinessConnect</a> constructor associated with a specific <code>connection_id</code>.<br>
This is needed for example for freshly logged in bots that are receiving some <a href="/constructor/updateBotNewBusinessMessage">updateBotNewBusinessMessage</a>, etc. updates because some users have already connected to the bot before it could login.<br>
In this case, the bot is receiving messages from the business connection, but it hasn't cached the associated <a href="/constructor/updateBotBusinessConnect">updateBotBusinessConnect</a> with info about the connection (can it reply to messages? etc.) yet, and cannot receive the old ones because they were sent when the bot wasn't logged into the session yet.<br>
This method can be used to fetch info about a not-yet-cached business connection, and should not be invoked if the info is already cached or to fetch changes, as eventual changes will automatically be sent as new <a href="/constructor/updateBotBusinessConnect">updateBotBusinessConnect</a> updates to the bot, using the usual <a href="/api/updates">update delivery methods »</a>.</p>
<p>The bot will be able to invoke the following methods on behalf of the user via a business connection (according to the <a href="/constructor/businessBotRights">businessBotRights</a> passed to <a href="/method/account.updateConnectedBot">account.updateConnectedBot</a>), by wrapping the query in a <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a>, passing the connection ID:  </p>
<!-- start business methods -->
<ul>
<li><a href="/method/account.setGlobalPrivacySettings">account.setGlobalPrivacySettings</a></li>
<li><a href="/method/account.updateProfile">account.updateProfile</a></li>
<li><a href="/method/messages.deleteMessages">messages.deleteMessages</a></li>
<li><a href="/method/messages.editMessage">messages.editMessage</a></li>
<li><a href="/method/messages.readHistory">messages.readHistory</a></li>
<li><a href="/method/messages.sendMedia">messages.sendMedia</a></li>
<li><a href="/method/messages.sendMessage">messages.sendMessage</a></li>
<li><a href="/method/messages.sendMultiMedia">messages.sendMultiMedia</a></li>
<li><a href="/method/messages.setTyping">messages.setTyping</a></li>
<li><a href="/method/messages.updatePinnedMessage">messages.updatePinnedMessage</a></li>
<li><a href="/method/payments.convertStarGift">payments.convertStarGift</a></li>
<li><a href="/method/payments.exportInvoice">payments.exportInvoice</a></li>
<li><a href="/method/payments.getPaymentForm">payments.getPaymentForm</a></li>
<li><a href="/method/payments.getSavedStarGifts">payments.getSavedStarGifts</a></li>
<li><a href="/method/payments.getStarsStatus">payments.getStarsStatus</a></li>
<li><a href="/method/payments.sendStarsForm">payments.sendStarsForm</a></li>
<li><a href="/method/payments.transferStarGift">payments.transferStarGift</a></li>
<li><a href="/method/payments.upgradeStarGift">payments.upgradeStarGift</a></li>
<li><a href="/method/stories.deleteStories">stories.deleteStories</a></li>
</ul>
<!-- end business methods -->
<p>Make sure to always send queries wrapped in an <code>invokeWithBusinessConnection</code> to the datacenter ID, specified in the <code>dc_id</code> field of the <a href="/constructor/botBusinessConnection">botBusinessConnection</a> that is being used.  </p>
<p>Note that a JSON version of the full list of business-ready methods is also available in the <a href="/api/errors#error-database">RPC db »</a>.  </p>
<p><a href="/method/messages.uploadMedia">messages.uploadMedia</a> may also be used in business connections, <em>not</em> by wrapping it in <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a>, but rather by specifying the business connection ID in the <code>business_connection_id</code> parameter.</p>
<p><a href="/method/stories.sendStory">stories.sendStory</a> and <a href="/method/stories.editStory">stories.editStory</a> can also be used to post and edit stories on behalf of a connected business account: in this case, simply pass the business account's peer in <code>peer</code>, <em>without</em> wrapping the request in an <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a> query.<br>
Note that <a href="/method/stories.editStory">stories.editStory</a> can only be used to edit stories posted by the same business bot on behalf of the user.  </p>
<p>A <code>BUSINESS_CONNECTION_INVALID</code> RPC error (or for some business methods, <code>BOT_METHOD_INVALID</code>) will be emitted when using <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a> if the <code>connection_id</code> passed to <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a> is invalid or was changed (by a change of the business connection parameters, in this case a new <a href="/constructor/updateBotBusinessConnect">updateBotBusinessConnect</a> update will be emitted with the new <code>connection_id</code>).  </p>
<p>A <code>BUSINESS_CONNECTION_NOT_ALLOWED</code> RPC error will be emitted when using <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a> if either:</p>
<ul>
<li>The method was invoked by a user (obviously, as users cannot invoke methods over a business connection).  </li>
<li>The method was invoked by a bot, but business mode was disabled in @botfather.  </li>
<li>The method was invoked by a bot, but this method cannot be invoked over a business connection.  </li>
</ul>
<p>A <code>BOT_ACCESS_FORBIDDEN</code> RPC error will be emitted when using <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a>, or the other business-ready methods that do <em>not</em> require <a href="/method/invokeWithBusinessConnection">invokeWithBusinessConnection »</a> if the specified query attempted an operation that is not allowed over a business connection (i.e. editing a story not uploaded by the business bot, and so on).</p>
<p><a href="/constructor/message">Message</a>s sent by business bots on behalf of the user using this method will have the <code>via_business_connection</code> flag set, indicating that the message was sent by the business bot indicated in <a href="/constructor/message">message</a>.<code>via_bot_id</code>.  </p>
<p><a href="/constructor/message">Message</a>s sent by business bots on behalf of the user may also contain <a href="/api/bots/buttons">inline keyboards</a>, including <a href="/api/bots/buttons#answering-a-callback-query">callback buttons</a>, which when pressed will emit an <a href="/constructor/updateBusinessBotCallbackQuery">updateBusinessBotCallbackQuery</a> which should be handled as specified <a href="/api/bots/buttons#answering-a-callback-query">here »</a> (<em>without</em> wrapping the query in an <code>invokeWithBusinessConnection</code>).</p>
<h4><a class="anchor" href="#transferring-stars-from-a-business-account-to-the-business-bot" id="transferring-stars-from-a-business-account-to-the-business-bot" name="transferring-stars-from-a-business-account-to-the-business-bot"><i class="anchor-icon"></i></a>Transferring stars from a business account to the business bot</h4>
<p><a href="/constructor/inputInvoiceBusinessBotTransferStars">inputInvoiceBusinessBotTransferStars</a> may be used to transfer stars from the balance of a user account connected to a business bot, to the balance of the business bot, see <a href="/api/stars#transferring-stars-from-a-business-account-to-the-business-bot">here »</a> for more info on the full flow.</p></div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="//core.telegram.org/">Platform</a></h5>
      <ul>
        <li><a href="//core.telegram.org/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>window.initDevPageNav&&initDevPageNav();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

